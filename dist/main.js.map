{"version":3,"file":"main.js","mappings":"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","sources":["webpack://snow-constructor/./src/editor/view/editor.hbs","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars.runtime.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/base.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/decorators.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/decorators/inline.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/exception.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/helpers.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/helpers/block-helper-missing.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/helpers/each.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/helpers/helper-missing.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/helpers/if.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/helpers/log.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/helpers/lookup.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/helpers/with.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/internal/create-new-lookup-object.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/internal/proto-access.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/internal/wrapHelper.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/logger.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/no-conflict.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/runtime.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/safe-string.js","webpack://snow-constructor/./node_modules/handlebars/dist/cjs/handlebars/utils.js","webpack://snow-constructor/./node_modules/handlebars/runtime.js","webpack://snow-constructor/webpack/bootstrap","webpack://snow-constructor/webpack/runtime/compat get default export","webpack://snow-constructor/webpack/runtime/define property getters","webpack://snow-constructor/webpack/runtime/global","webpack://snow-constructor/webpack/runtime/hasOwnProperty shorthand","webpack://snow-constructor/./src/snow/snow-render-item.ts","webpack://snow-constructor/./src/helpers/color.ts","webpack://snow-constructor/./src/config.ts","webpack://snow-constructor/./src/snow/shapes/shapes.ts","webpack://snow-constructor/./src/snow/snow-matrix.ts","webpack://snow-constructor/./src/snow/physics/snow-lightness-calc.ts","webpack://snow-constructor/./src/snow/physics/snow-drop-shadow-calc.ts","webpack://snow-constructor/./src/snow/physics/snow-grounding-calc.ts","webpack://snow-constructor/./src/snow/physics/snow-gravity-calc.ts","webpack://snow-constructor/./src/snow/snow-matrix-transform.ts","webpack://snow-constructor/./src/snow/snow-scene.ts","webpack://snow-constructor/./src/snow/snow-renderer.ts","webpack://snow-constructor/./src/snow/snow-cursor.ts","webpack://snow-constructor/./src/snow/snow-cell.ts","webpack://snow-constructor/./src/snow/shapes/snow-circle.ts","webpack://snow-constructor/./src/snow/shapes/snow-sphere.ts","webpack://snow-constructor/./src/editor/tools/add-ball-tool.ts","webpack://snow-constructor/./src/snow/shapes/snow-cube.ts","webpack://snow-constructor/./src/editor/tools/add-cube-tool.ts","webpack://snow-constructor/./src/editor/tools/erase-ball-tool.ts","webpack://snow-constructor/./src/editor/tools/add-prop-tool.ts","webpack://snow-constructor/./src/editor/pointer-service.ts","webpack://snow-constructor/./src/editor/tools/paint-tool.ts","webpack://snow-constructor/./src/snow/shapes/snow-cylinder.ts","webpack://snow-constructor/./src/editor/tools/add-cylinder-tool.ts","webpack://snow-constructor/./src/snow/shapes/snow-ground.ts","webpack://snow-constructor/./src/editor/tools/add-circle-tool.ts","webpack://snow-constructor/./src/editor/editor-tools.ts","webpack://snow-constructor/./src/snow/shapes/snow-cone.ts","webpack://snow-constructor/./src/editor/tools/add-cone-tool.ts","webpack://snow-constructor/./src/editor/tools/erase-circle-tool.ts","webpack://snow-constructor/./src/editor/tools/erase-rect-tool.ts","webpack://snow-constructor/./src/snow/render-options.ts","webpack://snow-constructor/./src/snow/snow-matrix-history.ts","webpack://snow-constructor/./src/snow/snow-props.ts","webpack://snow-constructor/./src/editor/editor-save.ts","webpack://snow-constructor/./src/editor/editor-destroy.ts","webpack://snow-constructor/./src/editor/editor.ts","webpack://snow-constructor/./src/helpers/dom.ts","webpack://snow-constructor/./src/viewer/viewer.ts","webpack://snow-constructor/./src/index.ts"],"sourcesContent":["var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <div class=\\\"snow-editor-prop\\\" data-value=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"i\") || (depth0 != null ? lookupProperty(depth0,\"i\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"i\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":108,\"column\":54},\"end\":{\"line\":108,\"column\":59}}}) : helper)))\n    + \"\\\"></div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"snow-editor\\\" data-user-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"userId\") || (depth0 != null ? lookupProperty(depth0,\"userId\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"userId\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":39},\"end\":{\"line\":1,\"column\":49}}}) : helper)))\n    + \"\\\">\\r\\n    <div class=\\\"snow-editor__tools\\\">\\r\\n        <div class=\\\"snow-editor__buttons\\\">\\r\\n            <div class=\\\"snow-editor-button\\\" data-role=\\\"undo\\\" title=\\\"Отмена последнего действия\\\">\\r\\n                <svg width=\\\"20\\\" height=\\\"20\\\" viewBox=\\\"0 0 600 600\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n                    <path d=\\\"m257.78991,147.11723l0,-98.3439l-235.23521,171.41879l235.23521,171.4203l0,-104.38496c136.83237,-7.03767 228.89459,17.84729 230.89459,86.64318c11,126.17919 -140.0358,155.55076 -172.0358,169.55076l0,1.27479c0,0 262.906,11.33775 262.906,-240.90812c-20,-174.1745 -218.16914,-154.62136 -321.76479,-156.67084z\\\"\\r\\n                          fill=\\\"currentColor\\\"/>\\r\\n                </svg>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"snow-editor-tool\\\" data-role=\\\"add\\\"></div>\\r\\n        <div class=\\\"snow-editor-tool\\\" data-role=\\\"erase\\\"></div>\\r\\n        <div class=\\\"snow-editor-tool\\\" data-role=\\\"paint\\\"></div>\\r\\n        <div class=\\\"snow-editor-tool\\\" data-role=\\\"props\\\"></div>\\r\\n        <div class=\\\"snow-editor__buttons\\\">\\r\\n            <div class=\\\"snow-editor__button-free\\\"></div>\\r\\n            <div class=\\\"snow-editor-button\\\" data-role=\\\"clear\\\" title=\\\"Удалить все\\\">\\r\\n                <svg width=\\\"20\\\" height=\\\"20\\\" viewBox=\\\"0 0 600 600\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n                    <path d=\\\"m517.71969,442.21438l-142.97342,-142.97342l142.94743,-142.97342l-73.48761,-73.53958l-142.97342,142.97342l-142.97342,-142.97342l-73.48761,73.53958l142.94743,142.97342l-142.97342,142.97342l73.53958,73.5136l142.94743,-142.97342l142.94743,142.97342\\\"\\r\\n                          fill=\\\"currentColor\\\"/>\\r\\n                </svg>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"snow-editor__buttons\\\">\\r\\n        <div class=\\\"snow-editor__shape\\\" title=\\\"Сфера\\\" data-shape=\\\"sphere\\\">\\r\\n            <svg width=\\\"20\\\" height=\\\"20\\\" viewBox=\\\"0 0 600 600\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n                <path d=\\\"m-178.1,198.84472l0.56913,0l0.17587,-0.38196l0.17587,0.38196l0.56913,0l-0.46044,0.23606l0.17588,0.38196l-0.46044,-0.23607l-0.46044,0.23607l0.17588,-0.38196l-0.46044,-0.23606z\\\"\\r\\n                      stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <path stroke=\\\"currentColor\\\" stroke-width=\\\"46\\\"\\r\\n                      d=\\\"m298.49999,569.99997c-149.4475,0 -270.49998,-121.05248 -270.49998,-270.49998c0,-149.4475 121.05248,-270.49998 270.49998,-270.49998c149.4475,0 270.49998,121.05248 270.49998,270.49998c0,149.4475 -121.05248,270.49998 -270.49998,270.49998z\\\"\\r\\n                      opacity=\\\"undefined\\\" fill=\\\"none\\\"/>\\r\\n                <path stroke=\\\"currentColor\\\" d=\\\"m295,31.99999l1,538.015\\\" stroke-width=\\\"46\\\"\\r\\n                      fill=\\\"none\\\"/>\\r\\n                <path d=\\\"m285,312\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <path d=\\\"m173,126\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <path d=\\\"m179,64\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <path d=\\\"m216,44c-66,113 -90,159 -92,262c-2,103 61,191 96,251\\\" stroke-width=\\\"46\\\"\\r\\n                      stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <path transform=\\\"rotate(-179.906 419.029 299.017)\\\"\\r\\n                      d=\\\"m467.05451,38.01558c-66,113 -94.00325,157.03778 -96.00325,260.03778c-2,103 59.00983,201.9655 94.00983,261.9655\\\"\\r\\n                      stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n            </svg>\\r\\n        </div>\\r\\n        <div class=\\\"snow-editor__shape\\\" title=\\\"Круг\\\" data-shape=\\\"circle\\\">\\r\\n            <svg width=\\\"20\\\" height=\\\"20\\\" viewBox=\\\"0 0 600 600\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n                <path d=\\\"m-178.1,198.84472l0.56913,0l0.17587,-0.38196l0.17587,0.38196l0.56913,0l-0.46044,0.23606l0.17588,0.38196l-0.46044,-0.23607l-0.46044,0.23607l0.17588,-0.38196l-0.46044,-0.23606z\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <path stroke=\\\"currentColor\\\" stroke-width=\\\"46\\\" d=\\\"m298.49999,570.99997c-149.4475,0 -270.49998,-121.05248 -270.49998,-270.49998c0,-149.4475 121.05248,-270.49998 270.49998,-270.49998c149.4475,0 270.49998,121.05248 270.49998,270.49998c0,149.4475 -121.05248,270.49998 -270.49998,270.49998z\\\" opacity=\\\"undefined\\\" fill=\\\"none\\\"/>\\r\\n                <line y2=\\\"44\\\" x2=\\\"383\\\" y1=\\\"334\\\" x1=\\\"34\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <line y2=\\\"136\\\" x2=\\\"501\\\" y1=\\\"473\\\" x1=\\\"99\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <path d=\\\"m219,559l349,-292\\\" opacity=\\\"undefined\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n            </svg>\\r\\n        </div>\\r\\n        <div class=\\\"snow-editor__shape\\\" title=\\\"Цилиндр\\\" data-shape=\\\"cylinder\\\">\\r\\n            <svg width=\\\"20\\\" height=\\\"20\\\" viewBox=\\\"0 0 600 600\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n                <ellipse ry=\\\"108\\\" rx=\\\"271\\\" id=\\\"svg_21\\\" cy=\\\"138\\\" cx=\\\"300\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\"\\r\\n                         fill=\\\"none\\\"/>\\r\\n                <path d=\\\"m569,462\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <path transform=\\\"rotate(-179.817 299 521)\\\" id=\\\"svg_23\\\"\\r\\n                      d=\\\"m28,575c0,-59.66851 121.27624,-108 271,-108c149.72376,0 271,48.33149 271,108\\\"\\r\\n                      opacity=\\\"undefined\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <line y2=\\\"579.05294\\\" x2=\\\"301\\\" y1=\\\"239\\\" x1=\\\"301\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <line y2=\\\"477.05294\\\" x2=\\\"571\\\" y1=\\\"137\\\" x1=\\\"571\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <line y2=\\\"478.05294\\\" x2=\\\"29\\\" y1=\\\"138\\\" x1=\\\"29\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <line y2=\\\"553.05294\\\" x2=\\\"125\\\" y1=\\\"213\\\" x1=\\\"125\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <line y2=\\\"557.05294\\\" x2=\\\"472\\\" y1=\\\"217\\\" x1=\\\"472\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n            </svg>\\r\\n        </div>\\r\\n        <div class=\\\"snow-editor__shape\\\" title=\\\"Квадрат\\\" data-shape=\\\"rect\\\">\\r\\n            <svg width=\\\"20\\\" height=\\\"20\\\" viewBox=\\\"0 0 600 600\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n                <rect height=\\\"503\\\" width=\\\"503\\\" y=\\\"46\\\" x=\\\"49\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <line y2=\\\"537.23143\\\" x2=\\\"296\\\" y1=\\\"51\\\" x1=\\\"296\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <line y2=\\\"535.23143\\\" x2=\\\"169\\\" y1=\\\"49\\\" x1=\\\"169\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <line y2=\\\"541.23143\\\" x2=\\\"426\\\" y1=\\\"55\\\" x1=\\\"426\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n            </svg>\\r\\n        </div>\\r\\n        <div class=\\\"snow-editor__shape\\\" title=\\\"Конус\\\" data-shape=\\\"cone\\\">\\r\\n            <svg width=\\\"20\\\" height=\\\"20\\\" viewBox=\\\"0 0 600 600\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n                <path stroke=\\\"currentColor\\\" d=\\\"m293,68.00001c-118,227 -256,496.99999 -256,496.99999c0,0 525,0 525,0c0,0 -140,-266.99999 -269,-496.99999z\\\" stroke-width=\\\"46\\\" fill=\\\"none\\\"/>\\r\\n                <path d=\\\"m93,458l415.06447,0\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <line y2=\\\"342\\\" x2=\\\"435.83328\\\" y1=\\\"342\\\" x1=\\\"166\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n                <line y2=\\\"231\\\" x2=\\\"372.76906\\\" y1=\\\"231\\\" x1=\\\"217\\\" stroke-width=\\\"46\\\" stroke=\\\"currentColor\\\" fill=\\\"none\\\"/>\\r\\n            </svg>\\r\\n        </div>\\r\\n        <div class=\\\"snow-editor__button-free\\\"></div>\\r\\n        <div class=\\\"snow-editor__size\\\" data-value=\\\"2\\\">1x</div>\\r\\n        <div class=\\\"snow-editor__size\\\" data-value=\\\"4\\\">2x</div>\\r\\n        <div class=\\\"snow-editor__size\\\" data-value=\\\"7\\\">3x</div>\\r\\n        <div class=\\\"snow-editor__size\\\" data-value=\\\"9\\\">4x</div>\\r\\n    </div>\\r\\n    <div class=\\\"snow-editor__canvas\\\"></div>\\r\\n    <div class=\\\"snow-editor__colors\\\">\\r\\n        <div class=\\\"snow-editor-color\\\" data-value=\\\"1\\\"></div>\\r\\n        <div class=\\\"snow-editor-color\\\" data-value=\\\"11\\\"></div>\\r\\n        <div class=\\\"snow-editor-color\\\" data-value=\\\"2\\\"></div>\\r\\n        <div class=\\\"snow-editor-color\\\" data-value=\\\"3\\\"></div>\\r\\n        <div class=\\\"snow-editor-color\\\" data-value=\\\"12\\\"></div>\\r\\n        <div class=\\\"snow-editor-color\\\" data-value=\\\"4\\\"></div>\\r\\n        <div class=\\\"snow-editor-color\\\" data-value=\\\"5\\\"></div>\\r\\n        <div class=\\\"snow-editor-color\\\" data-value=\\\"6\\\"></div>\\r\\n        <div class=\\\"snow-editor-color\\\" data-value=\\\"7\\\"></div>\\r\\n        <div class=\\\"snow-editor-color\\\" data-value=\\\"8\\\"></div>\\r\\n        <div class=\\\"snow-editor-color\\\" data-value=\\\"9\\\"></div>\\r\\n        <div class=\\\"snow-editor-color\\\" data-value=\\\"10\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"snow-editor__props\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"props\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":107,\"column\":8},\"end\":{\"line\":109,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"    </div>\\r\\n    <div class=\\\"snow-editor__message snow-editor__message_error\\\" data-group=\\\"save\\\" hidden>\\r\\n        Что-то поломалось и мы не можем сохранить вашу работу. Попробуйте повторить сохранение чуть позже.\\r\\n    </div>\\r\\n    <div class=\\\"snow-editor__message snow-editor__message_success\\\" data-group=\\\"save\\\" hidden>\\r\\n        Успешно сохранено! В течение пары минут ваш снеговик появится в вашем профиле\\r\\n        <a href=\\\"https://pikabu.ru/@\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"userName\") || (depth0 != null ? lookupProperty(depth0,\"userName\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"userName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":116,\"column\":36},\"end\":{\"line\":116,\"column\":48}}}) : helper)))\n    + \"\\\" style=\\\"color: var(--color-bright-900)\\\" target=\\\"_blank\\\">https://pikabu.ru/@\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"userName\") || (depth0 != null ? lookupProperty(depth0,\"userName\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"userName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":116,\"column\":124},\"end\":{\"line\":116,\"column\":136}}}) : helper)))\n    + \"</a>\\r\\n    </div>\\r\\n    <div class=\\\"snow-editor__message snow-editor__message_warning\\\">\\r\\n        Для сохранения работы вам необходимо авторизоваться на Пикабу\\r\\n    </div>\\r\\n    <div class=\\\"snow-editor__save\\\">\\r\\n        <button class=\\\"button button_success\\\" data-role=\\\"save\\\" type=\\\"button\\\">Опубликовать в профиль</button>\\r\\n        <span>сохраняем...</span>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"snow-editor__message snow-editor__message_error\\\" data-group=\\\"destroy\\\" hidden>\\r\\n        Что-то поломалось и мы не можем удалить снеговика из вашего профиля. Попробуйте повторить запрос чуть позже.\\r\\n    </div>\\r\\n    <div class=\\\"snow-editor__message snow-editor__message_success\\\" data-group=\\\"destroy\\\" hidden>\\r\\n        Успешно удалено из профиля!\\r\\n    </div>\\r\\n    <div class=\\\"snow-editor__destroy\\\">\\r\\n        <button class=\\\"button button_danger\\\" data-role=\\\"destroy\\\" type=\\\"button\\\">Удалить из профиля</button>\\r\\n        <span>применяем...</span>\\r\\n    </div>\\r\\n</div>\";\n},\"useData\":true});","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nvar _handlebarsBase = require('./handlebars/base');\n\nvar base = _interopRequireWildcard(_handlebarsBase);\n\n// Each of these augment the Handlebars object. No need to setup here.\n// (This is done to easily share code between commonjs and browse envs)\n\nvar _handlebarsSafeString = require('./handlebars/safe-string');\n\nvar _handlebarsSafeString2 = _interopRequireDefault(_handlebarsSafeString);\n\nvar _handlebarsException = require('./handlebars/exception');\n\nvar _handlebarsException2 = _interopRequireDefault(_handlebarsException);\n\nvar _handlebarsUtils = require('./handlebars/utils');\n\nvar Utils = _interopRequireWildcard(_handlebarsUtils);\n\nvar _handlebarsRuntime = require('./handlebars/runtime');\n\nvar runtime = _interopRequireWildcard(_handlebarsRuntime);\n\nvar _handlebarsNoConflict = require('./handlebars/no-conflict');\n\nvar _handlebarsNoConflict2 = _interopRequireDefault(_handlebarsNoConflict);\n\n// For compatibility and usage outside of module systems, make the Handlebars object a namespace\nfunction create() {\n  var hb = new base.HandlebarsEnvironment();\n\n  Utils.extend(hb, base);\n  hb.SafeString = _handlebarsSafeString2['default'];\n  hb.Exception = _handlebarsException2['default'];\n  hb.Utils = Utils;\n  hb.escapeExpression = Utils.escapeExpression;\n\n  hb.VM = runtime;\n  hb.template = function (spec) {\n    return runtime.template(spec, hb);\n  };\n\n  return hb;\n}\n\nvar inst = create();\ninst.create = create;\n\n_handlebarsNoConflict2['default'](inst);\n\ninst['default'] = inst;\n\nexports['default'] = inst;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi9oYW5kbGViYXJzLnJ1bnRpbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OEJBQXNCLG1CQUFtQjs7SUFBN0IsSUFBSTs7Ozs7b0NBSU8sMEJBQTBCOzs7O21DQUMzQix3QkFBd0I7Ozs7K0JBQ3ZCLG9CQUFvQjs7SUFBL0IsS0FBSzs7aUNBQ1Esc0JBQXNCOztJQUFuQyxPQUFPOztvQ0FFSSwwQkFBMEI7Ozs7O0FBR2pELFNBQVMsTUFBTSxHQUFHO0FBQ2hCLE1BQUksRUFBRSxHQUFHLElBQUksSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7O0FBRTFDLE9BQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3ZCLElBQUUsQ0FBQyxVQUFVLG9DQUFhLENBQUM7QUFDM0IsSUFBRSxDQUFDLFNBQVMsbUNBQVksQ0FBQztBQUN6QixJQUFFLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNqQixJQUFFLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLGdCQUFnQixDQUFDOztBQUU3QyxJQUFFLENBQUMsRUFBRSxHQUFHLE9BQU8sQ0FBQztBQUNoQixJQUFFLENBQUMsUUFBUSxHQUFHLFVBQVMsSUFBSSxFQUFFO0FBQzNCLFdBQU8sT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7R0FDbkMsQ0FBQzs7QUFFRixTQUFPLEVBQUUsQ0FBQztDQUNYOztBQUVELElBQUksSUFBSSxHQUFHLE1BQU0sRUFBRSxDQUFDO0FBQ3BCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDOztBQUVyQixrQ0FBVyxJQUFJLENBQUMsQ0FBQzs7QUFFakIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQzs7cUJBRVIsSUFBSSIsImZpbGUiOiJoYW5kbGViYXJzLnJ1bnRpbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBiYXNlIGZyb20gJy4vaGFuZGxlYmFycy9iYXNlJztcblxuLy8gRWFjaCBvZiB0aGVzZSBhdWdtZW50IHRoZSBIYW5kbGViYXJzIG9iamVjdC4gTm8gbmVlZCB0byBzZXR1cCBoZXJlLlxuLy8gKFRoaXMgaXMgZG9uZSB0byBlYXNpbHkgc2hhcmUgY29kZSBiZXR3ZWVuIGNvbW1vbmpzIGFuZCBicm93c2UgZW52cylcbmltcG9ydCBTYWZlU3RyaW5nIGZyb20gJy4vaGFuZGxlYmFycy9zYWZlLXN0cmluZyc7XG5pbXBvcnQgRXhjZXB0aW9uIGZyb20gJy4vaGFuZGxlYmFycy9leGNlcHRpb24nO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi9oYW5kbGViYXJzL3V0aWxzJztcbmltcG9ydCAqIGFzIHJ1bnRpbWUgZnJvbSAnLi9oYW5kbGViYXJzL3J1bnRpbWUnO1xuXG5pbXBvcnQgbm9Db25mbGljdCBmcm9tICcuL2hhbmRsZWJhcnMvbm8tY29uZmxpY3QnO1xuXG4vLyBGb3IgY29tcGF0aWJpbGl0eSBhbmQgdXNhZ2Ugb3V0c2lkZSBvZiBtb2R1bGUgc3lzdGVtcywgbWFrZSB0aGUgSGFuZGxlYmFycyBvYmplY3QgYSBuYW1lc3BhY2VcbmZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgbGV0IGhiID0gbmV3IGJhc2UuSGFuZGxlYmFyc0Vudmlyb25tZW50KCk7XG5cbiAgVXRpbHMuZXh0ZW5kKGhiLCBiYXNlKTtcbiAgaGIuU2FmZVN0cmluZyA9IFNhZmVTdHJpbmc7XG4gIGhiLkV4Y2VwdGlvbiA9IEV4Y2VwdGlvbjtcbiAgaGIuVXRpbHMgPSBVdGlscztcbiAgaGIuZXNjYXBlRXhwcmVzc2lvbiA9IFV0aWxzLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgaGIuVk0gPSBydW50aW1lO1xuICBoYi50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHNwZWMpIHtcbiAgICByZXR1cm4gcnVudGltZS50ZW1wbGF0ZShzcGVjLCBoYik7XG4gIH07XG5cbiAgcmV0dXJuIGhiO1xufVxuXG5sZXQgaW5zdCA9IGNyZWF0ZSgpO1xuaW5zdC5jcmVhdGUgPSBjcmVhdGU7XG5cbm5vQ29uZmxpY3QoaW5zdCk7XG5cbmluc3RbJ2RlZmF1bHQnXSA9IGluc3Q7XG5cbmV4cG9ydCBkZWZhdWx0IGluc3Q7XG4iXX0=\n","'use strict';\n\nexports.__esModule = true;\nexports.HandlebarsEnvironment = HandlebarsEnvironment;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('./utils');\n\nvar _exception = require('./exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nvar _helpers = require('./helpers');\n\nvar _decorators = require('./decorators');\n\nvar _logger = require('./logger');\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _internalProtoAccess = require('./internal/proto-access');\n\nvar VERSION = '4.7.7';\nexports.VERSION = VERSION;\nvar COMPILER_REVISION = 8;\nexports.COMPILER_REVISION = COMPILER_REVISION;\nvar LAST_COMPATIBLE_COMPILER_REVISION = 7;\n\nexports.LAST_COMPATIBLE_COMPILER_REVISION = LAST_COMPATIBLE_COMPILER_REVISION;\nvar REVISION_CHANGES = {\n  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it\n  2: '== 1.0.0-rc.3',\n  3: '== 1.0.0-rc.4',\n  4: '== 1.x.x',\n  5: '== 2.0.0-alpha.x',\n  6: '>= 2.0.0-beta.1',\n  7: '>= 4.0.0 <4.3.0',\n  8: '>= 4.3.0'\n};\n\nexports.REVISION_CHANGES = REVISION_CHANGES;\nvar objectType = '[object Object]';\n\nfunction HandlebarsEnvironment(helpers, partials, decorators) {\n  this.helpers = helpers || {};\n  this.partials = partials || {};\n  this.decorators = decorators || {};\n\n  _helpers.registerDefaultHelpers(this);\n  _decorators.registerDefaultDecorators(this);\n}\n\nHandlebarsEnvironment.prototype = {\n  constructor: HandlebarsEnvironment,\n\n  logger: _logger2['default'],\n  log: _logger2['default'].log,\n\n  registerHelper: function registerHelper(name, fn) {\n    if (_utils.toString.call(name) === objectType) {\n      if (fn) {\n        throw new _exception2['default']('Arg not supported with multiple helpers');\n      }\n      _utils.extend(this.helpers, name);\n    } else {\n      this.helpers[name] = fn;\n    }\n  },\n  unregisterHelper: function unregisterHelper(name) {\n    delete this.helpers[name];\n  },\n\n  registerPartial: function registerPartial(name, partial) {\n    if (_utils.toString.call(name) === objectType) {\n      _utils.extend(this.partials, name);\n    } else {\n      if (typeof partial === 'undefined') {\n        throw new _exception2['default']('Attempting to register a partial called \"' + name + '\" as undefined');\n      }\n      this.partials[name] = partial;\n    }\n  },\n  unregisterPartial: function unregisterPartial(name) {\n    delete this.partials[name];\n  },\n\n  registerDecorator: function registerDecorator(name, fn) {\n    if (_utils.toString.call(name) === objectType) {\n      if (fn) {\n        throw new _exception2['default']('Arg not supported with multiple decorators');\n      }\n      _utils.extend(this.decorators, name);\n    } else {\n      this.decorators[name] = fn;\n    }\n  },\n  unregisterDecorator: function unregisterDecorator(name) {\n    delete this.decorators[name];\n  },\n  /**\n   * Reset the memory of illegal property accesses that have already been logged.\n   * @deprecated should only be used in handlebars test-cases\n   */\n  resetLoggedPropertyAccesses: function resetLoggedPropertyAccesses() {\n    _internalProtoAccess.resetLoggedProperties();\n  }\n};\n\nvar log = _logger2['default'].log;\n\nexports.log = log;\nexports.createFrame = _utils.createFrame;\nexports.logger = _logger2['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2Jhc2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7cUJBQThDLFNBQVM7O3lCQUNqQyxhQUFhOzs7O3VCQUNJLFdBQVc7OzBCQUNSLGNBQWM7O3NCQUNyQyxVQUFVOzs7O21DQUNTLHlCQUF5Qjs7QUFFeEQsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDOztBQUN4QixJQUFNLGlCQUFpQixHQUFHLENBQUMsQ0FBQzs7QUFDNUIsSUFBTSxpQ0FBaUMsR0FBRyxDQUFDLENBQUM7OztBQUU1QyxJQUFNLGdCQUFnQixHQUFHO0FBQzlCLEdBQUMsRUFBRSxhQUFhO0FBQ2hCLEdBQUMsRUFBRSxlQUFlO0FBQ2xCLEdBQUMsRUFBRSxlQUFlO0FBQ2xCLEdBQUMsRUFBRSxVQUFVO0FBQ2IsR0FBQyxFQUFFLGtCQUFrQjtBQUNyQixHQUFDLEVBQUUsaUJBQWlCO0FBQ3BCLEdBQUMsRUFBRSxpQkFBaUI7QUFDcEIsR0FBQyxFQUFFLFVBQVU7Q0FDZCxDQUFDOzs7QUFFRixJQUFNLFVBQVUsR0FBRyxpQkFBaUIsQ0FBQzs7QUFFOUIsU0FBUyxxQkFBcUIsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRTtBQUNuRSxNQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sSUFBSSxFQUFFLENBQUM7QUFDN0IsTUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLElBQUksRUFBRSxDQUFDO0FBQy9CLE1BQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxJQUFJLEVBQUUsQ0FBQzs7QUFFbkMsa0NBQXVCLElBQUksQ0FBQyxDQUFDO0FBQzdCLHdDQUEwQixJQUFJLENBQUMsQ0FBQztDQUNqQzs7QUFFRCxxQkFBcUIsQ0FBQyxTQUFTLEdBQUc7QUFDaEMsYUFBVyxFQUFFLHFCQUFxQjs7QUFFbEMsUUFBTSxxQkFBUTtBQUNkLEtBQUcsRUFBRSxvQkFBTyxHQUFHOztBQUVmLGdCQUFjLEVBQUUsd0JBQVMsSUFBSSxFQUFFLEVBQUUsRUFBRTtBQUNqQyxRQUFJLGdCQUFTLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxVQUFVLEVBQUU7QUFDdEMsVUFBSSxFQUFFLEVBQUU7QUFDTixjQUFNLDJCQUFjLHlDQUF5QyxDQUFDLENBQUM7T0FDaEU7QUFDRCxvQkFBTyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQzVCLE1BQU07QUFDTCxVQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztLQUN6QjtHQUNGO0FBQ0Qsa0JBQWdCLEVBQUUsMEJBQVMsSUFBSSxFQUFFO0FBQy9CLFdBQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUMzQjs7QUFFRCxpQkFBZSxFQUFFLHlCQUFTLElBQUksRUFBRSxPQUFPLEVBQUU7QUFDdkMsUUFBSSxnQkFBUyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssVUFBVSxFQUFFO0FBQ3RDLG9CQUFPLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDN0IsTUFBTTtBQUNMLFVBQUksT0FBTyxPQUFPLEtBQUssV0FBVyxFQUFFO0FBQ2xDLGNBQU0seUVBQ3dDLElBQUksb0JBQ2pELENBQUM7T0FDSDtBQUNELFVBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDO0tBQy9CO0dBQ0Y7QUFDRCxtQkFBaUIsRUFBRSwyQkFBUyxJQUFJLEVBQUU7QUFDaEMsV0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0dBQzVCOztBQUVELG1CQUFpQixFQUFFLDJCQUFTLElBQUksRUFBRSxFQUFFLEVBQUU7QUFDcEMsUUFBSSxnQkFBUyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssVUFBVSxFQUFFO0FBQ3RDLFVBQUksRUFBRSxFQUFFO0FBQ04sY0FBTSwyQkFBYyw0Q0FBNEMsQ0FBQyxDQUFDO09BQ25FO0FBQ0Qsb0JBQU8sSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQztLQUMvQixNQUFNO0FBQ0wsVUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7S0FDNUI7R0FDRjtBQUNELHFCQUFtQixFQUFFLDZCQUFTLElBQUksRUFBRTtBQUNsQyxXQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDOUI7Ozs7O0FBS0QsNkJBQTJCLEVBQUEsdUNBQUc7QUFDNUIsZ0RBQXVCLENBQUM7R0FDekI7Q0FDRixDQUFDOztBQUVLLElBQUksR0FBRyxHQUFHLG9CQUFPLEdBQUcsQ0FBQzs7O1FBRW5CLFdBQVc7UUFBRSxNQUFNIiwiZmlsZSI6ImJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVGcmFtZSwgZXh0ZW5kLCB0b1N0cmluZyB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuL2V4Y2VwdGlvbic7XG5pbXBvcnQgeyByZWdpc3RlckRlZmF1bHRIZWxwZXJzIH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCB7IHJlZ2lzdGVyRGVmYXVsdERlY29yYXRvcnMgfSBmcm9tICcuL2RlY29yYXRvcnMnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQgeyByZXNldExvZ2dlZFByb3BlcnRpZXMgfSBmcm9tICcuL2ludGVybmFsL3Byb3RvLWFjY2Vzcyc7XG5cbmV4cG9ydCBjb25zdCBWRVJTSU9OID0gJzQuNy43JztcbmV4cG9ydCBjb25zdCBDT01QSUxFUl9SRVZJU0lPTiA9IDg7XG5leHBvcnQgY29uc3QgTEFTVF9DT01QQVRJQkxFX0NPTVBJTEVSX1JFVklTSU9OID0gNztcblxuZXhwb3J0IGNvbnN0IFJFVklTSU9OX0NIQU5HRVMgPSB7XG4gIDE6ICc8PSAxLjAucmMuMicsIC8vIDEuMC5yYy4yIGlzIGFjdHVhbGx5IHJldjIgYnV0IGRvZXNuJ3QgcmVwb3J0IGl0XG4gIDI6ICc9PSAxLjAuMC1yYy4zJyxcbiAgMzogJz09IDEuMC4wLXJjLjQnLFxuICA0OiAnPT0gMS54LngnLFxuICA1OiAnPT0gMi4wLjAtYWxwaGEueCcsXG4gIDY6ICc+PSAyLjAuMC1iZXRhLjEnLFxuICA3OiAnPj0gNC4wLjAgPDQuMy4wJyxcbiAgODogJz49IDQuMy4wJ1xufTtcblxuY29uc3Qgb2JqZWN0VHlwZSA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXG5leHBvcnQgZnVuY3Rpb24gSGFuZGxlYmFyc0Vudmlyb25tZW50KGhlbHBlcnMsIHBhcnRpYWxzLCBkZWNvcmF0b3JzKSB7XG4gIHRoaXMuaGVscGVycyA9IGhlbHBlcnMgfHwge307XG4gIHRoaXMucGFydGlhbHMgPSBwYXJ0aWFscyB8fCB7fTtcbiAgdGhpcy5kZWNvcmF0b3JzID0gZGVjb3JhdG9ycyB8fCB7fTtcblxuICByZWdpc3RlckRlZmF1bHRIZWxwZXJzKHRoaXMpO1xuICByZWdpc3RlckRlZmF1bHREZWNvcmF0b3JzKHRoaXMpO1xufVxuXG5IYW5kbGViYXJzRW52aXJvbm1lbnQucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogSGFuZGxlYmFyc0Vudmlyb25tZW50LFxuXG4gIGxvZ2dlcjogbG9nZ2VyLFxuICBsb2c6IGxvZ2dlci5sb2csXG5cbiAgcmVnaXN0ZXJIZWxwZXI6IGZ1bmN0aW9uKG5hbWUsIGZuKSB7XG4gICAgaWYgKHRvU3RyaW5nLmNhbGwobmFtZSkgPT09IG9iamVjdFR5cGUpIHtcbiAgICAgIGlmIChmbikge1xuICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdBcmcgbm90IHN1cHBvcnRlZCB3aXRoIG11bHRpcGxlIGhlbHBlcnMnKTtcbiAgICAgIH1cbiAgICAgIGV4dGVuZCh0aGlzLmhlbHBlcnMsIG5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhlbHBlcnNbbmFtZV0gPSBmbjtcbiAgICB9XG4gIH0sXG4gIHVucmVnaXN0ZXJIZWxwZXI6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5oZWxwZXJzW25hbWVdO1xuICB9LFxuXG4gIHJlZ2lzdGVyUGFydGlhbDogZnVuY3Rpb24obmFtZSwgcGFydGlhbCkge1xuICAgIGlmICh0b1N0cmluZy5jYWxsKG5hbWUpID09PSBvYmplY3RUeXBlKSB7XG4gICAgICBleHRlbmQodGhpcy5wYXJ0aWFscywgbmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgcGFydGlhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcbiAgICAgICAgICBgQXR0ZW1wdGluZyB0byByZWdpc3RlciBhIHBhcnRpYWwgY2FsbGVkIFwiJHtuYW1lfVwiIGFzIHVuZGVmaW5lZGBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGFydGlhbHNbbmFtZV0gPSBwYXJ0aWFsO1xuICAgIH1cbiAgfSxcbiAgdW5yZWdpc3RlclBhcnRpYWw6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5wYXJ0aWFsc1tuYW1lXTtcbiAgfSxcblxuICByZWdpc3RlckRlY29yYXRvcjogZnVuY3Rpb24obmFtZSwgZm4pIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgaWYgKGZuKSB7XG4gICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ0FyZyBub3Qgc3VwcG9ydGVkIHdpdGggbXVsdGlwbGUgZGVjb3JhdG9ycycpO1xuICAgICAgfVxuICAgICAgZXh0ZW5kKHRoaXMuZGVjb3JhdG9ycywgbmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVjb3JhdG9yc1tuYW1lXSA9IGZuO1xuICAgIH1cbiAgfSxcbiAgdW5yZWdpc3RlckRlY29yYXRvcjogZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSB0aGlzLmRlY29yYXRvcnNbbmFtZV07XG4gIH0sXG4gIC8qKlxuICAgKiBSZXNldCB0aGUgbWVtb3J5IG9mIGlsbGVnYWwgcHJvcGVydHkgYWNjZXNzZXMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBsb2dnZWQuXG4gICAqIEBkZXByZWNhdGVkIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gaGFuZGxlYmFycyB0ZXN0LWNhc2VzXG4gICAqL1xuICByZXNldExvZ2dlZFByb3BlcnR5QWNjZXNzZXMoKSB7XG4gICAgcmVzZXRMb2dnZWRQcm9wZXJ0aWVzKCk7XG4gIH1cbn07XG5cbmV4cG9ydCBsZXQgbG9nID0gbG9nZ2VyLmxvZztcblxuZXhwb3J0IHsgY3JlYXRlRnJhbWUsIGxvZ2dlciB9O1xuIl19\n","'use strict';\n\nexports.__esModule = true;\nexports.registerDefaultDecorators = registerDefaultDecorators;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _decoratorsInline = require('./decorators/inline');\n\nvar _decoratorsInline2 = _interopRequireDefault(_decoratorsInline);\n\nfunction registerDefaultDecorators(instance) {\n  _decoratorsInline2['default'](instance);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2RlY29yYXRvcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Z0NBQTJCLHFCQUFxQjs7OztBQUV6QyxTQUFTLHlCQUF5QixDQUFDLFFBQVEsRUFBRTtBQUNsRCxnQ0FBZSxRQUFRLENBQUMsQ0FBQztDQUMxQiIsImZpbGUiOiJkZWNvcmF0b3JzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJlZ2lzdGVySW5saW5lIGZyb20gJy4vZGVjb3JhdG9ycy9pbmxpbmUnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJEZWZhdWx0RGVjb3JhdG9ycyhpbnN0YW5jZSkge1xuICByZWdpc3RlcklubGluZShpbnN0YW5jZSk7XG59XG4iXX0=\n","'use strict';\n\nexports.__esModule = true;\n\nvar _utils = require('../utils');\n\nexports['default'] = function (instance) {\n  instance.registerDecorator('inline', function (fn, props, container, options) {\n    var ret = fn;\n    if (!props.partials) {\n      props.partials = {};\n      ret = function (context, options) {\n        // Create a new partials stack frame prior to exec.\n        var original = container.partials;\n        container.partials = _utils.extend({}, original, props.partials);\n        var ret = fn(context, options);\n        container.partials = original;\n        return ret;\n      };\n    }\n\n    props.partials[options.args[0]] = options.fn;\n\n    return ret;\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2RlY29yYXRvcnMvaW5saW5lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7cUJBQXVCLFVBQVU7O3FCQUVsQixVQUFTLFFBQVEsRUFBRTtBQUNoQyxVQUFRLENBQUMsaUJBQWlCLENBQUMsUUFBUSxFQUFFLFVBQVMsRUFBRSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFO0FBQzNFLFFBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQztBQUNiLFFBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFO0FBQ25CLFdBQUssQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLFNBQUcsR0FBRyxVQUFTLE9BQU8sRUFBRSxPQUFPLEVBQUU7O0FBRS9CLFlBQUksUUFBUSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUM7QUFDbEMsaUJBQVMsQ0FBQyxRQUFRLEdBQUcsY0FBTyxFQUFFLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxRCxZQUFJLEdBQUcsR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQy9CLGlCQUFTLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztBQUM5QixlQUFPLEdBQUcsQ0FBQztPQUNaLENBQUM7S0FDSDs7QUFFRCxTQUFLLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUU3QyxXQUFPLEdBQUcsQ0FBQztHQUNaLENBQUMsQ0FBQztDQUNKIiwiZmlsZSI6ImlubGluZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4dGVuZCB9IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJEZWNvcmF0b3IoJ2lubGluZScsIGZ1bmN0aW9uKGZuLCBwcm9wcywgY29udGFpbmVyLCBvcHRpb25zKSB7XG4gICAgbGV0IHJldCA9IGZuO1xuICAgIGlmICghcHJvcHMucGFydGlhbHMpIHtcbiAgICAgIHByb3BzLnBhcnRpYWxzID0ge307XG4gICAgICByZXQgPSBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBwYXJ0aWFscyBzdGFjayBmcmFtZSBwcmlvciB0byBleGVjLlxuICAgICAgICBsZXQgb3JpZ2luYWwgPSBjb250YWluZXIucGFydGlhbHM7XG4gICAgICAgIGNvbnRhaW5lci5wYXJ0aWFscyA9IGV4dGVuZCh7fSwgb3JpZ2luYWwsIHByb3BzLnBhcnRpYWxzKTtcbiAgICAgICAgbGV0IHJldCA9IGZuKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgICAgICBjb250YWluZXIucGFydGlhbHMgPSBvcmlnaW5hbDtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcHJvcHMucGFydGlhbHNbb3B0aW9ucy5hcmdzWzBdXSA9IG9wdGlvbnMuZm47XG5cbiAgICByZXR1cm4gcmV0O1xuICB9KTtcbn1cbiJdfQ==\n","'use strict';\n\nexports.__esModule = true;\nvar errorProps = ['description', 'fileName', 'lineNumber', 'endLineNumber', 'message', 'name', 'number', 'stack'];\n\nfunction Exception(message, node) {\n  var loc = node && node.loc,\n      line = undefined,\n      endLineNumber = undefined,\n      column = undefined,\n      endColumn = undefined;\n\n  if (loc) {\n    line = loc.start.line;\n    endLineNumber = loc.end.line;\n    column = loc.start.column;\n    endColumn = loc.end.column;\n\n    message += ' - ' + line + ':' + column;\n  }\n\n  var tmp = Error.prototype.constructor.call(this, message);\n\n  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.\n  for (var idx = 0; idx < errorProps.length; idx++) {\n    this[errorProps[idx]] = tmp[errorProps[idx]];\n  }\n\n  /* istanbul ignore else */\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, Exception);\n  }\n\n  try {\n    if (loc) {\n      this.lineNumber = line;\n      this.endLineNumber = endLineNumber;\n\n      // Work around issue under safari where we can't directly set the column value\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(this, 'column', {\n          value: column,\n          enumerable: true\n        });\n        Object.defineProperty(this, 'endColumn', {\n          value: endColumn,\n          enumerable: true\n        });\n      } else {\n        this.column = column;\n        this.endColumn = endColumn;\n      }\n    }\n  } catch (nop) {\n    /* Ignore if the browser is very particular */\n  }\n}\n\nException.prototype = new Error();\n\nexports['default'] = Exception;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2V4Y2VwdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxJQUFNLFVBQVUsR0FBRyxDQUNqQixhQUFhLEVBQ2IsVUFBVSxFQUNWLFlBQVksRUFDWixlQUFlLEVBQ2YsU0FBUyxFQUNULE1BQU0sRUFDTixRQUFRLEVBQ1IsT0FBTyxDQUNSLENBQUM7O0FBRUYsU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRTtBQUNoQyxNQUFJLEdBQUcsR0FBRyxJQUFJLElBQUksSUFBSSxDQUFDLEdBQUc7TUFDeEIsSUFBSSxZQUFBO01BQ0osYUFBYSxZQUFBO01BQ2IsTUFBTSxZQUFBO01BQ04sU0FBUyxZQUFBLENBQUM7O0FBRVosTUFBSSxHQUFHLEVBQUU7QUFDUCxRQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7QUFDdEIsaUJBQWEsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQztBQUM3QixVQUFNLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7QUFDMUIsYUFBUyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDOztBQUUzQixXQUFPLElBQUksS0FBSyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDO0dBQ3hDOztBQUVELE1BQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7OztBQUcxRCxPQUFLLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsVUFBVSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsRUFBRTtBQUNoRCxRQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0dBQzlDOzs7QUFHRCxNQUFJLEtBQUssQ0FBQyxpQkFBaUIsRUFBRTtBQUMzQixTQUFLLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0dBQzFDOztBQUVELE1BQUk7QUFDRixRQUFJLEdBQUcsRUFBRTtBQUNQLFVBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3ZCLFVBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDOzs7O0FBSW5DLFVBQUksTUFBTSxDQUFDLGNBQWMsRUFBRTtBQUN6QixjQUFNLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUU7QUFDcEMsZUFBSyxFQUFFLE1BQU07QUFDYixvQkFBVSxFQUFFLElBQUk7U0FDakIsQ0FBQyxDQUFDO0FBQ0gsY0FBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFO0FBQ3ZDLGVBQUssRUFBRSxTQUFTO0FBQ2hCLG9CQUFVLEVBQUUsSUFBSTtTQUNqQixDQUFDLENBQUM7T0FDSixNQUFNO0FBQ0wsWUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDckIsWUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7T0FDNUI7S0FDRjtHQUNGLENBQUMsT0FBTyxHQUFHLEVBQUU7O0dBRWI7Q0FDRjs7QUFFRCxTQUFTLENBQUMsU0FBUyxHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7O3FCQUVuQixTQUFTIiwiZmlsZSI6ImV4Y2VwdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGVycm9yUHJvcHMgPSBbXG4gICdkZXNjcmlwdGlvbicsXG4gICdmaWxlTmFtZScsXG4gICdsaW5lTnVtYmVyJyxcbiAgJ2VuZExpbmVOdW1iZXInLFxuICAnbWVzc2FnZScsXG4gICduYW1lJyxcbiAgJ251bWJlcicsXG4gICdzdGFjaydcbl07XG5cbmZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlLCBub2RlKSB7XG4gIGxldCBsb2MgPSBub2RlICYmIG5vZGUubG9jLFxuICAgIGxpbmUsXG4gICAgZW5kTGluZU51bWJlcixcbiAgICBjb2x1bW4sXG4gICAgZW5kQ29sdW1uO1xuXG4gIGlmIChsb2MpIHtcbiAgICBsaW5lID0gbG9jLnN0YXJ0LmxpbmU7XG4gICAgZW5kTGluZU51bWJlciA9IGxvYy5lbmQubGluZTtcbiAgICBjb2x1bW4gPSBsb2Muc3RhcnQuY29sdW1uO1xuICAgIGVuZENvbHVtbiA9IGxvYy5lbmQuY29sdW1uO1xuXG4gICAgbWVzc2FnZSArPSAnIC0gJyArIGxpbmUgKyAnOicgKyBjb2x1bW47XG4gIH1cblxuICBsZXQgdG1wID0gRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgbWVzc2FnZSk7XG5cbiAgLy8gVW5mb3J0dW5hdGVseSBlcnJvcnMgYXJlIG5vdCBlbnVtZXJhYmxlIGluIENocm9tZSAoYXQgbGVhc3QpLCBzbyBgZm9yIHByb3AgaW4gdG1wYCBkb2Vzbid0IHdvcmsuXG4gIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IGVycm9yUHJvcHMubGVuZ3RoOyBpZHgrKykge1xuICAgIHRoaXNbZXJyb3JQcm9wc1tpZHhdXSA9IHRtcFtlcnJvclByb3BzW2lkeF1dO1xuICB9XG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgRXhjZXB0aW9uKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgaWYgKGxvYykge1xuICAgICAgdGhpcy5saW5lTnVtYmVyID0gbGluZTtcbiAgICAgIHRoaXMuZW5kTGluZU51bWJlciA9IGVuZExpbmVOdW1iZXI7XG5cbiAgICAgIC8vIFdvcmsgYXJvdW5kIGlzc3VlIHVuZGVyIHNhZmFyaSB3aGVyZSB3ZSBjYW4ndCBkaXJlY3RseSBzZXQgdGhlIGNvbHVtbiB2YWx1ZVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdjb2x1bW4nLCB7XG4gICAgICAgICAgdmFsdWU6IGNvbHVtbixcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2VuZENvbHVtbicsIHtcbiAgICAgICAgICB2YWx1ZTogZW5kQ29sdW1uLFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbjtcbiAgICAgICAgdGhpcy5lbmRDb2x1bW4gPSBlbmRDb2x1bW47XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChub3ApIHtcbiAgICAvKiBJZ25vcmUgaWYgdGhlIGJyb3dzZXIgaXMgdmVyeSBwYXJ0aWN1bGFyICovXG4gIH1cbn1cblxuRXhjZXB0aW9uLnByb3RvdHlwZSA9IG5ldyBFcnJvcigpO1xuXG5leHBvcnQgZGVmYXVsdCBFeGNlcHRpb247XG4iXX0=\n","'use strict';\n\nexports.__esModule = true;\nexports.registerDefaultHelpers = registerDefaultHelpers;\nexports.moveHelperToHooks = moveHelperToHooks;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _helpersBlockHelperMissing = require('./helpers/block-helper-missing');\n\nvar _helpersBlockHelperMissing2 = _interopRequireDefault(_helpersBlockHelperMissing);\n\nvar _helpersEach = require('./helpers/each');\n\nvar _helpersEach2 = _interopRequireDefault(_helpersEach);\n\nvar _helpersHelperMissing = require('./helpers/helper-missing');\n\nvar _helpersHelperMissing2 = _interopRequireDefault(_helpersHelperMissing);\n\nvar _helpersIf = require('./helpers/if');\n\nvar _helpersIf2 = _interopRequireDefault(_helpersIf);\n\nvar _helpersLog = require('./helpers/log');\n\nvar _helpersLog2 = _interopRequireDefault(_helpersLog);\n\nvar _helpersLookup = require('./helpers/lookup');\n\nvar _helpersLookup2 = _interopRequireDefault(_helpersLookup);\n\nvar _helpersWith = require('./helpers/with');\n\nvar _helpersWith2 = _interopRequireDefault(_helpersWith);\n\nfunction registerDefaultHelpers(instance) {\n  _helpersBlockHelperMissing2['default'](instance);\n  _helpersEach2['default'](instance);\n  _helpersHelperMissing2['default'](instance);\n  _helpersIf2['default'](instance);\n  _helpersLog2['default'](instance);\n  _helpersLookup2['default'](instance);\n  _helpersWith2['default'](instance);\n}\n\nfunction moveHelperToHooks(instance, helperName, keepHelper) {\n  if (instance.helpers[helperName]) {\n    instance.hooks[helperName] = instance.helpers[helperName];\n    if (!keepHelper) {\n      delete instance.helpers[helperName];\n    }\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O3lDQUF1QyxnQ0FBZ0M7Ozs7MkJBQzlDLGdCQUFnQjs7OztvQ0FDUCwwQkFBMEI7Ozs7eUJBQ3JDLGNBQWM7Ozs7MEJBQ2IsZUFBZTs7Ozs2QkFDWixrQkFBa0I7Ozs7MkJBQ3BCLGdCQUFnQjs7OztBQUVsQyxTQUFTLHNCQUFzQixDQUFDLFFBQVEsRUFBRTtBQUMvQyx5Q0FBMkIsUUFBUSxDQUFDLENBQUM7QUFDckMsMkJBQWEsUUFBUSxDQUFDLENBQUM7QUFDdkIsb0NBQXNCLFFBQVEsQ0FBQyxDQUFDO0FBQ2hDLHlCQUFXLFFBQVEsQ0FBQyxDQUFDO0FBQ3JCLDBCQUFZLFFBQVEsQ0FBQyxDQUFDO0FBQ3RCLDZCQUFlLFFBQVEsQ0FBQyxDQUFDO0FBQ3pCLDJCQUFhLFFBQVEsQ0FBQyxDQUFDO0NBQ3hCOztBQUVNLFNBQVMsaUJBQWlCLENBQUMsUUFBUSxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUU7QUFDbEUsTUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFO0FBQ2hDLFlBQVEsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUMxRCxRQUFJLENBQUMsVUFBVSxFQUFFO0FBQ2YsYUFBTyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ3JDO0dBQ0Y7Q0FDRiIsImZpbGUiOiJoZWxwZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJlZ2lzdGVyQmxvY2tIZWxwZXJNaXNzaW5nIGZyb20gJy4vaGVscGVycy9ibG9jay1oZWxwZXItbWlzc2luZyc7XG5pbXBvcnQgcmVnaXN0ZXJFYWNoIGZyb20gJy4vaGVscGVycy9lYWNoJztcbmltcG9ydCByZWdpc3RlckhlbHBlck1pc3NpbmcgZnJvbSAnLi9oZWxwZXJzL2hlbHBlci1taXNzaW5nJztcbmltcG9ydCByZWdpc3RlcklmIGZyb20gJy4vaGVscGVycy9pZic7XG5pbXBvcnQgcmVnaXN0ZXJMb2cgZnJvbSAnLi9oZWxwZXJzL2xvZyc7XG5pbXBvcnQgcmVnaXN0ZXJMb29rdXAgZnJvbSAnLi9oZWxwZXJzL2xvb2t1cCc7XG5pbXBvcnQgcmVnaXN0ZXJXaXRoIGZyb20gJy4vaGVscGVycy93aXRoJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyRGVmYXVsdEhlbHBlcnMoaW5zdGFuY2UpIHtcbiAgcmVnaXN0ZXJCbG9ja0hlbHBlck1pc3NpbmcoaW5zdGFuY2UpO1xuICByZWdpc3RlckVhY2goaW5zdGFuY2UpO1xuICByZWdpc3RlckhlbHBlck1pc3NpbmcoaW5zdGFuY2UpO1xuICByZWdpc3RlcklmKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJMb2coaW5zdGFuY2UpO1xuICByZWdpc3Rlckxvb2t1cChpbnN0YW5jZSk7XG4gIHJlZ2lzdGVyV2l0aChpbnN0YW5jZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb3ZlSGVscGVyVG9Ib29rcyhpbnN0YW5jZSwgaGVscGVyTmFtZSwga2VlcEhlbHBlcikge1xuICBpZiAoaW5zdGFuY2UuaGVscGVyc1toZWxwZXJOYW1lXSkge1xuICAgIGluc3RhbmNlLmhvb2tzW2hlbHBlck5hbWVdID0gaW5zdGFuY2UuaGVscGVyc1toZWxwZXJOYW1lXTtcbiAgICBpZiAoIWtlZXBIZWxwZXIpIHtcbiAgICAgIGRlbGV0ZSBpbnN0YW5jZS5oZWxwZXJzW2hlbHBlck5hbWVdO1xuICAgIH1cbiAgfVxufVxuIl19\n","'use strict';\n\nexports.__esModule = true;\n\nvar _utils = require('../utils');\n\nexports['default'] = function (instance) {\n  instance.registerHelper('blockHelperMissing', function (context, options) {\n    var inverse = options.inverse,\n        fn = options.fn;\n\n    if (context === true) {\n      return fn(this);\n    } else if (context === false || context == null) {\n      return inverse(this);\n    } else if (_utils.isArray(context)) {\n      if (context.length > 0) {\n        if (options.ids) {\n          options.ids = [options.name];\n        }\n\n        return instance.helpers.each(context, options);\n      } else {\n        return inverse(this);\n      }\n    } else {\n      if (options.data && options.ids) {\n        var data = _utils.createFrame(options.data);\n        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.name);\n        options = { data: data };\n      }\n\n      return fn(context, options);\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvYmxvY2staGVscGVyLW1pc3NpbmcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztxQkFBd0QsVUFBVTs7cUJBRW5ELFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsb0JBQW9CLEVBQUUsVUFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3ZFLFFBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPO1FBQzNCLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUVsQixRQUFJLE9BQU8sS0FBSyxJQUFJLEVBQUU7QUFDcEIsYUFBTyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDakIsTUFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLElBQUksT0FBTyxJQUFJLElBQUksRUFBRTtBQUMvQyxhQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUN0QixNQUFNLElBQUksZUFBUSxPQUFPLENBQUMsRUFBRTtBQUMzQixVQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ3RCLFlBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUNmLGlCQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzlCOztBQUVELGVBQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO09BQ2hELE1BQU07QUFDTCxlQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN0QjtLQUNGLE1BQU07QUFDTCxVQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUMvQixZQUFJLElBQUksR0FBRyxtQkFBWSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDckMsWUFBSSxDQUFDLFdBQVcsR0FBRyx5QkFDakIsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQ3hCLE9BQU8sQ0FBQyxJQUFJLENBQ2IsQ0FBQztBQUNGLGVBQU8sR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztPQUMxQjs7QUFFRCxhQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7S0FDN0I7R0FDRixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJibG9jay1oZWxwZXItbWlzc2luZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFwcGVuZENvbnRleHRQYXRoLCBjcmVhdGVGcmFtZSwgaXNBcnJheSB9IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2Jsb2NrSGVscGVyTWlzc2luZycsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBsZXQgaW52ZXJzZSA9IG9wdGlvbnMuaW52ZXJzZSxcbiAgICAgIGZuID0gb3B0aW9ucy5mbjtcblxuICAgIGlmIChjb250ZXh0ID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gZm4odGhpcyk7XG4gICAgfSBlbHNlIGlmIChjb250ZXh0ID09PSBmYWxzZSB8fCBjb250ZXh0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBpbnZlcnNlKHRoaXMpO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheShjb250ZXh0KSkge1xuICAgICAgaWYgKGNvbnRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAob3B0aW9ucy5pZHMpIHtcbiAgICAgICAgICBvcHRpb25zLmlkcyA9IFtvcHRpb25zLm5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLmhlbHBlcnMuZWFjaChjb250ZXh0LCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpbnZlcnNlKHRoaXMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAob3B0aW9ucy5kYXRhICYmIG9wdGlvbnMuaWRzKSB7XG4gICAgICAgIGxldCBkYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICAgICAgZGF0YS5jb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKFxuICAgICAgICAgIG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCxcbiAgICAgICAgICBvcHRpb25zLm5hbWVcbiAgICAgICAgKTtcbiAgICAgICAgb3B0aW9ucyA9IHsgZGF0YTogZGF0YSB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm4oY29udGV4dCwgb3B0aW9ucyk7XG4gICAgfVxuICB9KTtcbn1cbiJdfQ==\n","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('../utils');\n\nvar _exception = require('../exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('each', function (context, options) {\n    if (!options) {\n      throw new _exception2['default']('Must pass iterator to #each');\n    }\n\n    var fn = options.fn,\n        inverse = options.inverse,\n        i = 0,\n        ret = '',\n        data = undefined,\n        contextPath = undefined;\n\n    if (options.data && options.ids) {\n      contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]) + '.';\n    }\n\n    if (_utils.isFunction(context)) {\n      context = context.call(this);\n    }\n\n    if (options.data) {\n      data = _utils.createFrame(options.data);\n    }\n\n    function execIteration(field, index, last) {\n      if (data) {\n        data.key = field;\n        data.index = index;\n        data.first = index === 0;\n        data.last = !!last;\n\n        if (contextPath) {\n          data.contextPath = contextPath + field;\n        }\n      }\n\n      ret = ret + fn(context[field], {\n        data: data,\n        blockParams: _utils.blockParams([context[field], field], [contextPath + field, null])\n      });\n    }\n\n    if (context && typeof context === 'object') {\n      if (_utils.isArray(context)) {\n        for (var j = context.length; i < j; i++) {\n          if (i in context) {\n            execIteration(i, i, i === context.length - 1);\n          }\n        }\n      } else if (global.Symbol && context[global.Symbol.iterator]) {\n        var newContext = [];\n        var iterator = context[global.Symbol.iterator]();\n        for (var it = iterator.next(); !it.done; it = iterator.next()) {\n          newContext.push(it.value);\n        }\n        context = newContext;\n        for (var j = context.length; i < j; i++) {\n          execIteration(i, i, i === context.length - 1);\n        }\n      } else {\n        (function () {\n          var priorKey = undefined;\n\n          Object.keys(context).forEach(function (key) {\n            // We're running the iterations one step out of sync so we can detect\n            // the last iteration without have to scan the object twice and create\n            // an itermediate keys array.\n            if (priorKey !== undefined) {\n              execIteration(priorKey, i - 1);\n            }\n            priorKey = key;\n            i++;\n          });\n          if (priorKey !== undefined) {\n            execIteration(priorKey, i - 1, true);\n          }\n        })();\n      }\n    }\n\n    if (i === 0) {\n      ret = inverse(this);\n    }\n\n    return ret;\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvZWFjaC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O3FCQU1PLFVBQVU7O3lCQUNLLGNBQWM7Ozs7cUJBRXJCLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLFVBQVMsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUN6RCxRQUFJLENBQUMsT0FBTyxFQUFFO0FBQ1osWUFBTSwyQkFBYyw2QkFBNkIsQ0FBQyxDQUFDO0tBQ3BEOztBQUVELFFBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQyxFQUFFO1FBQ2pCLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTztRQUN6QixDQUFDLEdBQUcsQ0FBQztRQUNMLEdBQUcsR0FBRyxFQUFFO1FBQ1IsSUFBSSxZQUFBO1FBQ0osV0FBVyxZQUFBLENBQUM7O0FBRWQsUUFBSSxPQUFPLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxHQUFHLEVBQUU7QUFDL0IsaUJBQVcsR0FDVCx5QkFBa0IsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztLQUNyRTs7QUFFRCxRQUFJLGtCQUFXLE9BQU8sQ0FBQyxFQUFFO0FBQ3ZCLGFBQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzlCOztBQUVELFFBQUksT0FBTyxDQUFDLElBQUksRUFBRTtBQUNoQixVQUFJLEdBQUcsbUJBQVksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ2xDOztBQUVELGFBQVMsYUFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFO0FBQ3pDLFVBQUksSUFBSSxFQUFFO0FBQ1IsWUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUM7QUFDakIsWUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7QUFDbkIsWUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLEtBQUssQ0FBQyxDQUFDO0FBQ3pCLFlBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQzs7QUFFbkIsWUFBSSxXQUFXLEVBQUU7QUFDZixjQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsR0FBRyxLQUFLLENBQUM7U0FDeEM7T0FDRjs7QUFFRCxTQUFHLEdBQ0QsR0FBRyxHQUNILEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDakIsWUFBSSxFQUFFLElBQUk7QUFDVixtQkFBVyxFQUFFLG1CQUNYLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUN2QixDQUFDLFdBQVcsR0FBRyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQzVCO09BQ0YsQ0FBQyxDQUFDO0tBQ047O0FBRUQsUUFBSSxPQUFPLElBQUksT0FBTyxPQUFPLEtBQUssUUFBUSxFQUFFO0FBQzFDLFVBQUksZUFBUSxPQUFPLENBQUMsRUFBRTtBQUNwQixhQUFLLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN2QyxjQUFJLENBQUMsSUFBSSxPQUFPLEVBQUU7QUFDaEIseUJBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1dBQy9DO1NBQ0Y7T0FDRixNQUFNLElBQUksTUFBTSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUMzRCxZQUFNLFVBQVUsR0FBRyxFQUFFLENBQUM7QUFDdEIsWUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztBQUNuRCxhQUFLLElBQUksRUFBRSxHQUFHLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxHQUFHLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUM3RCxvQkFBVSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDM0I7QUFDRCxlQUFPLEdBQUcsVUFBVSxDQUFDO0FBQ3JCLGFBQUssSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3ZDLHVCQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztTQUMvQztPQUNGLE1BQU07O0FBQ0wsY0FBSSxRQUFRLFlBQUEsQ0FBQzs7QUFFYixnQkFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQSxHQUFHLEVBQUk7Ozs7QUFJbEMsZ0JBQUksUUFBUSxLQUFLLFNBQVMsRUFBRTtBQUMxQiwyQkFBYSxDQUFDLFFBQVEsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7YUFDaEM7QUFDRCxvQkFBUSxHQUFHLEdBQUcsQ0FBQztBQUNmLGFBQUMsRUFBRSxDQUFDO1dBQ0wsQ0FBQyxDQUFDO0FBQ0gsY0FBSSxRQUFRLEtBQUssU0FBUyxFQUFFO0FBQzFCLHlCQUFhLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7V0FDdEM7O09BQ0Y7S0FDRjs7QUFFRCxRQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDWCxTQUFHLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3JCOztBQUVELFdBQU8sR0FBRyxDQUFDO0dBQ1osQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiZWFjaC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGFwcGVuZENvbnRleHRQYXRoLFxuICBibG9ja1BhcmFtcyxcbiAgY3JlYXRlRnJhbWUsXG4gIGlzQXJyYXksXG4gIGlzRnVuY3Rpb25cbn0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuLi9leGNlcHRpb24nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihpbnN0YW5jZSkge1xuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignZWFjaCcsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ011c3QgcGFzcyBpdGVyYXRvciB0byAjZWFjaCcpO1xuICAgIH1cblxuICAgIGxldCBmbiA9IG9wdGlvbnMuZm4sXG4gICAgICBpbnZlcnNlID0gb3B0aW9ucy5pbnZlcnNlLFxuICAgICAgaSA9IDAsXG4gICAgICByZXQgPSAnJyxcbiAgICAgIGRhdGEsXG4gICAgICBjb250ZXh0UGF0aDtcblxuICAgIGlmIChvcHRpb25zLmRhdGEgJiYgb3B0aW9ucy5pZHMpIHtcbiAgICAgIGNvbnRleHRQYXRoID1cbiAgICAgICAgYXBwZW5kQ29udGV4dFBhdGgob3B0aW9ucy5kYXRhLmNvbnRleHRQYXRoLCBvcHRpb25zLmlkc1swXSkgKyAnLic7XG4gICAgfVxuXG4gICAgaWYgKGlzRnVuY3Rpb24oY29udGV4dCkpIHtcbiAgICAgIGNvbnRleHQgPSBjb250ZXh0LmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuZGF0YSkge1xuICAgICAgZGF0YSA9IGNyZWF0ZUZyYW1lKG9wdGlvbnMuZGF0YSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXhlY0l0ZXJhdGlvbihmaWVsZCwgaW5kZXgsIGxhc3QpIHtcbiAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgIGRhdGEua2V5ID0gZmllbGQ7XG4gICAgICAgIGRhdGEuaW5kZXggPSBpbmRleDtcbiAgICAgICAgZGF0YS5maXJzdCA9IGluZGV4ID09PSAwO1xuICAgICAgICBkYXRhLmxhc3QgPSAhIWxhc3Q7XG5cbiAgICAgICAgaWYgKGNvbnRleHRQYXRoKSB7XG4gICAgICAgICAgZGF0YS5jb250ZXh0UGF0aCA9IGNvbnRleHRQYXRoICsgZmllbGQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0ID1cbiAgICAgICAgcmV0ICtcbiAgICAgICAgZm4oY29udGV4dFtmaWVsZF0sIHtcbiAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgIGJsb2NrUGFyYW1zOiBibG9ja1BhcmFtcyhcbiAgICAgICAgICAgIFtjb250ZXh0W2ZpZWxkXSwgZmllbGRdLFxuICAgICAgICAgICAgW2NvbnRleHRQYXRoICsgZmllbGQsIG51bGxdXG4gICAgICAgICAgKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoY29udGV4dCAmJiB0eXBlb2YgY29udGV4dCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGlmIChpc0FycmF5KGNvbnRleHQpKSB7XG4gICAgICAgIGZvciAobGV0IGogPSBjb250ZXh0Lmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICAgIGlmIChpIGluIGNvbnRleHQpIHtcbiAgICAgICAgICAgIGV4ZWNJdGVyYXRpb24oaSwgaSwgaSA9PT0gY29udGV4dC5sZW5ndGggLSAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZ2xvYmFsLlN5bWJvbCAmJiBjb250ZXh0W2dsb2JhbC5TeW1ib2wuaXRlcmF0b3JdKSB7XG4gICAgICAgIGNvbnN0IG5ld0NvbnRleHQgPSBbXTtcbiAgICAgICAgY29uc3QgaXRlcmF0b3IgPSBjb250ZXh0W2dsb2JhbC5TeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgICAgIGZvciAobGV0IGl0ID0gaXRlcmF0b3IubmV4dCgpOyAhaXQuZG9uZTsgaXQgPSBpdGVyYXRvci5uZXh0KCkpIHtcbiAgICAgICAgICBuZXdDb250ZXh0LnB1c2goaXQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQgPSBuZXdDb250ZXh0O1xuICAgICAgICBmb3IgKGxldCBqID0gY29udGV4dC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICBleGVjSXRlcmF0aW9uKGksIGksIGkgPT09IGNvbnRleHQubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBwcmlvcktleTtcblxuICAgICAgICBPYmplY3Qua2V5cyhjb250ZXh0KS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgLy8gV2UncmUgcnVubmluZyB0aGUgaXRlcmF0aW9ucyBvbmUgc3RlcCBvdXQgb2Ygc3luYyBzbyB3ZSBjYW4gZGV0ZWN0XG4gICAgICAgICAgLy8gdGhlIGxhc3QgaXRlcmF0aW9uIHdpdGhvdXQgaGF2ZSB0byBzY2FuIHRoZSBvYmplY3QgdHdpY2UgYW5kIGNyZWF0ZVxuICAgICAgICAgIC8vIGFuIGl0ZXJtZWRpYXRlIGtleXMgYXJyYXkuXG4gICAgICAgICAgaWYgKHByaW9yS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV4ZWNJdGVyYXRpb24ocHJpb3JLZXksIGkgLSAxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcHJpb3JLZXkgPSBrZXk7XG4gICAgICAgICAgaSsrO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHByaW9yS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBleGVjSXRlcmF0aW9uKHByaW9yS2V5LCBpIC0gMSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgcmV0ID0gaW52ZXJzZSh0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xuICB9KTtcbn1cbiJdfQ==\n","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _exception = require('../exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('helperMissing', function () /* [args, ]options */{\n    if (arguments.length === 1) {\n      // A missing field in a {{foo}} construct.\n      return undefined;\n    } else {\n      // Someone is actually trying to call something, blow up.\n      throw new _exception2['default']('Missing helper: \"' + arguments[arguments.length - 1].name + '\"');\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvaGVscGVyLW1pc3NpbmcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozt5QkFBc0IsY0FBYzs7OztxQkFFckIsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxlQUFlLEVBQUUsaUNBQWdDO0FBQ3ZFLFFBQUksU0FBUyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7O0FBRTFCLGFBQU8sU0FBUyxDQUFDO0tBQ2xCLE1BQU07O0FBRUwsWUFBTSwyQkFDSixtQkFBbUIsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUNqRSxDQUFDO0tBQ0g7R0FDRixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJoZWxwZXItbWlzc2luZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi4vZXhjZXB0aW9uJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2hlbHBlck1pc3NpbmcnLCBmdW5jdGlvbigvKiBbYXJncywgXW9wdGlvbnMgKi8pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gQSBtaXNzaW5nIGZpZWxkIGluIGEge3tmb299fSBjb25zdHJ1Y3QuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTb21lb25lIGlzIGFjdHVhbGx5IHRyeWluZyB0byBjYWxsIHNvbWV0aGluZywgYmxvdyB1cC5cbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXG4gICAgICAgICdNaXNzaW5nIGhlbHBlcjogXCInICsgYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXS5uYW1lICsgJ1wiJ1xuICAgICAgKTtcbiAgICB9XG4gIH0pO1xufVxuIl19\n","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('../utils');\n\nvar _exception = require('../exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('if', function (conditional, options) {\n    if (arguments.length != 2) {\n      throw new _exception2['default']('#if requires exactly one argument');\n    }\n    if (_utils.isFunction(conditional)) {\n      conditional = conditional.call(this);\n    }\n\n    // Default behavior is to render the positive path if the value is truthy and not empty.\n    // The `includeZero` option may be set to treat the condtional as purely not empty based on the\n    // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.\n    if (!options.hash.includeZero && !conditional || _utils.isEmpty(conditional)) {\n      return options.inverse(this);\n    } else {\n      return options.fn(this);\n    }\n  });\n\n  instance.registerHelper('unless', function (conditional, options) {\n    if (arguments.length != 2) {\n      throw new _exception2['default']('#unless requires exactly one argument');\n    }\n    return instance.helpers['if'].call(this, conditional, {\n      fn: options.inverse,\n      inverse: options.fn,\n      hash: options.hash\n    });\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvaWYuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztxQkFBb0MsVUFBVTs7eUJBQ3hCLGNBQWM7Ozs7cUJBRXJCLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVMsV0FBVyxFQUFFLE9BQU8sRUFBRTtBQUMzRCxRQUFJLFNBQVMsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO0FBQ3pCLFlBQU0sMkJBQWMsbUNBQW1DLENBQUMsQ0FBQztLQUMxRDtBQUNELFFBQUksa0JBQVcsV0FBVyxDQUFDLEVBQUU7QUFDM0IsaUJBQVcsR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3RDOzs7OztBQUtELFFBQUksQUFBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxJQUFJLENBQUMsV0FBVyxJQUFLLGVBQVEsV0FBVyxDQUFDLEVBQUU7QUFDdkUsYUFBTyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzlCLE1BQU07QUFDTCxhQUFPLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDekI7R0FDRixDQUFDLENBQUM7O0FBRUgsVUFBUSxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsVUFBUyxXQUFXLEVBQUUsT0FBTyxFQUFFO0FBQy9ELFFBQUksU0FBUyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7QUFDekIsWUFBTSwyQkFBYyx1Q0FBdUMsQ0FBQyxDQUFDO0tBQzlEO0FBQ0QsV0FBTyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFO0FBQ3BELFFBQUUsRUFBRSxPQUFPLENBQUMsT0FBTztBQUNuQixhQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUU7QUFDbkIsVUFBSSxFQUFFLE9BQU8sQ0FBQyxJQUFJO0tBQ25CLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQztDQUNKIiwiZmlsZSI6ImlmLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNFbXB0eSwgaXNGdW5jdGlvbiB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi4vZXhjZXB0aW9uJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2lmJywgZnVuY3Rpb24oY29uZGl0aW9uYWwsIG9wdGlvbnMpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAhPSAyKSB7XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCcjaWYgcmVxdWlyZXMgZXhhY3RseSBvbmUgYXJndW1lbnQnKTtcbiAgICB9XG4gICAgaWYgKGlzRnVuY3Rpb24oY29uZGl0aW9uYWwpKSB7XG4gICAgICBjb25kaXRpb25hbCA9IGNvbmRpdGlvbmFsLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgLy8gRGVmYXVsdCBiZWhhdmlvciBpcyB0byByZW5kZXIgdGhlIHBvc2l0aXZlIHBhdGggaWYgdGhlIHZhbHVlIGlzIHRydXRoeSBhbmQgbm90IGVtcHR5LlxuICAgIC8vIFRoZSBgaW5jbHVkZVplcm9gIG9wdGlvbiBtYXkgYmUgc2V0IHRvIHRyZWF0IHRoZSBjb25kdGlvbmFsIGFzIHB1cmVseSBub3QgZW1wdHkgYmFzZWQgb24gdGhlXG4gICAgLy8gYmVoYXZpb3Igb2YgaXNFbXB0eS4gRWZmZWN0aXZlbHkgdGhpcyBkZXRlcm1pbmVzIGlmIDAgaXMgaGFuZGxlZCBieSB0aGUgcG9zaXRpdmUgcGF0aCBvciBuZWdhdGl2ZS5cbiAgICBpZiAoKCFvcHRpb25zLmhhc2guaW5jbHVkZVplcm8gJiYgIWNvbmRpdGlvbmFsKSB8fCBpc0VtcHR5KGNvbmRpdGlvbmFsKSkge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuZm4odGhpcyk7XG4gICAgfVxuICB9KTtcblxuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcigndW5sZXNzJywgZnVuY3Rpb24oY29uZGl0aW9uYWwsIG9wdGlvbnMpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAhPSAyKSB7XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCcjdW5sZXNzIHJlcXVpcmVzIGV4YWN0bHkgb25lIGFyZ3VtZW50Jyk7XG4gICAgfVxuICAgIHJldHVybiBpbnN0YW5jZS5oZWxwZXJzWydpZiddLmNhbGwodGhpcywgY29uZGl0aW9uYWwsIHtcbiAgICAgIGZuOiBvcHRpb25zLmludmVyc2UsXG4gICAgICBpbnZlcnNlOiBvcHRpb25zLmZuLFxuICAgICAgaGFzaDogb3B0aW9ucy5oYXNoXG4gICAgfSk7XG4gIH0pO1xufVxuIl19\n","'use strict';\n\nexports.__esModule = true;\n\nexports['default'] = function (instance) {\n  instance.registerHelper('log', function () /* message, options */{\n    var args = [undefined],\n        options = arguments[arguments.length - 1];\n    for (var i = 0; i < arguments.length - 1; i++) {\n      args.push(arguments[i]);\n    }\n\n    var level = 1;\n    if (options.hash.level != null) {\n      level = options.hash.level;\n    } else if (options.data && options.data.level != null) {\n      level = options.data.level;\n    }\n    args[0] = level;\n\n    instance.log.apply(instance, args);\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvbG9nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7cUJBQWUsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsa0NBQWlDO0FBQzlELFFBQUksSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDO1FBQ3BCLE9BQU8sR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM1QyxTQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDN0MsVUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUN6Qjs7QUFFRCxRQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7QUFDZCxRQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksRUFBRTtBQUM5QixXQUFLLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7S0FDNUIsTUFBTSxJQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxFQUFFO0FBQ3JELFdBQUssR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztLQUM1QjtBQUNELFFBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7O0FBRWhCLFlBQVEsQ0FBQyxHQUFHLE1BQUEsQ0FBWixRQUFRLEVBQVEsSUFBSSxDQUFDLENBQUM7R0FDdkIsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoibG9nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2xvZycsIGZ1bmN0aW9uKC8qIG1lc3NhZ2UsIG9wdGlvbnMgKi8pIHtcbiAgICBsZXQgYXJncyA9IFt1bmRlZmluZWRdLFxuICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgICB9XG5cbiAgICBsZXQgbGV2ZWwgPSAxO1xuICAgIGlmIChvcHRpb25zLmhhc2gubGV2ZWwgIT0gbnVsbCkge1xuICAgICAgbGV2ZWwgPSBvcHRpb25zLmhhc2gubGV2ZWw7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmRhdGEgJiYgb3B0aW9ucy5kYXRhLmxldmVsICE9IG51bGwpIHtcbiAgICAgIGxldmVsID0gb3B0aW9ucy5kYXRhLmxldmVsO1xuICAgIH1cbiAgICBhcmdzWzBdID0gbGV2ZWw7XG5cbiAgICBpbnN0YW5jZS5sb2coLi4uYXJncyk7XG4gIH0pO1xufVxuIl19\n","'use strict';\n\nexports.__esModule = true;\n\nexports['default'] = function (instance) {\n  instance.registerHelper('lookup', function (obj, field, options) {\n    if (!obj) {\n      // Note for 5.0: Change to \"obj == null\" in 5.0\n      return obj;\n    }\n    return options.lookupProperty(obj, field);\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvbG9va3VwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7cUJBQWUsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsVUFBUyxHQUFHLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRTtBQUM5RCxRQUFJLENBQUMsR0FBRyxFQUFFOztBQUVSLGFBQU8sR0FBRyxDQUFDO0tBQ1o7QUFDRCxXQUFPLE9BQU8sQ0FBQyxjQUFjLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO0dBQzNDLENBQUMsQ0FBQztDQUNKIiwiZmlsZSI6Imxvb2t1cC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdsb29rdXAnLCBmdW5jdGlvbihvYmosIGZpZWxkLCBvcHRpb25zKSB7XG4gICAgaWYgKCFvYmopIHtcbiAgICAgIC8vIE5vdGUgZm9yIDUuMDogQ2hhbmdlIHRvIFwib2JqID09IG51bGxcIiBpbiA1LjBcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIHJldHVybiBvcHRpb25zLmxvb2t1cFByb3BlcnR5KG9iaiwgZmllbGQpO1xuICB9KTtcbn1cbiJdfQ==\n","'use strict';\n\nexports.__esModule = true;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _utils = require('../utils');\n\nvar _exception = require('../exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nexports['default'] = function (instance) {\n  instance.registerHelper('with', function (context, options) {\n    if (arguments.length != 2) {\n      throw new _exception2['default']('#with requires exactly one argument');\n    }\n    if (_utils.isFunction(context)) {\n      context = context.call(this);\n    }\n\n    var fn = options.fn;\n\n    if (!_utils.isEmpty(context)) {\n      var data = options.data;\n      if (options.data && options.ids) {\n        data = _utils.createFrame(options.data);\n        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]);\n      }\n\n      return fn(context, {\n        data: data,\n        blockParams: _utils.blockParams([context], [data && data.contextPath])\n      });\n    } else {\n      return options.inverse(this);\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2hlbHBlcnMvd2l0aC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O3FCQU1PLFVBQVU7O3lCQUNLLGNBQWM7Ozs7cUJBRXJCLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLFVBQVMsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUN6RCxRQUFJLFNBQVMsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO0FBQ3pCLFlBQU0sMkJBQWMscUNBQXFDLENBQUMsQ0FBQztLQUM1RDtBQUNELFFBQUksa0JBQVcsT0FBTyxDQUFDLEVBQUU7QUFDdkIsYUFBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDOUI7O0FBRUQsUUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQzs7QUFFcEIsUUFBSSxDQUFDLGVBQVEsT0FBTyxDQUFDLEVBQUU7QUFDckIsVUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztBQUN4QixVQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUMvQixZQUFJLEdBQUcsbUJBQVksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pDLFlBQUksQ0FBQyxXQUFXLEdBQUcseUJBQ2pCLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUN4QixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUNmLENBQUM7T0FDSDs7QUFFRCxhQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUU7QUFDakIsWUFBSSxFQUFFLElBQUk7QUFDVixtQkFBVyxFQUFFLG1CQUFZLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO09BQ2hFLENBQUMsQ0FBQztLQUNKLE1BQU07QUFDTCxhQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDOUI7R0FDRixDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJ3aXRoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgYXBwZW5kQ29udGV4dFBhdGgsXG4gIGJsb2NrUGFyYW1zLFxuICBjcmVhdGVGcmFtZSxcbiAgaXNFbXB0eSxcbiAgaXNGdW5jdGlvblxufSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgRXhjZXB0aW9uIGZyb20gJy4uL2V4Y2VwdGlvbic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCd3aXRoJywgZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9IDIpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJyN3aXRoIHJlcXVpcmVzIGV4YWN0bHkgb25lIGFyZ3VtZW50Jyk7XG4gICAgfVxuICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQpKSB7XG4gICAgICBjb250ZXh0ID0gY29udGV4dC5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGxldCBmbiA9IG9wdGlvbnMuZm47XG5cbiAgICBpZiAoIWlzRW1wdHkoY29udGV4dCkpIHtcbiAgICAgIGxldCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgaWYgKG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmlkcykge1xuICAgICAgICBkYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICAgICAgZGF0YS5jb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKFxuICAgICAgICAgIG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCxcbiAgICAgICAgICBvcHRpb25zLmlkc1swXVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm4oY29udGV4dCwge1xuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICBibG9ja1BhcmFtczogYmxvY2tQYXJhbXMoW2NvbnRleHRdLCBbZGF0YSAmJiBkYXRhLmNvbnRleHRQYXRoXSlcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xuICAgIH1cbiAgfSk7XG59XG4iXX0=\n","'use strict';\n\nexports.__esModule = true;\nexports.createNewLookupObject = createNewLookupObject;\n\nvar _utils = require('../utils');\n\n/**\n * Create a new object with \"null\"-prototype to avoid truthy results on prototype properties.\n * The resulting object can be used with \"object[property]\" to check if a property exists\n * @param {...object} sources a varargs parameter of source objects that will be merged\n * @returns {object}\n */\n\nfunction createNewLookupObject() {\n  for (var _len = arguments.length, sources = Array(_len), _key = 0; _key < _len; _key++) {\n    sources[_key] = arguments[_key];\n  }\n\n  return _utils.extend.apply(undefined, [Object.create(null)].concat(sources));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2ludGVybmFsL2NyZWF0ZS1uZXctbG9va3VwLW9iamVjdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFBdUIsVUFBVTs7Ozs7Ozs7O0FBUTFCLFNBQVMscUJBQXFCLEdBQWE7b0NBQVQsT0FBTztBQUFQLFdBQU87OztBQUM5QyxTQUFPLGdDQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQUssT0FBTyxFQUFDLENBQUM7Q0FDaEQiLCJmaWxlIjoiY3JlYXRlLW5ldy1sb29rdXAtb2JqZWN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBvYmplY3Qgd2l0aCBcIm51bGxcIi1wcm90b3R5cGUgdG8gYXZvaWQgdHJ1dGh5IHJlc3VsdHMgb24gcHJvdG90eXBlIHByb3BlcnRpZXMuXG4gKiBUaGUgcmVzdWx0aW5nIG9iamVjdCBjYW4gYmUgdXNlZCB3aXRoIFwib2JqZWN0W3Byb3BlcnR5XVwiIHRvIGNoZWNrIGlmIGEgcHJvcGVydHkgZXhpc3RzXG4gKiBAcGFyYW0gey4uLm9iamVjdH0gc291cmNlcyBhIHZhcmFyZ3MgcGFyYW1ldGVyIG9mIHNvdXJjZSBvYmplY3RzIHRoYXQgd2lsbCBiZSBtZXJnZWRcbiAqIEByZXR1cm5zIHtvYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOZXdMb29rdXBPYmplY3QoLi4uc291cmNlcykge1xuICByZXR1cm4gZXh0ZW5kKE9iamVjdC5jcmVhdGUobnVsbCksIC4uLnNvdXJjZXMpO1xufVxuIl19\n","'use strict';\n\nexports.__esModule = true;\nexports.createProtoAccessControl = createProtoAccessControl;\nexports.resultIsAllowed = resultIsAllowed;\nexports.resetLoggedProperties = resetLoggedProperties;\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nvar _createNewLookupObject = require('./create-new-lookup-object');\n\nvar _logger = require('../logger');\n\nvar logger = _interopRequireWildcard(_logger);\n\nvar loggedProperties = Object.create(null);\n\nfunction createProtoAccessControl(runtimeOptions) {\n  var defaultMethodWhiteList = Object.create(null);\n  defaultMethodWhiteList['constructor'] = false;\n  defaultMethodWhiteList['__defineGetter__'] = false;\n  defaultMethodWhiteList['__defineSetter__'] = false;\n  defaultMethodWhiteList['__lookupGetter__'] = false;\n\n  var defaultPropertyWhiteList = Object.create(null);\n  // eslint-disable-next-line no-proto\n  defaultPropertyWhiteList['__proto__'] = false;\n\n  return {\n    properties: {\n      whitelist: _createNewLookupObject.createNewLookupObject(defaultPropertyWhiteList, runtimeOptions.allowedProtoProperties),\n      defaultValue: runtimeOptions.allowProtoPropertiesByDefault\n    },\n    methods: {\n      whitelist: _createNewLookupObject.createNewLookupObject(defaultMethodWhiteList, runtimeOptions.allowedProtoMethods),\n      defaultValue: runtimeOptions.allowProtoMethodsByDefault\n    }\n  };\n}\n\nfunction resultIsAllowed(result, protoAccessControl, propertyName) {\n  if (typeof result === 'function') {\n    return checkWhiteList(protoAccessControl.methods, propertyName);\n  } else {\n    return checkWhiteList(protoAccessControl.properties, propertyName);\n  }\n}\n\nfunction checkWhiteList(protoAccessControlForType, propertyName) {\n  if (protoAccessControlForType.whitelist[propertyName] !== undefined) {\n    return protoAccessControlForType.whitelist[propertyName] === true;\n  }\n  if (protoAccessControlForType.defaultValue !== undefined) {\n    return protoAccessControlForType.defaultValue;\n  }\n  logUnexpecedPropertyAccessOnce(propertyName);\n  return false;\n}\n\nfunction logUnexpecedPropertyAccessOnce(propertyName) {\n  if (loggedProperties[propertyName] !== true) {\n    loggedProperties[propertyName] = true;\n    logger.log('error', 'Handlebars: Access has been denied to resolve the property \"' + propertyName + '\" because it is not an \"own property\" of its parent.\\n' + 'You can add a runtime option to disable the check or this warning:\\n' + 'See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details');\n  }\n}\n\nfunction resetLoggedProperties() {\n  Object.keys(loggedProperties).forEach(function (propertyName) {\n    delete loggedProperties[propertyName];\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2ludGVybmFsL3Byb3RvLWFjY2Vzcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O3FDQUFzQyw0QkFBNEI7O3NCQUMxQyxXQUFXOztJQUF2QixNQUFNOztBQUVsQixJQUFNLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRXRDLFNBQVMsd0JBQXdCLENBQUMsY0FBYyxFQUFFO0FBQ3ZELE1BQUksc0JBQXNCLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNqRCx3QkFBc0IsQ0FBQyxhQUFhLENBQUMsR0FBRyxLQUFLLENBQUM7QUFDOUMsd0JBQXNCLENBQUMsa0JBQWtCLENBQUMsR0FBRyxLQUFLLENBQUM7QUFDbkQsd0JBQXNCLENBQUMsa0JBQWtCLENBQUMsR0FBRyxLQUFLLENBQUM7QUFDbkQsd0JBQXNCLENBQUMsa0JBQWtCLENBQUMsR0FBRyxLQUFLLENBQUM7O0FBRW5ELE1BQUksd0JBQXdCLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFbkQsMEJBQXdCLENBQUMsV0FBVyxDQUFDLEdBQUcsS0FBSyxDQUFDOztBQUU5QyxTQUFPO0FBQ0wsY0FBVSxFQUFFO0FBQ1YsZUFBUyxFQUFFLDZDQUNULHdCQUF3QixFQUN4QixjQUFjLENBQUMsc0JBQXNCLENBQ3RDO0FBQ0Qsa0JBQVksRUFBRSxjQUFjLENBQUMsNkJBQTZCO0tBQzNEO0FBQ0QsV0FBTyxFQUFFO0FBQ1AsZUFBUyxFQUFFLDZDQUNULHNCQUFzQixFQUN0QixjQUFjLENBQUMsbUJBQW1CLENBQ25DO0FBQ0Qsa0JBQVksRUFBRSxjQUFjLENBQUMsMEJBQTBCO0tBQ3hEO0dBQ0YsQ0FBQztDQUNIOztBQUVNLFNBQVMsZUFBZSxDQUFDLE1BQU0sRUFBRSxrQkFBa0IsRUFBRSxZQUFZLEVBQUU7QUFDeEUsTUFBSSxPQUFPLE1BQU0sS0FBSyxVQUFVLEVBQUU7QUFDaEMsV0FBTyxjQUFjLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUFDO0dBQ2pFLE1BQU07QUFDTCxXQUFPLGNBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLEVBQUUsWUFBWSxDQUFDLENBQUM7R0FDcEU7Q0FDRjs7QUFFRCxTQUFTLGNBQWMsQ0FBQyx5QkFBeUIsRUFBRSxZQUFZLEVBQUU7QUFDL0QsTUFBSSx5QkFBeUIsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLEtBQUssU0FBUyxFQUFFO0FBQ25FLFdBQU8seUJBQXlCLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxLQUFLLElBQUksQ0FBQztHQUNuRTtBQUNELE1BQUkseUJBQXlCLENBQUMsWUFBWSxLQUFLLFNBQVMsRUFBRTtBQUN4RCxXQUFPLHlCQUF5QixDQUFDLFlBQVksQ0FBQztHQUMvQztBQUNELGdDQUE4QixDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQzdDLFNBQU8sS0FBSyxDQUFDO0NBQ2Q7O0FBRUQsU0FBUyw4QkFBOEIsQ0FBQyxZQUFZLEVBQUU7QUFDcEQsTUFBSSxnQkFBZ0IsQ0FBQyxZQUFZLENBQUMsS0FBSyxJQUFJLEVBQUU7QUFDM0Msb0JBQWdCLENBQUMsWUFBWSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQ3RDLFVBQU0sQ0FBQyxHQUFHLENBQ1IsT0FBTyxFQUNQLGlFQUErRCxZQUFZLG9JQUNILG9IQUMyQyxDQUNwSCxDQUFDO0dBQ0g7Q0FDRjs7QUFFTSxTQUFTLHFCQUFxQixHQUFHO0FBQ3RDLFFBQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQSxZQUFZLEVBQUk7QUFDcEQsV0FBTyxnQkFBZ0IsQ0FBQyxZQUFZLENBQUMsQ0FBQztHQUN2QyxDQUFDLENBQUM7Q0FDSiIsImZpbGUiOiJwcm90by1hY2Nlc3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVOZXdMb29rdXBPYmplY3QgfSBmcm9tICcuL2NyZWF0ZS1uZXctbG9va3VwLW9iamVjdCc7XG5pbXBvcnQgKiBhcyBsb2dnZXIgZnJvbSAnLi4vbG9nZ2VyJztcblxuY29uc3QgbG9nZ2VkUHJvcGVydGllcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm90b0FjY2Vzc0NvbnRyb2wocnVudGltZU9wdGlvbnMpIHtcbiAgbGV0IGRlZmF1bHRNZXRob2RXaGl0ZUxpc3QgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBkZWZhdWx0TWV0aG9kV2hpdGVMaXN0Wydjb25zdHJ1Y3RvciddID0gZmFsc2U7XG4gIGRlZmF1bHRNZXRob2RXaGl0ZUxpc3RbJ19fZGVmaW5lR2V0dGVyX18nXSA9IGZhbHNlO1xuICBkZWZhdWx0TWV0aG9kV2hpdGVMaXN0WydfX2RlZmluZVNldHRlcl9fJ10gPSBmYWxzZTtcbiAgZGVmYXVsdE1ldGhvZFdoaXRlTGlzdFsnX19sb29rdXBHZXR0ZXJfXyddID0gZmFsc2U7XG5cbiAgbGV0IGRlZmF1bHRQcm9wZXJ0eVdoaXRlTGlzdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b1xuICBkZWZhdWx0UHJvcGVydHlXaGl0ZUxpc3RbJ19fcHJvdG9fXyddID0gZmFsc2U7XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICB3aGl0ZWxpc3Q6IGNyZWF0ZU5ld0xvb2t1cE9iamVjdChcbiAgICAgICAgZGVmYXVsdFByb3BlcnR5V2hpdGVMaXN0LFxuICAgICAgICBydW50aW1lT3B0aW9ucy5hbGxvd2VkUHJvdG9Qcm9wZXJ0aWVzXG4gICAgICApLFxuICAgICAgZGVmYXVsdFZhbHVlOiBydW50aW1lT3B0aW9ucy5hbGxvd1Byb3RvUHJvcGVydGllc0J5RGVmYXVsdFxuICAgIH0sXG4gICAgbWV0aG9kczoge1xuICAgICAgd2hpdGVsaXN0OiBjcmVhdGVOZXdMb29rdXBPYmplY3QoXG4gICAgICAgIGRlZmF1bHRNZXRob2RXaGl0ZUxpc3QsXG4gICAgICAgIHJ1bnRpbWVPcHRpb25zLmFsbG93ZWRQcm90b01ldGhvZHNcbiAgICAgICksXG4gICAgICBkZWZhdWx0VmFsdWU6IHJ1bnRpbWVPcHRpb25zLmFsbG93UHJvdG9NZXRob2RzQnlEZWZhdWx0XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzdWx0SXNBbGxvd2VkKHJlc3VsdCwgcHJvdG9BY2Nlc3NDb250cm9sLCBwcm9wZXJ0eU5hbWUpIHtcbiAgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gY2hlY2tXaGl0ZUxpc3QocHJvdG9BY2Nlc3NDb250cm9sLm1ldGhvZHMsIHByb3BlcnR5TmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNoZWNrV2hpdGVMaXN0KHByb3RvQWNjZXNzQ29udHJvbC5wcm9wZXJ0aWVzLCBwcm9wZXJ0eU5hbWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrV2hpdGVMaXN0KHByb3RvQWNjZXNzQ29udHJvbEZvclR5cGUsIHByb3BlcnR5TmFtZSkge1xuICBpZiAocHJvdG9BY2Nlc3NDb250cm9sRm9yVHlwZS53aGl0ZWxpc3RbcHJvcGVydHlOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHByb3RvQWNjZXNzQ29udHJvbEZvclR5cGUud2hpdGVsaXN0W3Byb3BlcnR5TmFtZV0gPT09IHRydWU7XG4gIH1cbiAgaWYgKHByb3RvQWNjZXNzQ29udHJvbEZvclR5cGUuZGVmYXVsdFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gcHJvdG9BY2Nlc3NDb250cm9sRm9yVHlwZS5kZWZhdWx0VmFsdWU7XG4gIH1cbiAgbG9nVW5leHBlY2VkUHJvcGVydHlBY2Nlc3NPbmNlKHByb3BlcnR5TmFtZSk7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gbG9nVW5leHBlY2VkUHJvcGVydHlBY2Nlc3NPbmNlKHByb3BlcnR5TmFtZSkge1xuICBpZiAobG9nZ2VkUHJvcGVydGllc1twcm9wZXJ0eU5hbWVdICE9PSB0cnVlKSB7XG4gICAgbG9nZ2VkUHJvcGVydGllc1twcm9wZXJ0eU5hbWVdID0gdHJ1ZTtcbiAgICBsb2dnZXIubG9nKFxuICAgICAgJ2Vycm9yJyxcbiAgICAgIGBIYW5kbGViYXJzOiBBY2Nlc3MgaGFzIGJlZW4gZGVuaWVkIHRvIHJlc29sdmUgdGhlIHByb3BlcnR5IFwiJHtwcm9wZXJ0eU5hbWV9XCIgYmVjYXVzZSBpdCBpcyBub3QgYW4gXCJvd24gcHJvcGVydHlcIiBvZiBpdHMgcGFyZW50LlxcbmAgK1xuICAgICAgICBgWW91IGNhbiBhZGQgYSBydW50aW1lIG9wdGlvbiB0byBkaXNhYmxlIHRoZSBjaGVjayBvciB0aGlzIHdhcm5pbmc6XFxuYCArXG4gICAgICAgIGBTZWUgaHR0cHM6Ly9oYW5kbGViYXJzanMuY29tL2FwaS1yZWZlcmVuY2UvcnVudGltZS1vcHRpb25zLmh0bWwjb3B0aW9ucy10by1jb250cm9sLXByb3RvdHlwZS1hY2Nlc3MgZm9yIGRldGFpbHNgXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRMb2dnZWRQcm9wZXJ0aWVzKCkge1xuICBPYmplY3Qua2V5cyhsb2dnZWRQcm9wZXJ0aWVzKS5mb3JFYWNoKHByb3BlcnR5TmFtZSA9PiB7XG4gICAgZGVsZXRlIGxvZ2dlZFByb3BlcnRpZXNbcHJvcGVydHlOYW1lXTtcbiAgfSk7XG59XG4iXX0=\n","'use strict';\n\nexports.__esModule = true;\nexports.wrapHelper = wrapHelper;\n\nfunction wrapHelper(helper, transformOptionsFn) {\n  if (typeof helper !== 'function') {\n    // This should not happen, but apparently it does in https://github.com/wycats/handlebars.js/issues/1639\n    // We try to make the wrapper least-invasive by not wrapping it, if the helper is not a function.\n    return helper;\n  }\n  var wrapper = function wrapper() /* dynamic arguments */{\n    var options = arguments[arguments.length - 1];\n    arguments[arguments.length - 1] = transformOptionsFn(options);\n    return helper.apply(this, arguments);\n  };\n  return wrapper;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2ludGVybmFsL3dyYXBIZWxwZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTyxTQUFTLFVBQVUsQ0FBQyxNQUFNLEVBQUUsa0JBQWtCLEVBQUU7QUFDckQsTUFBSSxPQUFPLE1BQU0sS0FBSyxVQUFVLEVBQUU7OztBQUdoQyxXQUFPLE1BQU0sQ0FBQztHQUNmO0FBQ0QsTUFBSSxPQUFPLEdBQUcsU0FBVixPQUFPLDBCQUFxQztBQUM5QyxRQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNoRCxhQUFTLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUM5RCxXQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0dBQ3RDLENBQUM7QUFDRixTQUFPLE9BQU8sQ0FBQztDQUNoQiIsImZpbGUiOiJ3cmFwSGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHdyYXBIZWxwZXIoaGVscGVyLCB0cmFuc2Zvcm1PcHRpb25zRm4pIHtcbiAgaWYgKHR5cGVvZiBoZWxwZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBUaGlzIHNob3VsZCBub3QgaGFwcGVuLCBidXQgYXBwYXJlbnRseSBpdCBkb2VzIGluIGh0dHBzOi8vZ2l0aHViLmNvbS93eWNhdHMvaGFuZGxlYmFycy5qcy9pc3N1ZXMvMTYzOVxuICAgIC8vIFdlIHRyeSB0byBtYWtlIHRoZSB3cmFwcGVyIGxlYXN0LWludmFzaXZlIGJ5IG5vdCB3cmFwcGluZyBpdCwgaWYgdGhlIGhlbHBlciBpcyBub3QgYSBmdW5jdGlvbi5cbiAgICByZXR1cm4gaGVscGVyO1xuICB9XG4gIGxldCB3cmFwcGVyID0gZnVuY3Rpb24oLyogZHluYW1pYyBhcmd1bWVudHMgKi8pIHtcbiAgICBjb25zdCBvcHRpb25zID0gYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXTtcbiAgICBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdID0gdHJhbnNmb3JtT3B0aW9uc0ZuKG9wdGlvbnMpO1xuICAgIHJldHVybiBoZWxwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbiAgcmV0dXJuIHdyYXBwZXI7XG59XG4iXX0=\n","'use strict';\n\nexports.__esModule = true;\n\nvar _utils = require('./utils');\n\nvar logger = {\n  methodMap: ['debug', 'info', 'warn', 'error'],\n  level: 'info',\n\n  // Maps a given level value to the `methodMap` indexes above.\n  lookupLevel: function lookupLevel(level) {\n    if (typeof level === 'string') {\n      var levelMap = _utils.indexOf(logger.methodMap, level.toLowerCase());\n      if (levelMap >= 0) {\n        level = levelMap;\n      } else {\n        level = parseInt(level, 10);\n      }\n    }\n\n    return level;\n  },\n\n  // Can be overridden in the host environment\n  log: function log(level) {\n    level = logger.lookupLevel(level);\n\n    if (typeof console !== 'undefined' && logger.lookupLevel(logger.level) <= level) {\n      var method = logger.methodMap[level];\n      // eslint-disable-next-line no-console\n      if (!console[method]) {\n        method = 'log';\n      }\n\n      for (var _len = arguments.length, message = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        message[_key - 1] = arguments[_key];\n      }\n\n      console[method].apply(console, message); // eslint-disable-line no-console\n    }\n  }\n};\n\nexports['default'] = logger;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL2xvZ2dlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O3FCQUF3QixTQUFTOztBQUVqQyxJQUFJLE1BQU0sR0FBRztBQUNYLFdBQVMsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQztBQUM3QyxPQUFLLEVBQUUsTUFBTTs7O0FBR2IsYUFBVyxFQUFFLHFCQUFTLEtBQUssRUFBRTtBQUMzQixRQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRTtBQUM3QixVQUFJLFFBQVEsR0FBRyxlQUFRLE1BQU0sQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7QUFDOUQsVUFBSSxRQUFRLElBQUksQ0FBQyxFQUFFO0FBQ2pCLGFBQUssR0FBRyxRQUFRLENBQUM7T0FDbEIsTUFBTTtBQUNMLGFBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO09BQzdCO0tBQ0Y7O0FBRUQsV0FBTyxLQUFLLENBQUM7R0FDZDs7O0FBR0QsS0FBRyxFQUFFLGFBQVMsS0FBSyxFQUFjO0FBQy9CLFNBQUssR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUVsQyxRQUNFLE9BQU8sT0FBTyxLQUFLLFdBQVcsSUFDOUIsTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxFQUN6QztBQUNBLFVBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7O0FBRXJDLFVBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUU7QUFDcEIsY0FBTSxHQUFHLEtBQUssQ0FBQztPQUNoQjs7d0NBWG1CLE9BQU87QUFBUCxlQUFPOzs7QUFZM0IsYUFBTyxDQUFDLE1BQU0sT0FBQyxDQUFmLE9BQU8sRUFBWSxPQUFPLENBQUMsQ0FBQztLQUM3QjtHQUNGO0NBQ0YsQ0FBQzs7cUJBRWEsTUFBTSIsImZpbGUiOiJsb2dnZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbmRleE9mIH0gZnJvbSAnLi91dGlscyc7XG5cbmxldCBsb2dnZXIgPSB7XG4gIG1ldGhvZE1hcDogWydkZWJ1ZycsICdpbmZvJywgJ3dhcm4nLCAnZXJyb3InXSxcbiAgbGV2ZWw6ICdpbmZvJyxcblxuICAvLyBNYXBzIGEgZ2l2ZW4gbGV2ZWwgdmFsdWUgdG8gdGhlIGBtZXRob2RNYXBgIGluZGV4ZXMgYWJvdmUuXG4gIGxvb2t1cExldmVsOiBmdW5jdGlvbihsZXZlbCkge1xuICAgIGlmICh0eXBlb2YgbGV2ZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICBsZXQgbGV2ZWxNYXAgPSBpbmRleE9mKGxvZ2dlci5tZXRob2RNYXAsIGxldmVsLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgaWYgKGxldmVsTWFwID49IDApIHtcbiAgICAgICAgbGV2ZWwgPSBsZXZlbE1hcDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldmVsID0gcGFyc2VJbnQobGV2ZWwsIDEwKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGV2ZWw7XG4gIH0sXG5cbiAgLy8gQ2FuIGJlIG92ZXJyaWRkZW4gaW4gdGhlIGhvc3QgZW52aXJvbm1lbnRcbiAgbG9nOiBmdW5jdGlvbihsZXZlbCwgLi4ubWVzc2FnZSkge1xuICAgIGxldmVsID0gbG9nZ2VyLmxvb2t1cExldmVsKGxldmVsKTtcblxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgbG9nZ2VyLmxvb2t1cExldmVsKGxvZ2dlci5sZXZlbCkgPD0gbGV2ZWxcbiAgICApIHtcbiAgICAgIGxldCBtZXRob2QgPSBsb2dnZXIubWV0aG9kTWFwW2xldmVsXTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBpZiAoIWNvbnNvbGVbbWV0aG9kXSkge1xuICAgICAgICBtZXRob2QgPSAnbG9nJztcbiAgICAgIH1cbiAgICAgIGNvbnNvbGVbbWV0aG9kXSguLi5tZXNzYWdlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XG4iXX0=\n","'use strict';\n\nexports.__esModule = true;\n\nexports['default'] = function (Handlebars) {\n  /* istanbul ignore next */\n  var root = typeof global !== 'undefined' ? global : window,\n      $Handlebars = root.Handlebars;\n  /* istanbul ignore next */\n  Handlebars.noConflict = function () {\n    if (root.Handlebars === Handlebars) {\n      root.Handlebars = $Handlebars;\n    }\n    return Handlebars;\n  };\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL25vLWNvbmZsaWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7cUJBQWUsVUFBUyxVQUFVLEVBQUU7O0FBRWxDLE1BQUksSUFBSSxHQUFHLE9BQU8sTUFBTSxLQUFLLFdBQVcsR0FBRyxNQUFNLEdBQUcsTUFBTTtNQUN4RCxXQUFXLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQzs7QUFFaEMsWUFBVSxDQUFDLFVBQVUsR0FBRyxZQUFXO0FBQ2pDLFFBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxVQUFVLEVBQUU7QUFDbEMsVUFBSSxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUM7S0FDL0I7QUFDRCxXQUFPLFVBQVUsQ0FBQztHQUNuQixDQUFDO0NBQ0giLCJmaWxlIjoibm8tY29uZmxpY3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihIYW5kbGViYXJzKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGxldCByb290ID0gdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB3aW5kb3csXG4gICAgJEhhbmRsZWJhcnMgPSByb290LkhhbmRsZWJhcnM7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIEhhbmRsZWJhcnMubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChyb290LkhhbmRsZWJhcnMgPT09IEhhbmRsZWJhcnMpIHtcbiAgICAgIHJvb3QuSGFuZGxlYmFycyA9ICRIYW5kbGViYXJzO1xuICAgIH1cbiAgICByZXR1cm4gSGFuZGxlYmFycztcbiAgfTtcbn1cbiJdfQ==\n","'use strict';\n\nexports.__esModule = true;\nexports.checkRevision = checkRevision;\nexports.template = template;\nexports.wrapProgram = wrapProgram;\nexports.resolvePartial = resolvePartial;\nexports.invokePartial = invokePartial;\nexports.noop = noop;\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n// istanbul ignore next\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nvar _utils = require('./utils');\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _exception = require('./exception');\n\nvar _exception2 = _interopRequireDefault(_exception);\n\nvar _base = require('./base');\n\nvar _helpers = require('./helpers');\n\nvar _internalWrapHelper = require('./internal/wrapHelper');\n\nvar _internalProtoAccess = require('./internal/proto-access');\n\nfunction checkRevision(compilerInfo) {\n  var compilerRevision = compilerInfo && compilerInfo[0] || 1,\n      currentRevision = _base.COMPILER_REVISION;\n\n  if (compilerRevision >= _base.LAST_COMPATIBLE_COMPILER_REVISION && compilerRevision <= _base.COMPILER_REVISION) {\n    return;\n  }\n\n  if (compilerRevision < _base.LAST_COMPATIBLE_COMPILER_REVISION) {\n    var runtimeVersions = _base.REVISION_CHANGES[currentRevision],\n        compilerVersions = _base.REVISION_CHANGES[compilerRevision];\n    throw new _exception2['default']('Template was precompiled with an older version of Handlebars than the current runtime. ' + 'Please update your precompiler to a newer version (' + runtimeVersions + ') or downgrade your runtime to an older version (' + compilerVersions + ').');\n  } else {\n    // Use the embedded version info since the runtime doesn't know about this revision yet\n    throw new _exception2['default']('Template was precompiled with a newer version of Handlebars than the current runtime. ' + 'Please update your runtime to a newer version (' + compilerInfo[1] + ').');\n  }\n}\n\nfunction template(templateSpec, env) {\n  /* istanbul ignore next */\n  if (!env) {\n    throw new _exception2['default']('No environment passed to template');\n  }\n  if (!templateSpec || !templateSpec.main) {\n    throw new _exception2['default']('Unknown template object: ' + typeof templateSpec);\n  }\n\n  templateSpec.main.decorator = templateSpec.main_d;\n\n  // Note: Using env.VM references rather than local var references throughout this section to allow\n  // for external users to override these as pseudo-supported APIs.\n  env.VM.checkRevision(templateSpec.compiler);\n\n  // backwards compatibility for precompiled templates with compiler-version 7 (<4.3.0)\n  var templateWasPrecompiledWithCompilerV7 = templateSpec.compiler && templateSpec.compiler[0] === 7;\n\n  function invokePartialWrapper(partial, context, options) {\n    if (options.hash) {\n      context = Utils.extend({}, context, options.hash);\n      if (options.ids) {\n        options.ids[0] = true;\n      }\n    }\n    partial = env.VM.resolvePartial.call(this, partial, context, options);\n\n    var extendedOptions = Utils.extend({}, options, {\n      hooks: this.hooks,\n      protoAccessControl: this.protoAccessControl\n    });\n\n    var result = env.VM.invokePartial.call(this, partial, context, extendedOptions);\n\n    if (result == null && env.compile) {\n      options.partials[options.name] = env.compile(partial, templateSpec.compilerOptions, env);\n      result = options.partials[options.name](context, extendedOptions);\n    }\n    if (result != null) {\n      if (options.indent) {\n        var lines = result.split('\\n');\n        for (var i = 0, l = lines.length; i < l; i++) {\n          if (!lines[i] && i + 1 === l) {\n            break;\n          }\n\n          lines[i] = options.indent + lines[i];\n        }\n        result = lines.join('\\n');\n      }\n      return result;\n    } else {\n      throw new _exception2['default']('The partial ' + options.name + ' could not be compiled when running in runtime-only mode');\n    }\n  }\n\n  // Just add water\n  var container = {\n    strict: function strict(obj, name, loc) {\n      if (!obj || !(name in obj)) {\n        throw new _exception2['default']('\"' + name + '\" not defined in ' + obj, {\n          loc: loc\n        });\n      }\n      return container.lookupProperty(obj, name);\n    },\n    lookupProperty: function lookupProperty(parent, propertyName) {\n      var result = parent[propertyName];\n      if (result == null) {\n        return result;\n      }\n      if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n        return result;\n      }\n\n      if (_internalProtoAccess.resultIsAllowed(result, container.protoAccessControl, propertyName)) {\n        return result;\n      }\n      return undefined;\n    },\n    lookup: function lookup(depths, name) {\n      var len = depths.length;\n      for (var i = 0; i < len; i++) {\n        var result = depths[i] && container.lookupProperty(depths[i], name);\n        if (result != null) {\n          return depths[i][name];\n        }\n      }\n    },\n    lambda: function lambda(current, context) {\n      return typeof current === 'function' ? current.call(context) : current;\n    },\n\n    escapeExpression: Utils.escapeExpression,\n    invokePartial: invokePartialWrapper,\n\n    fn: function fn(i) {\n      var ret = templateSpec[i];\n      ret.decorator = templateSpec[i + '_d'];\n      return ret;\n    },\n\n    programs: [],\n    program: function program(i, data, declaredBlockParams, blockParams, depths) {\n      var programWrapper = this.programs[i],\n          fn = this.fn(i);\n      if (data || depths || blockParams || declaredBlockParams) {\n        programWrapper = wrapProgram(this, i, fn, data, declaredBlockParams, blockParams, depths);\n      } else if (!programWrapper) {\n        programWrapper = this.programs[i] = wrapProgram(this, i, fn);\n      }\n      return programWrapper;\n    },\n\n    data: function data(value, depth) {\n      while (value && depth--) {\n        value = value._parent;\n      }\n      return value;\n    },\n    mergeIfNeeded: function mergeIfNeeded(param, common) {\n      var obj = param || common;\n\n      if (param && common && param !== common) {\n        obj = Utils.extend({}, common, param);\n      }\n\n      return obj;\n    },\n    // An empty object to use as replacement for null-contexts\n    nullContext: Object.seal({}),\n\n    noop: env.VM.noop,\n    compilerInfo: templateSpec.compiler\n  };\n\n  function ret(context) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    var data = options.data;\n\n    ret._setup(options);\n    if (!options.partial && templateSpec.useData) {\n      data = initData(context, data);\n    }\n    var depths = undefined,\n        blockParams = templateSpec.useBlockParams ? [] : undefined;\n    if (templateSpec.useDepths) {\n      if (options.depths) {\n        depths = context != options.depths[0] ? [context].concat(options.depths) : options.depths;\n      } else {\n        depths = [context];\n      }\n    }\n\n    function main(context /*, options*/) {\n      return '' + templateSpec.main(container, context, container.helpers, container.partials, data, blockParams, depths);\n    }\n\n    main = executeDecorators(templateSpec.main, main, container, options.depths || [], data, blockParams);\n    return main(context, options);\n  }\n\n  ret.isTop = true;\n\n  ret._setup = function (options) {\n    if (!options.partial) {\n      var mergedHelpers = Utils.extend({}, env.helpers, options.helpers);\n      wrapHelpersToPassLookupProperty(mergedHelpers, container);\n      container.helpers = mergedHelpers;\n\n      if (templateSpec.usePartial) {\n        // Use mergeIfNeeded here to prevent compiling global partials multiple times\n        container.partials = container.mergeIfNeeded(options.partials, env.partials);\n      }\n      if (templateSpec.usePartial || templateSpec.useDecorators) {\n        container.decorators = Utils.extend({}, env.decorators, options.decorators);\n      }\n\n      container.hooks = {};\n      container.protoAccessControl = _internalProtoAccess.createProtoAccessControl(options);\n\n      var keepHelperInHelpers = options.allowCallsToHelperMissing || templateWasPrecompiledWithCompilerV7;\n      _helpers.moveHelperToHooks(container, 'helperMissing', keepHelperInHelpers);\n      _helpers.moveHelperToHooks(container, 'blockHelperMissing', keepHelperInHelpers);\n    } else {\n      container.protoAccessControl = options.protoAccessControl; // internal option\n      container.helpers = options.helpers;\n      container.partials = options.partials;\n      container.decorators = options.decorators;\n      container.hooks = options.hooks;\n    }\n  };\n\n  ret._child = function (i, data, blockParams, depths) {\n    if (templateSpec.useBlockParams && !blockParams) {\n      throw new _exception2['default']('must pass block params');\n    }\n    if (templateSpec.useDepths && !depths) {\n      throw new _exception2['default']('must pass parent depths');\n    }\n\n    return wrapProgram(container, i, templateSpec[i], data, 0, blockParams, depths);\n  };\n  return ret;\n}\n\nfunction wrapProgram(container, i, fn, data, declaredBlockParams, blockParams, depths) {\n  function prog(context) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    var currentDepths = depths;\n    if (depths && context != depths[0] && !(context === container.nullContext && depths[0] === null)) {\n      currentDepths = [context].concat(depths);\n    }\n\n    return fn(container, context, container.helpers, container.partials, options.data || data, blockParams && [options.blockParams].concat(blockParams), currentDepths);\n  }\n\n  prog = executeDecorators(fn, prog, container, depths, data, blockParams);\n\n  prog.program = i;\n  prog.depth = depths ? depths.length : 0;\n  prog.blockParams = declaredBlockParams || 0;\n  return prog;\n}\n\n/**\n * This is currently part of the official API, therefore implementation details should not be changed.\n */\n\nfunction resolvePartial(partial, context, options) {\n  if (!partial) {\n    if (options.name === '@partial-block') {\n      partial = options.data['partial-block'];\n    } else {\n      partial = options.partials[options.name];\n    }\n  } else if (!partial.call && !options.name) {\n    // This is a dynamic partial that returned a string\n    options.name = partial;\n    partial = options.partials[partial];\n  }\n  return partial;\n}\n\nfunction invokePartial(partial, context, options) {\n  // Use the current closure context to save the partial-block if this partial\n  var currentPartialBlock = options.data && options.data['partial-block'];\n  options.partial = true;\n  if (options.ids) {\n    options.data.contextPath = options.ids[0] || options.data.contextPath;\n  }\n\n  var partialBlock = undefined;\n  if (options.fn && options.fn !== noop) {\n    (function () {\n      options.data = _base.createFrame(options.data);\n      // Wrapper function to get access to currentPartialBlock from the closure\n      var fn = options.fn;\n      partialBlock = options.data['partial-block'] = function partialBlockWrapper(context) {\n        var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n        // Restore the partial-block from the closure for the execution of the block\n        // i.e. the part inside the block of the partial call.\n        options.data = _base.createFrame(options.data);\n        options.data['partial-block'] = currentPartialBlock;\n        return fn(context, options);\n      };\n      if (fn.partials) {\n        options.partials = Utils.extend({}, options.partials, fn.partials);\n      }\n    })();\n  }\n\n  if (partial === undefined && partialBlock) {\n    partial = partialBlock;\n  }\n\n  if (partial === undefined) {\n    throw new _exception2['default']('The partial ' + options.name + ' could not be found');\n  } else if (partial instanceof Function) {\n    return partial(context, options);\n  }\n}\n\nfunction noop() {\n  return '';\n}\n\nfunction initData(context, data) {\n  if (!data || !('root' in data)) {\n    data = data ? _base.createFrame(data) : {};\n    data.root = context;\n  }\n  return data;\n}\n\nfunction executeDecorators(fn, prog, container, depths, data, blockParams) {\n  if (fn.decorator) {\n    var props = {};\n    prog = fn.decorator(prog, props, container, depths && depths[0], data, blockParams, depths);\n    Utils.extend(prog, props);\n  }\n  return prog;\n}\n\nfunction wrapHelpersToPassLookupProperty(mergedHelpers, container) {\n  Object.keys(mergedHelpers).forEach(function (helperName) {\n    var helper = mergedHelpers[helperName];\n    mergedHelpers[helperName] = passLookupPropertyOption(helper, container);\n  });\n}\n\nfunction passLookupPropertyOption(helper, container) {\n  var lookupProperty = container.lookupProperty;\n  return _internalWrapHelper.wrapHelper(helper, function (options) {\n    return Utils.extend({ lookupProperty: lookupProperty }, options);\n  });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL3J1bnRpbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7cUJBQXVCLFNBQVM7O0lBQXBCLEtBQUs7O3lCQUNLLGFBQWE7Ozs7b0JBTTVCLFFBQVE7O3VCQUNtQixXQUFXOztrQ0FDbEIsdUJBQXVCOzttQ0FJM0MseUJBQXlCOztBQUV6QixTQUFTLGFBQWEsQ0FBQyxZQUFZLEVBQUU7QUFDMUMsTUFBTSxnQkFBZ0IsR0FBRyxBQUFDLFlBQVksSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUssQ0FBQztNQUM3RCxlQUFlLDBCQUFvQixDQUFDOztBQUV0QyxNQUNFLGdCQUFnQiwyQ0FBcUMsSUFDckQsZ0JBQWdCLDJCQUFxQixFQUNyQztBQUNBLFdBQU87R0FDUjs7QUFFRCxNQUFJLGdCQUFnQiwwQ0FBb0MsRUFBRTtBQUN4RCxRQUFNLGVBQWUsR0FBRyx1QkFBaUIsZUFBZSxDQUFDO1FBQ3ZELGdCQUFnQixHQUFHLHVCQUFpQixnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3hELFVBQU0sMkJBQ0oseUZBQXlGLEdBQ3ZGLHFEQUFxRCxHQUNyRCxlQUFlLEdBQ2YsbURBQW1ELEdBQ25ELGdCQUFnQixHQUNoQixJQUFJLENBQ1AsQ0FBQztHQUNILE1BQU07O0FBRUwsVUFBTSwyQkFDSix3RkFBd0YsR0FDdEYsaURBQWlELEdBQ2pELFlBQVksQ0FBQyxDQUFDLENBQUMsR0FDZixJQUFJLENBQ1AsQ0FBQztHQUNIO0NBQ0Y7O0FBRU0sU0FBUyxRQUFRLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTs7QUFFMUMsTUFBSSxDQUFDLEdBQUcsRUFBRTtBQUNSLFVBQU0sMkJBQWMsbUNBQW1DLENBQUMsQ0FBQztHQUMxRDtBQUNELE1BQUksQ0FBQyxZQUFZLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFO0FBQ3ZDLFVBQU0sMkJBQWMsMkJBQTJCLEdBQUcsT0FBTyxZQUFZLENBQUMsQ0FBQztH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QUFDbkMsV0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsY0FBYyxFQUFkLGNBQWMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0dBQ2xELENBQUMsQ0FBQztDQUNKIiwiZmlsZSI6InJ1bnRpbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBVdGlscyBmcm9tICcuL3V0aWxzJztcbmltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi9leGNlcHRpb24nO1xuaW1wb3J0IHtcbiAgQ09NUElMRVJfUkVWSVNJT04sXG4gIGNyZWF0ZUZyYW1lLFxuICBMQVNUX0NPTVBBVElCTEVfQ09NUElMRVJfUkVWSVNJT04sXG4gIFJFVklTSU9OX0NIQU5HRVNcbn0gZnJvbSAnLi9iYXNlJztcbmltcG9ydCB7IG1vdmVIZWxwZXJUb0hvb2tzIH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCB7IHdyYXBIZWxwZXIgfSBmcm9tICcuL2ludGVybmFsL3dyYXBIZWxwZXInO1xuaW1wb3J0IHtcbiAgY3JlYXRlUHJvdG9BY2Nlc3NDb250cm9sLFxuICByZXN1bHRJc0FsbG93ZWRcbn0gZnJvbSAnLi9pbnRlcm5hbC9wcm90by1hY2Nlc3MnO1xuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tSZXZpc2lvbihjb21waWxlckluZm8pIHtcbiAgY29uc3QgY29tcGlsZXJSZXZpc2lvbiA9IChjb21waWxlckluZm8gJiYgY29tcGlsZXJJbmZvWzBdKSB8fCAxLFxuICAgIGN1cnJlbnRSZXZpc2lvbiA9IENPTVBJTEVSX1JFVklTSU9OO1xuXG4gIGlmIChcbiAgICBjb21waWxlclJldmlzaW9uID49IExBU1RfQ09NUEFUSUJMRV9DT01QSUxFUl9SRVZJU0lPTiAmJlxuICAgIGNvbXBpbGVyUmV2aXNpb24gPD0gQ09NUElMRVJfUkVWSVNJT05cbiAgKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNvbXBpbGVyUmV2aXNpb24gPCBMQVNUX0NPTVBBVElCTEVfQ09NUElMRVJfUkVWSVNJT04pIHtcbiAgICBjb25zdCBydW50aW1lVmVyc2lvbnMgPSBSRVZJU0lPTl9DSEFOR0VTW2N1cnJlbnRSZXZpc2lvbl0sXG4gICAgICBjb21waWxlclZlcnNpb25zID0gUkVWSVNJT05fQ0hBTkdFU1tjb21waWxlclJldmlzaW9uXTtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFxuICAgICAgJ1RlbXBsYXRlIHdhcyBwcmVjb21waWxlZCB3aXRoIGFuIG9sZGVyIHZlcnNpb24gb2YgSGFuZGxlYmFycyB0aGFuIHRoZSBjdXJyZW50IHJ1bnRpbWUuICcgK1xuICAgICAgICAnUGxlYXNlIHVwZGF0ZSB5b3VyIHByZWNvbXBpbGVyIHRvIGEgbmV3ZXIgdmVyc2lvbiAoJyArXG4gICAgICAgIHJ1bnRpbWVWZXJzaW9ucyArXG4gICAgICAgICcpIG9yIGRvd25ncmFkZSB5b3VyIHJ1bnRpbWUgdG8gYW4gb2xkZXIgdmVyc2lvbiAoJyArXG4gICAgICAgIGNvbXBpbGVyVmVyc2lvbnMgK1xuICAgICAgICAnKS4nXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBVc2UgdGhlIGVtYmVkZGVkIHZlcnNpb24gaW5mbyBzaW5jZSB0aGUgcnVudGltZSBkb2Vzbid0IGtub3cgYWJvdXQgdGhpcyByZXZpc2lvbiB5ZXRcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFxuICAgICAgJ1RlbXBsYXRlIHdhcyBwcmVjb21waWxlZCB3aXRoIGEgbmV3ZXIgdmVyc2lvbiBvZiBIYW5kbGViYXJzIHRoYW4gdGhlIGN1cnJlbnQgcnVudGltZS4gJyArXG4gICAgICAgICdQbGVhc2UgdXBkYXRlIHlvdXIgcnVudGltZSB0byBhIG5ld2VyIHZlcnNpb24gKCcgK1xuICAgICAgICBjb21waWxlckluZm9bMV0gK1xuICAgICAgICAnKS4nXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGUodGVtcGxhdGVTcGVjLCBlbnYpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaWYgKCFlbnYpIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdObyBlbnZpcm9ubWVudCBwYXNzZWQgdG8gdGVtcGxhdGUnKTtcbiAgfVxuICBpZiAoIXRlbXBsYXRlU3BlYyB8fCAhdGVtcGxhdGVTcGVjLm1haW4pIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdVbmtub3duIHRlbXBsYXRlIG9iamVjdDogJyArIHR5cGVvZiB0ZW1wbGF0ZVNwZWMpO1xuICB9XG5cbiAgdGVtcGxhdGVTcGVjLm1haW4uZGVjb3JhdG9yID0gdGVtcGxhdGVTcGVjLm1haW5fZDtcblxuICAvLyBOb3RlOiBVc2luZyBlbnYuVk0gcmVmZXJlbmNlcyByYXRoZXIgdGhhbiBsb2NhbCB2YXIgcmVmZXJlbmNlcyB0aHJvdWdob3V0IHRoaXMgc2VjdGlvbiB0byBhbGxvd1xuICAvLyBmb3IgZXh0ZXJuYWwgdXNlcnMgdG8gb3ZlcnJpZGUgdGhlc2UgYXMgcHNldWRvLXN1cHBvcnRlZCBBUElzLlxuICBlbnYuVk0uY2hlY2tSZXZpc2lvbih0ZW1wbGF0ZVNwZWMuY29tcGlsZXIpO1xuXG4gIC8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZvciBwcmVjb21waWxlZCB0ZW1wbGF0ZXMgd2l0aCBjb21waWxlci12ZXJzaW9uIDcgKDw0LjMuMClcbiAgY29uc3QgdGVtcGxhdGVXYXNQcmVjb21waWxlZFdpdGhDb21waWxlclY3ID1cbiAgICB0ZW1wbGF0ZVNwZWMuY29tcGlsZXIgJiYgdGVtcGxhdGVTcGVjLmNvbXBpbGVyWzBdID09PSA3O1xuXG4gIGZ1bmN0aW9uIGludm9rZVBhcnRpYWxXcmFwcGVyKHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5oYXNoKSB7XG4gICAgICBjb250ZXh0ID0gVXRpbHMuZXh0ZW5kKHt9LCBjb250ZXh0LCBvcHRpb25zLmhhc2gpO1xuICAgICAgaWYgKG9wdGlvbnMuaWRzKSB7XG4gICAgICAgIG9wdGlvbnMuaWRzWzBdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcGFydGlhbCA9IGVudi5WTS5yZXNvbHZlUGFydGlhbC5jYWxsKHRoaXMsIHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpO1xuXG4gICAgbGV0IGV4dGVuZGVkT3B0aW9ucyA9IFV0aWxzLmV4dGVuZCh7fSwgb3B0aW9ucywge1xuICAgICAgaG9va3M6IHRoaXMuaG9va3MsXG4gICAgICBwcm90b0FjY2Vzc0NvbnRyb2w6IHRoaXMucHJvdG9BY2Nlc3NDb250cm9sXG4gICAgfSk7XG5cbiAgICBsZXQgcmVzdWx0ID0gZW52LlZNLmludm9rZVBhcnRpYWwuY2FsbChcbiAgICAgIHRoaXMsXG4gICAgICBwYXJ0aWFsLFxuICAgICAgY29udGV4dCxcbiAgICAgIGV4dGVuZGVkT3B0aW9uc1xuICAgICk7XG5cbiAgICBpZiAocmVzdWx0ID09IG51bGwgJiYgZW52LmNvbXBpbGUpIHtcbiAgICAgIG9wdGlvbnMucGFydGlhbHNbb3B0aW9ucy5uYW1lXSA9IGVudi5jb21waWxlKFxuICAgICAgICBwYXJ0aWFsLFxuICAgICAgICB0ZW1wbGF0ZVNwZWMuY29tcGlsZXJPcHRpb25zLFxuICAgICAgICBlbnZcbiAgICAgICk7XG4gICAgICByZXN1bHQgPSBvcHRpb25zLnBhcnRpYWxzW29wdGlvbnMubmFtZV0oY29udGV4dCwgZXh0ZW5kZWRPcHRpb25zKTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICBpZiAob3B0aW9ucy5pbmRlbnQpIHtcbiAgICAgICAgbGV0IGxpbmVzID0gcmVzdWx0LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBsaW5lcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBpZiAoIWxpbmVzW2ldICYmIGkgKyAxID09PSBsKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsaW5lc1tpXSA9IG9wdGlvbnMuaW5kZW50ICsgbGluZXNbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ID0gbGluZXMuam9pbignXFxuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFxuICAgICAgICAnVGhlIHBhcnRpYWwgJyArXG4gICAgICAgICAgb3B0aW9ucy5uYW1lICtcbiAgICAgICAgICAnIGNvdWxkIG5vdCBiZSBjb21waWxlZCB3aGVuIHJ1bm5pbmcgaW4gcnVudGltZS1vbmx5IG1vZGUnXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEp1c3QgYWRkIHdhdGVyXG4gIGxldCBjb250YWluZXIgPSB7XG4gICAgc3RyaWN0OiBmdW5jdGlvbihvYmosIG5hbWUsIGxvYykge1xuICAgICAgaWYgKCFvYmogfHwgIShuYW1lIGluIG9iaikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignXCInICsgbmFtZSArICdcIiBub3QgZGVmaW5lZCBpbiAnICsgb2JqLCB7XG4gICAgICAgICAgbG9jOiBsb2NcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udGFpbmVyLmxvb2t1cFByb3BlcnR5KG9iaiwgbmFtZSk7XG4gICAgfSxcbiAgICBsb29rdXBQcm9wZXJ0eTogZnVuY3Rpb24ocGFyZW50LCBwcm9wZXJ0eU5hbWUpIHtcbiAgICAgIGxldCByZXN1bHQgPSBwYXJlbnRbcHJvcGVydHlOYW1lXTtcbiAgICAgIGlmIChyZXN1bHQgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwYXJlbnQsIHByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3VsdElzQWxsb3dlZChyZXN1bHQsIGNvbnRhaW5lci5wcm90b0FjY2Vzc0NvbnRyb2wsIHByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgICBsb29rdXA6IGZ1bmN0aW9uKGRlcHRocywgbmFtZSkge1xuICAgICAgY29uc3QgbGVuID0gZGVwdGhzLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGRlcHRoc1tpXSAmJiBjb250YWluZXIubG9va3VwUHJvcGVydHkoZGVwdGhzW2ldLCBuYW1lKTtcbiAgICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGRlcHRoc1tpXVtuYW1lXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgbGFtYmRhOiBmdW5jdGlvbihjdXJyZW50LCBjb250ZXh0KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGN1cnJlbnQgPT09ICdmdW5jdGlvbicgPyBjdXJyZW50LmNhbGwoY29udGV4dCkgOiBjdXJyZW50O1xuICAgIH0sXG5cbiAgICBlc2NhcGVFeHByZXNzaW9uOiBVdGlscy5lc2NhcGVFeHByZXNzaW9uLFxuICAgIGludm9rZVBhcnRpYWw6IGludm9rZVBhcnRpYWxXcmFwcGVyLFxuXG4gICAgZm46IGZ1bmN0aW9uKGkpIHtcbiAgICAgIGxldCByZXQgPSB0ZW1wbGF0ZVNwZWNbaV07XG4gICAgICByZXQuZGVjb3JhdG9yID0gdGVtcGxhdGVTcGVjW2kgKyAnX2QnXTtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSxcblxuICAgIHByb2dyYW1zOiBbXSxcbiAgICBwcm9ncmFtOiBmdW5jdGlvbihpLCBkYXRhLCBkZWNsYXJlZEJsb2NrUGFyYW1zLCBibG9ja1BhcmFtcywgZGVwdGhzKSB7XG4gICAgICBsZXQgcHJvZ3JhbVdyYXBwZXIgPSB0aGlzLnByb2dyYW1zW2ldLFxuICAgICAgICBmbiA9IHRoaXMuZm4oaSk7XG4gICAgICBpZiAoZGF0YSB8fCBkZXB0aHMgfHwgYmxvY2tQYXJhbXMgfHwgZGVjbGFyZWRCbG9ja1BhcmFtcykge1xuICAgICAgICBwcm9ncmFtV3JhcHBlciA9IHdyYXBQcm9ncmFtKFxuICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgaSxcbiAgICAgICAgICBmbixcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIGRlY2xhcmVkQmxvY2tQYXJhbXMsXG4gICAgICAgICAgYmxvY2tQYXJhbXMsXG4gICAgICAgICAgZGVwdGhzXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKCFwcm9ncmFtV3JhcHBlcikge1xuICAgICAgICBwcm9ncmFtV3JhcHBlciA9IHRoaXMucHJvZ3JhbXNbaV0gPSB3cmFwUHJvZ3JhbSh0aGlzLCBpLCBmbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvZ3JhbVdyYXBwZXI7XG4gICAgfSxcblxuICAgIGRhdGE6IGZ1bmN0aW9uKHZhbHVlLCBkZXB0aCkge1xuICAgICAgd2hpbGUgKHZhbHVlICYmIGRlcHRoLS0pIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5fcGFyZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0sXG4gICAgbWVyZ2VJZk5lZWRlZDogZnVuY3Rpb24ocGFyYW0sIGNvbW1vbikge1xuICAgICAgbGV0IG9iaiA9IHBhcmFtIHx8IGNvbW1vbjtcblxuICAgICAgaWYgKHBhcmFtICYmIGNvbW1vbiAmJiBwYXJhbSAhPT0gY29tbW9uKSB7XG4gICAgICAgIG9iaiA9IFV0aWxzLmV4dGVuZCh7fSwgY29tbW9uLCBwYXJhbSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICAvLyBBbiBlbXB0eSBvYmplY3QgdG8gdXNlIGFzIHJlcGxhY2VtZW50IGZvciBudWxsLWNvbnRleHRzXG4gICAgbnVsbENvbnRleHQ6IE9iamVjdC5zZWFsKHt9KSxcblxuICAgIG5vb3A6IGVudi5WTS5ub29wLFxuICAgIGNvbXBpbGVySW5mbzogdGVtcGxhdGVTcGVjLmNvbXBpbGVyXG4gIH07XG5cbiAgZnVuY3Rpb24gcmV0KGNvbnRleHQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuXG4gICAgcmV0Ll9zZXR1cChvcHRpb25zKTtcbiAgICBpZiAoIW9wdGlvbnMucGFydGlhbCAmJiB0ZW1wbGF0ZVNwZWMudXNlRGF0YSkge1xuICAgICAgZGF0YSA9IGluaXREYXRhKGNvbnRleHQsIGRhdGEpO1xuICAgIH1cbiAgICBsZXQgZGVwdGhzLFxuICAgICAgYmxvY2tQYXJhbXMgPSB0ZW1wbGF0ZVNwZWMudXNlQmxvY2tQYXJhbXMgPyBbXSA6IHVuZGVmaW5lZDtcbiAgICBpZiAodGVtcGxhdGVTcGVjLnVzZURlcHRocykge1xuICAgICAgaWYgKG9wdGlvbnMuZGVwdGhzKSB7XG4gICAgICAgIGRlcHRocyA9XG4gICAgICAgICAgY29udGV4dCAhPSBvcHRpb25zLmRlcHRoc1swXVxuICAgICAgICAgICAgPyBbY29udGV4dF0uY29uY2F0KG9wdGlvbnMuZGVwdGhzKVxuICAgICAgICAgICAgOiBvcHRpb25zLmRlcHRocztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlcHRocyA9IFtjb250ZXh0XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWluKGNvbnRleHQgLyosIG9wdGlvbnMqLykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgJycgK1xuICAgICAgICB0ZW1wbGF0ZVNwZWMubWFpbihcbiAgICAgICAgICBjb250YWluZXIsXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICBjb250YWluZXIuaGVscGVycyxcbiAgICAgICAgICBjb250YWluZXIucGFydGlhbHMsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBibG9ja1BhcmFtcyxcbiAgICAgICAgICBkZXB0aHNcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBtYWluID0gZXhlY3V0ZURlY29yYXRvcnMoXG4gICAgICB0ZW1wbGF0ZVNwZWMubWFpbixcbiAgICAgIG1haW4sXG4gICAgICBjb250YWluZXIsXG4gICAgICBvcHRpb25zLmRlcHRocyB8fCBbXSxcbiAgICAgIGRhdGEsXG4gICAgICBibG9ja1BhcmFtc1xuICAgICk7XG4gICAgcmV0dXJuIG1haW4oY29udGV4dCwgb3B0aW9ucyk7XG4gIH1cblxuICByZXQuaXNUb3AgPSB0cnVlO1xuXG4gIHJldC5fc2V0dXAgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLnBhcnRpYWwpIHtcbiAgICAgIGxldCBtZXJnZWRIZWxwZXJzID0gVXRpbHMuZXh0ZW5kKHt9LCBlbnYuaGVscGVycywgb3B0aW9ucy5oZWxwZXJzKTtcbiAgICAgIHdyYXBIZWxwZXJzVG9QYXNzTG9va3VwUHJvcGVydHkobWVyZ2VkSGVscGVycywgY29udGFpbmVyKTtcbiAgICAgIGNvbnRhaW5lci5oZWxwZXJzID0gbWVyZ2VkSGVscGVycztcblxuICAgICAgaWYgKHRlbXBsYXRlU3BlYy51c2VQYXJ0aWFsKSB7XG4gICAgICAgIC8vIFVzZSBtZXJnZUlmTmVlZGVkIGhlcmUgdG8gcHJldmVudCBjb21waWxpbmcgZ2xvYmFsIHBhcnRpYWxzIG11bHRpcGxlIHRpbWVzXG4gICAgICAgIGNvbnRhaW5lci5wYXJ0aWFscyA9IGNvbnRhaW5lci5tZXJnZUlmTmVlZGVkKFxuICAgICAgICAgIG9wdGlvbnMucGFydGlhbHMsXG4gICAgICAgICAgZW52LnBhcnRpYWxzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAodGVtcGxhdGVTcGVjLnVzZVBhcnRpYWwgfHwgdGVtcGxhdGVTcGVjLnVzZURlY29yYXRvcnMpIHtcbiAgICAgICAgY29udGFpbmVyLmRlY29yYXRvcnMgPSBVdGlscy5leHRlbmQoXG4gICAgICAgICAge30sXG4gICAgICAgICAgZW52LmRlY29yYXRvcnMsXG4gICAgICAgICAgb3B0aW9ucy5kZWNvcmF0b3JzXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRhaW5lci5ob29rcyA9IHt9O1xuICAgICAgY29udGFpbmVyLnByb3RvQWNjZXNzQ29udHJvbCA9IGNyZWF0ZVByb3RvQWNjZXNzQ29udHJvbChvcHRpb25zKTtcblxuICAgICAgbGV0IGtlZXBIZWxwZXJJbkhlbHBlcnMgPVxuICAgICAgICBvcHRpb25zLmFsbG93Q2FsbHNUb0hlbHBlck1pc3NpbmcgfHxcbiAgICAgICAgdGVtcGxhdGVXYXNQcmVjb21waWxlZFdpdGhDb21waWxlclY3O1xuICAgICAgbW92ZUhlbHBlclRvSG9va3MoY29udGFpbmVyLCAnaGVscGVyTWlzc2luZycsIGtlZXBIZWxwZXJJbkhlbHBlcnMpO1xuICAgICAgbW92ZUhlbHBlclRvSG9va3MoY29udGFpbmVyLCAnYmxvY2tIZWxwZXJNaXNzaW5nJywga2VlcEhlbHBlckluSGVscGVycyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhaW5lci5wcm90b0FjY2Vzc0NvbnRyb2wgPSBvcHRpb25zLnByb3RvQWNjZXNzQ29udHJvbDsgLy8gaW50ZXJuYWwgb3B0aW9uXG4gICAgICBjb250YWluZXIuaGVscGVycyA9IG9wdGlvbnMuaGVscGVycztcbiAgICAgIGNvbnRhaW5lci5wYXJ0aWFscyA9IG9wdGlvbnMucGFydGlhbHM7XG4gICAgICBjb250YWluZXIuZGVjb3JhdG9ycyA9IG9wdGlvbnMuZGVjb3JhdG9ycztcbiAgICAgIGNvbnRhaW5lci5ob29rcyA9IG9wdGlvbnMuaG9va3M7XG4gICAgfVxuICB9O1xuXG4gIHJldC5fY2hpbGQgPSBmdW5jdGlvbihpLCBkYXRhLCBibG9ja1BhcmFtcywgZGVwdGhzKSB7XG4gICAgaWYgKHRlbXBsYXRlU3BlYy51c2VCbG9ja1BhcmFtcyAmJiAhYmxvY2tQYXJhbXMpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ211c3QgcGFzcyBibG9jayBwYXJhbXMnKTtcbiAgICB9XG4gICAgaWYgKHRlbXBsYXRlU3BlYy51c2VEZXB0aHMgJiYgIWRlcHRocykge1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignbXVzdCBwYXNzIHBhcmVudCBkZXB0aHMnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gd3JhcFByb2dyYW0oXG4gICAgICBjb250YWluZXIsXG4gICAgICBpLFxuICAgICAgdGVtcGxhdGVTcGVjW2ldLFxuICAgICAgZGF0YSxcbiAgICAgIDAsXG4gICAgICBibG9ja1BhcmFtcyxcbiAgICAgIGRlcHRoc1xuICAgICk7XG4gIH07XG4gIHJldHVybiByZXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3cmFwUHJvZ3JhbShcbiAgY29udGFpbmVyLFxuICBpLFxuICBmbixcbiAgZGF0YSxcbiAgZGVjbGFyZWRCbG9ja1BhcmFtcyxcbiAgYmxvY2tQYXJhbXMsXG4gIGRlcHRoc1xuKSB7XG4gIGZ1bmN0aW9uIHByb2coY29udGV4dCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IGN1cnJlbnREZXB0aHMgPSBkZXB0aHM7XG4gICAgaWYgKFxuICAgICAgZGVwdGhzICYmXG4gICAgICBjb250ZXh0ICE9IGRlcHRoc1swXSAmJlxuICAgICAgIShjb250ZXh0ID09PSBjb250YWluZXIubnVsbENvbnRleHQgJiYgZGVwdGhzWzBdID09PSBudWxsKVxuICAgICkge1xuICAgICAgY3VycmVudERlcHRocyA9IFtjb250ZXh0XS5jb25jYXQoZGVwdGhzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm4oXG4gICAgICBjb250YWluZXIsXG4gICAgICBjb250ZXh0LFxuICAgICAgY29udGFpbmVyLmhlbHBlcnMsXG4gICAgICBjb250YWluZXIucGFydGlhbHMsXG4gICAgICBvcHRpb25zLmRhdGEgfHwgZGF0YSxcbiAgICAgIGJsb2NrUGFyYW1zICYmIFtvcHRpb25zLmJsb2NrUGFyYW1zXS5jb25jYXQoYmxvY2tQYXJhbXMpLFxuICAgICAgY3VycmVudERlcHRoc1xuICAgICk7XG4gIH1cblxuICBwcm9nID0gZXhlY3V0ZURlY29yYXRvcnMoZm4sIHByb2csIGNvbnRhaW5lciwgZGVwdGhzLCBkYXRhLCBibG9ja1BhcmFtcyk7XG5cbiAgcHJvZy5wcm9ncmFtID0gaTtcbiAgcHJvZy5kZXB0aCA9IGRlcHRocyA/IGRlcHRocy5sZW5ndGggOiAwO1xuICBwcm9nLmJsb2NrUGFyYW1zID0gZGVjbGFyZWRCbG9ja1BhcmFtcyB8fCAwO1xuICByZXR1cm4gcHJvZztcbn1cblxuLyoqXG4gKiBUaGlzIGlzIGN1cnJlbnRseSBwYXJ0IG9mIHRoZSBvZmZpY2lhbCBBUEksIHRoZXJlZm9yZSBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzIHNob3VsZCBub3QgYmUgY2hhbmdlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVQYXJ0aWFsKHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgaWYgKCFwYXJ0aWFsKSB7XG4gICAgaWYgKG9wdGlvbnMubmFtZSA9PT0gJ0BwYXJ0aWFsLWJsb2NrJykge1xuICAgICAgcGFydGlhbCA9IG9wdGlvbnMuZGF0YVsncGFydGlhbC1ibG9jayddO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJ0aWFsID0gb3B0aW9ucy5wYXJ0aWFsc1tvcHRpb25zLm5hbWVdO1xuICAgIH1cbiAgfSBlbHNlIGlmICghcGFydGlhbC5jYWxsICYmICFvcHRpb25zLm5hbWUpIHtcbiAgICAvLyBUaGlzIGlzIGEgZHluYW1pYyBwYXJ0aWFsIHRoYXQgcmV0dXJuZWQgYSBzdHJpbmdcbiAgICBvcHRpb25zLm5hbWUgPSBwYXJ0aWFsO1xuICAgIHBhcnRpYWwgPSBvcHRpb25zLnBhcnRpYWxzW3BhcnRpYWxdO1xuICB9XG4gIHJldHVybiBwYXJ0aWFsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW52b2tlUGFydGlhbChwYXJ0aWFsLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gIC8vIFVzZSB0aGUgY3VycmVudCBjbG9zdXJlIGNvbnRleHQgdG8gc2F2ZSB0aGUgcGFydGlhbC1ibG9jayBpZiB0aGlzIHBhcnRpYWxcbiAgY29uc3QgY3VycmVudFBhcnRpYWxCbG9jayA9IG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmRhdGFbJ3BhcnRpYWwtYmxvY2snXTtcbiAgb3B0aW9ucy5wYXJ0aWFsID0gdHJ1ZTtcbiAgaWYgKG9wdGlvbnMuaWRzKSB7XG4gICAgb3B0aW9ucy5kYXRhLmNvbnRleHRQYXRoID0gb3B0aW9ucy5pZHNbMF0gfHwgb3B0aW9ucy5kYXRhLmNvbnRleHRQYXRoO1xuICB9XG5cbiAgbGV0IHBhcnRpYWxCbG9jaztcbiAgaWYgKG9wdGlvbnMuZm4gJiYgb3B0aW9ucy5mbiAhPT0gbm9vcCkge1xuICAgIG9wdGlvbnMuZGF0YSA9IGNyZWF0ZUZyYW1lKG9wdGlvbnMuZGF0YSk7XG4gICAgLy8gV3JhcHBlciBmdW5jdGlvbiB0byBnZXQgYWNjZXNzIHRvIGN1cnJlbnRQYXJ0aWFsQmxvY2sgZnJvbSB0aGUgY2xvc3VyZVxuICAgIGxldCBmbiA9IG9wdGlvbnMuZm47XG4gICAgcGFydGlhbEJsb2NrID0gb3B0aW9ucy5kYXRhWydwYXJ0aWFsLWJsb2NrJ10gPSBmdW5jdGlvbiBwYXJ0aWFsQmxvY2tXcmFwcGVyKFxuICAgICAgY29udGV4dCxcbiAgICAgIG9wdGlvbnMgPSB7fVxuICAgICkge1xuICAgICAgLy8gUmVzdG9yZSB0aGUgcGFydGlhbC1ibG9jayBmcm9tIHRoZSBjbG9zdXJlIGZvciB0aGUgZXhlY3V0aW9uIG9mIHRoZSBibG9ja1xuICAgICAgLy8gaS5lLiB0aGUgcGFydCBpbnNpZGUgdGhlIGJsb2NrIG9mIHRoZSBwYXJ0aWFsIGNhbGwuXG4gICAgICBvcHRpb25zLmRhdGEgPSBjcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpO1xuICAgICAgb3B0aW9ucy5kYXRhWydwYXJ0aWFsLWJsb2NrJ10gPSBjdXJyZW50UGFydGlhbEJsb2NrO1xuICAgICAgcmV0dXJuIGZuKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgIH07XG4gICAgaWYgKGZuLnBhcnRpYWxzKSB7XG4gICAgICBvcHRpb25zLnBhcnRpYWxzID0gVXRpbHMuZXh0ZW5kKHt9LCBvcHRpb25zLnBhcnRpYWxzLCBmbi5wYXJ0aWFscyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHBhcnRpYWwgPT09IHVuZGVmaW5lZCAmJiBwYXJ0aWFsQmxvY2spIHtcbiAgICBwYXJ0aWFsID0gcGFydGlhbEJsb2NrO1xuICB9XG5cbiAgaWYgKHBhcnRpYWwgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ1RoZSBwYXJ0aWFsICcgKyBvcHRpb25zLm5hbWUgKyAnIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICB9IGVsc2UgaWYgKHBhcnRpYWwgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgIHJldHVybiBwYXJ0aWFsKGNvbnRleHQsIG9wdGlvbnMpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub29wKCkge1xuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIGluaXREYXRhKGNvbnRleHQsIGRhdGEpIHtcbiAgaWYgKCFkYXRhIHx8ICEoJ3Jvb3QnIGluIGRhdGEpKSB7XG4gICAgZGF0YSA9IGRhdGEgPyBjcmVhdGVGcmFtZShkYXRhKSA6IHt9O1xuICAgIGRhdGEucm9vdCA9IGNvbnRleHQ7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIGV4ZWN1dGVEZWNvcmF0b3JzKGZuLCBwcm9nLCBjb250YWluZXIsIGRlcHRocywgZGF0YSwgYmxvY2tQYXJhbXMpIHtcbiAgaWYgKGZuLmRlY29yYXRvcikge1xuICAgIGxldCBwcm9wcyA9IHt9O1xuICAgIHByb2cgPSBmbi5kZWNvcmF0b3IoXG4gICAgICBwcm9nLFxuICAgICAgcHJvcHMsXG4gICAgICBjb250YWluZXIsXG4gICAgICBkZXB0aHMgJiYgZGVwdGhzWzBdLFxuICAgICAgZGF0YSxcbiAgICAgIGJsb2NrUGFyYW1zLFxuICAgICAgZGVwdGhzXG4gICAgKTtcbiAgICBVdGlscy5leHRlbmQocHJvZywgcHJvcHMpO1xuICB9XG4gIHJldHVybiBwcm9nO1xufVxuXG5mdW5jdGlvbiB3cmFwSGVscGVyc1RvUGFzc0xvb2t1cFByb3BlcnR5KG1lcmdlZEhlbHBlcnMsIGNvbnRhaW5lcikge1xuICBPYmplY3Qua2V5cyhtZXJnZWRIZWxwZXJzKS5mb3JFYWNoKGhlbHBlck5hbWUgPT4ge1xuICAgIGxldCBoZWxwZXIgPSBtZXJnZWRIZWxwZXJzW2hlbHBlck5hbWVdO1xuICAgIG1lcmdlZEhlbHBlcnNbaGVscGVyTmFtZV0gPSBwYXNzTG9va3VwUHJvcGVydHlPcHRpb24oaGVscGVyLCBjb250YWluZXIpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcGFzc0xvb2t1cFByb3BlcnR5T3B0aW9uKGhlbHBlciwgY29udGFpbmVyKSB7XG4gIGNvbnN0IGxvb2t1cFByb3BlcnR5ID0gY29udGFpbmVyLmxvb2t1cFByb3BlcnR5O1xuICByZXR1cm4gd3JhcEhlbHBlcihoZWxwZXIsIG9wdGlvbnMgPT4ge1xuICAgIHJldHVybiBVdGlscy5leHRlbmQoeyBsb29rdXBQcm9wZXJ0eSB9LCBvcHRpb25zKTtcbiAgfSk7XG59XG4iXX0=\n","// Build out our basic SafeString type\n'use strict';\n\nexports.__esModule = true;\nfunction SafeString(string) {\n  this.string = string;\n}\n\nSafeString.prototype.toString = SafeString.prototype.toHTML = function () {\n  return '' + this.string;\n};\n\nexports['default'] = SafeString;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL3NhZmUtc3RyaW5nLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxTQUFTLFVBQVUsQ0FBQyxNQUFNLEVBQUU7QUFDMUIsTUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7Q0FDdEI7O0FBRUQsVUFBVSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsWUFBVztBQUN2RSxTQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0NBQ3pCLENBQUM7O3FCQUVhLFVBQVUiLCJmaWxlIjoic2FmZS1zdHJpbmcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBCdWlsZCBvdXQgb3VyIGJhc2ljIFNhZmVTdHJpbmcgdHlwZVxuZnVuY3Rpb24gU2FmZVN0cmluZyhzdHJpbmcpIHtcbiAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG59XG5cblNhZmVTdHJpbmcucHJvdG90eXBlLnRvU3RyaW5nID0gU2FmZVN0cmluZy5wcm90b3R5cGUudG9IVE1MID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAnJyArIHRoaXMuc3RyaW5nO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2FmZVN0cmluZztcbiJdfQ==\n","'use strict';\n\nexports.__esModule = true;\nexports.extend = extend;\nexports.indexOf = indexOf;\nexports.escapeExpression = escapeExpression;\nexports.isEmpty = isEmpty;\nexports.createFrame = createFrame;\nexports.blockParams = blockParams;\nexports.appendContextPath = appendContextPath;\nvar escape = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;',\n  '=': '&#x3D;'\n};\n\nvar badChars = /[&<>\"'`=]/g,\n    possible = /[&<>\"'`=]/;\n\nfunction escapeChar(chr) {\n  return escape[chr];\n}\n\nfunction extend(obj /* , ...source */) {\n  for (var i = 1; i < arguments.length; i++) {\n    for (var key in arguments[i]) {\n      if (Object.prototype.hasOwnProperty.call(arguments[i], key)) {\n        obj[key] = arguments[i][key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nvar toString = Object.prototype.toString;\n\nexports.toString = toString;\n// Sourced from lodash\n// https://github.com/bestiejs/lodash/blob/master/LICENSE.txt\n/* eslint-disable func-style */\nvar isFunction = function isFunction(value) {\n  return typeof value === 'function';\n};\n// fallback for older versions of Chrome and Safari\n/* istanbul ignore next */\nif (isFunction(/x/)) {\n  exports.isFunction = isFunction = function (value) {\n    return typeof value === 'function' && toString.call(value) === '[object Function]';\n  };\n}\nexports.isFunction = isFunction;\n\n/* eslint-enable func-style */\n\n/* istanbul ignore next */\nvar isArray = Array.isArray || function (value) {\n  return value && typeof value === 'object' ? toString.call(value) === '[object Array]' : false;\n};\n\nexports.isArray = isArray;\n// Older IE versions do not directly support indexOf so we must implement our own, sadly.\n\nfunction indexOf(array, value) {\n  for (var i = 0, len = array.length; i < len; i++) {\n    if (array[i] === value) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nfunction escapeExpression(string) {\n  if (typeof string !== 'string') {\n    // don't escape SafeStrings, since they're already safe\n    if (string && string.toHTML) {\n      return string.toHTML();\n    } else if (string == null) {\n      return '';\n    } else if (!string) {\n      return string + '';\n    }\n\n    // Force a string conversion as this will be done by the append regardless and\n    // the regex test will do this transparently behind the scenes, causing issues if\n    // an object's to string has escaped characters in it.\n    string = '' + string;\n  }\n\n  if (!possible.test(string)) {\n    return string;\n  }\n  return string.replace(badChars, escapeChar);\n}\n\nfunction isEmpty(value) {\n  if (!value && value !== 0) {\n    return true;\n  } else if (isArray(value) && value.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction createFrame(object) {\n  var frame = extend({}, object);\n  frame._parent = object;\n  return frame;\n}\n\nfunction blockParams(params, ids) {\n  params.path = ids;\n  return params;\n}\n\nfunction appendContextPath(contextPath, id) {\n  return (contextPath ? contextPath + '.' : '') + id;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9oYW5kbGViYXJzL3V0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFNLE1BQU0sR0FBRztBQUNiLEtBQUcsRUFBRSxPQUFPO0FBQ1osS0FBRyxFQUFFLE1BQU07QUFDWCxLQUFHLEVBQUUsTUFBTTtBQUNYLEtBQUcsRUFBRSxRQUFRO0FBQ2IsS0FBRyxFQUFFLFFBQVE7QUFDYixLQUFHLEVBQUUsUUFBUTtBQUNiLEtBQUcsRUFBRSxRQUFRO0NBQ2QsQ0FBQzs7QUFFRixJQUFNLFFBQVEsR0FBRyxZQUFZO0lBQzNCLFFBQVEsR0FBRyxXQUFXLENBQUM7O0FBRXpCLFNBQVMsVUFBVSxDQUFDLEdBQUcsRUFBRTtBQUN2QixTQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNwQjs7QUFFTSxTQUFTLE1BQU0sQ0FBQyxHQUFHLG9CQUFvQjtBQUM1QyxPQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN6QyxTQUFLLElBQUksR0FBRyxJQUFJLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtBQUM1QixVQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUU7QUFDM0QsV0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztPQUM5QjtLQUNGO0dBQ0Y7O0FBRUQsU0FBTyxHQUFHLENBQUM7Q0FDWjs7QUFFTSxJQUFJLFFBQVEsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQzs7Ozs7O0FBS2hELElBQUksVUFBVSxHQUFHLG9CQUFTLEtBQUssRUFBRTtBQUMvQixTQUFPLE9BQU8sS0FBSyxLQUFLLFVBQVUsQ0FBQztDQUNwQyxDQUFDOzs7QUFHRixJQUFJLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUNuQixVQU9PLFVBQVUsR0FQakIsVUFBVSxHQUFHLFVBQVMsS0FBSyxFQUFFO0FBQzNCLFdBQ0UsT0FBTyxLQUFLLEtBQUssVUFBVSxJQUMzQixRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLG1CQUFtQixDQUM1QztHQUNILENBQUM7Q0FDSDtRQUNRLFVBQVUsR0FBVixVQUFVOzs7OztBQUlaLElBQU0sT0FBTyxHQUNsQixLQUFLLENBQUMsT0FBTyxJQUNiLFVBQVMsS0FBSyxFQUFFO0FBQ2QsU0FBTyxLQUFLLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxHQUNyQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLGdCQUFnQixHQUN6QyxLQUFLLENBQUM7Q0FDWCxDQUFDOzs7OztBQUdHLFNBQVMsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUU7QUFDcEMsT0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUNoRCxRQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLEVBQUU7QUFDdEIsYUFBTyxDQUFDLENBQUM7S0FDVjtHQUNGO0FBQ0QsU0FBTyxDQUFDLENBQUMsQ0FBQztDQUNYOztBQUVNLFNBQVMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFO0FBQ3ZDLE1BQUksT0FBTyxNQUFNLEtBQUssUUFBUSxFQUFFOztBQUU5QixRQUFJLE1BQU0sSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFO0FBQzNCLGFBQU8sTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0tBQ3hCLE1BQU0sSUFBSSxNQUFNLElBQUksSUFBSSxFQUFFO0FBQ3pCLGFBQU8sRUFBRSxDQUFDO0tBQ1gsTUFBTSxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ2xCLGFBQU8sTUFBTSxHQUFHLEVBQUUsQ0FBQztLQUNwQjs7Ozs7QUFLRCxVQUFNLEdBQUcsRUFBRSxHQUFHLE1BQU0sQ0FBQztHQUN0Qjs7QUFFRCxNQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtBQUMxQixXQUFPLE1BQU0sQ0FBQztHQUNmO0FBQ0QsU0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQztDQUM3Qzs7QUFFTSxTQUFTLE9BQU8sQ0FBQyxLQUFLLEVBQUU7QUFDN0IsTUFBSSxDQUFDLEtBQUssSUFBSSxLQUFLLEtBQUssQ0FBQyxFQUFFO0FBQ3pCLFdBQU8sSUFBSSxDQUFDO0dBQ2IsTUFBTSxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtBQUMvQyxXQUFPLElBQUksQ0FBQztHQUNiLE1BQU07QUFDTCxXQUFPLEtBQUssQ0FBQztHQUNkO0NBQ0Y7O0FBRU0sU0FBUyxXQUFXLENBQUMsTUFBTSxFQUFFO0FBQ2xDLE1BQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDL0IsT0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7QUFDdkIsU0FBTyxLQUFLLENBQUM7Q0FDZDs7QUFFTSxTQUFTLFdBQVcsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO0FBQ3ZDLFFBQU0sQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDO0FBQ2xCLFNBQU8sTUFBTSxDQUFDO0NBQ2Y7O0FBRU0sU0FBUyxpQkFBaUIsQ0FBQyxXQUFXLEVBQUUsRUFBRSxFQUFFO0FBQ2pELFNBQU8sQ0FBQyxXQUFXLEdBQUcsV0FBVyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUEsR0FBSSxFQUFFLENBQUM7Q0FDcEQiLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBlc2NhcGUgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmI3gyNzsnLFxuICAnYCc6ICcmI3g2MDsnLFxuICAnPSc6ICcmI3gzRDsnXG59O1xuXG5jb25zdCBiYWRDaGFycyA9IC9bJjw+XCInYD1dL2csXG4gIHBvc3NpYmxlID0gL1smPD5cIidgPV0vO1xuXG5mdW5jdGlvbiBlc2NhcGVDaGFyKGNocikge1xuICByZXR1cm4gZXNjYXBlW2Nocl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQob2JqIC8qICwgLi4uc291cmNlICovKSB7XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgZm9yIChsZXQga2V5IGluIGFyZ3VtZW50c1tpXSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhcmd1bWVudHNbaV0sIGtleSkpIHtcbiAgICAgICAgb2JqW2tleV0gPSBhcmd1bWVudHNbaV1ba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5leHBvcnQgbGV0IHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLy8gU291cmNlZCBmcm9tIGxvZGFzaFxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2Jlc3RpZWpzL2xvZGFzaC9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dFxuLyogZXNsaW50LWRpc2FibGUgZnVuYy1zdHlsZSAqL1xubGV0IGlzRnVuY3Rpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xufTtcbi8vIGZhbGxiYWNrIGZvciBvbGRlciB2ZXJzaW9ucyBvZiBDaHJvbWUgYW5kIFNhZmFyaVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmlmIChpc0Z1bmN0aW9uKC94LykpIHtcbiAgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSdcbiAgICApO1xuICB9O1xufVxuZXhwb3J0IHsgaXNGdW5jdGlvbiB9O1xuLyogZXNsaW50LWVuYWJsZSBmdW5jLXN0eWxlICovXG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgY29uc3QgaXNBcnJheSA9XG4gIEFycmF5LmlzQXJyYXkgfHxcbiAgZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0J1xuICAgICAgPyB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgQXJyYXldJ1xuICAgICAgOiBmYWxzZTtcbiAgfTtcblxuLy8gT2xkZXIgSUUgdmVyc2lvbnMgZG8gbm90IGRpcmVjdGx5IHN1cHBvcnQgaW5kZXhPZiBzbyB3ZSBtdXN0IGltcGxlbWVudCBvdXIgb3duLCBzYWRseS5cbmV4cG9ydCBmdW5jdGlvbiBpbmRleE9mKGFycmF5LCB2YWx1ZSkge1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0gYXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoYXJyYXlbaV0gPT09IHZhbHVlKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlRXhwcmVzc2lvbihzdHJpbmcpIHtcbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgLy8gZG9uJ3QgZXNjYXBlIFNhZmVTdHJpbmdzLCBzaW5jZSB0aGV5J3JlIGFscmVhZHkgc2FmZVxuICAgIGlmIChzdHJpbmcgJiYgc3RyaW5nLnRvSFRNTCkge1xuICAgICAgcmV0dXJuIHN0cmluZy50b0hUTUwoKTtcbiAgICB9IGVsc2UgaWYgKHN0cmluZyA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfSBlbHNlIGlmICghc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nICsgJyc7XG4gICAgfVxuXG4gICAgLy8gRm9yY2UgYSBzdHJpbmcgY29udmVyc2lvbiBhcyB0aGlzIHdpbGwgYmUgZG9uZSBieSB0aGUgYXBwZW5kIHJlZ2FyZGxlc3MgYW5kXG4gICAgLy8gdGhlIHJlZ2V4IHRlc3Qgd2lsbCBkbyB0aGlzIHRyYW5zcGFyZW50bHkgYmVoaW5kIHRoZSBzY2VuZXMsIGNhdXNpbmcgaXNzdWVzIGlmXG4gICAgLy8gYW4gb2JqZWN0J3MgdG8gc3RyaW5nIGhhcyBlc2NhcGVkIGNoYXJhY3RlcnMgaW4gaXQuXG4gICAgc3RyaW5nID0gJycgKyBzdHJpbmc7XG4gIH1cblxuICBpZiAoIXBvc3NpYmxlLnRlc3Qoc3RyaW5nKSkge1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH1cbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKGJhZENoYXJzLCBlc2NhcGVDaGFyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHtcbiAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJhbWUob2JqZWN0KSB7XG4gIGxldCBmcmFtZSA9IGV4dGVuZCh7fSwgb2JqZWN0KTtcbiAgZnJhbWUuX3BhcmVudCA9IG9iamVjdDtcbiAgcmV0dXJuIGZyYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmxvY2tQYXJhbXMocGFyYW1zLCBpZHMpIHtcbiAgcGFyYW1zLnBhdGggPSBpZHM7XG4gIHJldHVybiBwYXJhbXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRDb250ZXh0UGF0aChjb250ZXh0UGF0aCwgaWQpIHtcbiAgcmV0dXJuIChjb250ZXh0UGF0aCA/IGNvbnRleHRQYXRoICsgJy4nIDogJycpICsgaWQ7XG59XG4iXX0=\n","// Create a simple path alias to allow browserify to resolve\n// the runtime on a supported path.\nmodule.exports = require('./dist/cjs/handlebars.runtime')['default'];\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var SnowRenderItem = /** @class */ (function () {\r\n    function SnowRenderItem(cell, x, y, z) {\r\n        this.cell = cell;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n    return SnowRenderItem;\r\n}());\r\nexport { SnowRenderItem };\r\n","export function getInterpolatedColor(value, colorLight, colorDark) {\r\n    var color;\r\n    value = value > 1 ? 1 : (value < 0 ? 0 : value);\r\n    if (value === 0) {\r\n        color = colorDark;\r\n    }\r\n    else if (value === 1) {\r\n        color = colorLight;\r\n    }\r\n    else {\r\n        color = [\r\n            Math.max(0, Math.min(255, colorDark[0] + (colorLight[0] - colorDark[0]) * value)),\r\n            Math.max(0, Math.min(255, colorDark[1] + (colorLight[1] - colorDark[1]) * value)),\r\n            Math.max(0, Math.min(255, colorDark[2] + (colorLight[2] - colorDark[2]) * value)),\r\n            Math.max(0, Math.min(255, colorDark[3] + (colorLight[3] - colorDark[3]) * value)),\r\n        ];\r\n    }\r\n    return color;\r\n}\r\nexport function convertColorDecToHex(color) {\r\n    return '#' + (((color[0] & 0xff) << 16) | ((color[1] & 0xff) << 8) | (color[2] & 0xff))\r\n        .toString(16)\r\n        .padStart(6, '0');\r\n}\r\nexport function convertHexToRgb(hex) {\r\n    var color = parseInt(hex.substring(1), 16);\r\n    return [(color >> 16) & 0xFF, (color >> 8) & 0xFF, color & 0xFF, 0xFF];\r\n}\r\nexport function mixColors(frontRGBA, bgRGBA) {\r\n    if (bgRGBA[3] < 20) {\r\n        return frontRGBA.slice();\r\n    }\r\n    else if (frontRGBA[3] < 20) {\r\n        return bgRGBA.slice();\r\n    }\r\n    var bgR = bgRGBA[0] / 255;\r\n    var bgG = bgRGBA[1] / 255;\r\n    var bgB = bgRGBA[2] / 255;\r\n    var bgA = bgRGBA[3] / 255;\r\n    var fgR = frontRGBA[0] / 255;\r\n    var fgG = frontRGBA[1] / 255;\r\n    var fgB = frontRGBA[2] / 255;\r\n    var fgA = frontRGBA[3] / 255;\r\n    var a = (1 - fgA) * bgA;\r\n    var alpha = a + fgA;\r\n    var r = (a * bgR + fgA * fgR) / alpha;\r\n    var g = (a * bgG + fgA * fgG) / alpha;\r\n    var b = (a * bgB + fgA * fgB) / alpha;\r\n    return [\r\n        Math.max(0, Math.min(255, (r * 255) | 0)),\r\n        Math.max(0, Math.min(255, (g * 255) | 0)),\r\n        Math.max(0, Math.min(255, (b * 255) | 0)),\r\n        Math.max(0, Math.min(255, (alpha * 255) | 0))\r\n    ];\r\n}\r\n","import { convertHexToRgb } from \"game/helpers/color\";\r\nexport var SCALE = 2;\r\nexport var IMG_PROPS_SCALE = 1;\r\nexport var MATRIX_COLS = 90;\r\nexport var MATRIX_ROWS = 130;\r\nexport var MATRIX_LEVELS = 40;\r\nexport var MATRIX_CELL_SIZE = 4 * SCALE;\r\nexport var MATRIX_PHYSICS_CALC_FRAME_DELAY = 20;\r\nexport var MATRIX_FALLING_CELLS_PER_CALC = 5;\r\nexport var MATRIX_BALL_MIN_RADIUS = 6 * SCALE;\r\nexport var MATRIX_BALL_MAX_RADIUS = MATRIX_BALL_MIN_RADIUS + 3 * SCALE;\r\nexport var SNOW_SPHERE_REDUCE_CELLS_FACTOR = 0; //0.1;\r\nexport var SNOW_SPHERE_MAX_RADIUS = MATRIX_LEVELS >> 1;\r\nexport var SNOW_MAX_DARKNESS = 0.1;\r\nexport var SNOW_LIGHT_MAX_TRACE_PATH_Y = 15;\r\nexport var SNOW_LIGHT_MAX_TRACE_PATH_X = 10;\r\nexport var SNOW_LIGHT_COLOR = convertHexToRgb('#ffffff');\r\nexport var SNOW_DARK_COLOR = convertHexToRgb('#9fb8c9');\r\nexport var SNOW_SHADOW_LIGHT_COLOR = convertHexToRgb('#eef6fc');\r\nexport var SNOW_SHADOW_DARK_COLOR = convertHexToRgb('#a7c1d3');\r\nexport var SNOW_BLUR_SIZE = SCALE;\r\nexport var HISTORY_MAX_RECORDS = 20;\r\nexport var PAINT_COLORS = [\r\n    [convertHexToRgb('#ff0000'), convertHexToRgb('#aa0000')],\r\n    [convertHexToRgb('#fdf63c'), convertHexToRgb('#c5c719')],\r\n    [SNOW_LIGHT_COLOR, SNOW_DARK_COLOR],\r\n    [convertHexToRgb('#5cff41'), convertHexToRgb('#32c719')],\r\n    [convertHexToRgb('#5dd7ff'), convertHexToRgb('#259cc3')],\r\n    [convertHexToRgb('#5f7dff'), convertHexToRgb('#2542be')],\r\n    [convertHexToRgb('#a155ff'), convertHexToRgb('#5c0ebc')],\r\n    [convertHexToRgb('#ff4af9'), convertHexToRgb('#c10abb')],\r\n    [convertHexToRgb('#ff538c'), convertHexToRgb('#c21a51')],\r\n    [convertHexToRgb('#505050'), convertHexToRgb('#272727')],\r\n    [convertHexToRgb('#ffae00'), convertHexToRgb('#c78c19')],\r\n    [convertHexToRgb('#b1ff6c'), convertHexToRgb('#73be30')],\r\n];\r\nexport var PAINT_COLOR_ALPHA = 128;\r\nexport var SNOW_BORDER_SHADOW_COLOR = '#a7c1d3';\r\nexport var SNOW_BORDER_SHADOW_DISTANCE = 3 * SCALE;\r\nexport var SNOW_DROP_SHADOW_DISTANCE_BY_RADIUS_FACTOR = 0.4;\r\nexport var SNOW_DROP_SHADOW_RADIUS_FACTOR = 1.2;\r\nexport var CURSOR_ADD_COLOR = '#99EE99';\r\nexport var CURSOR_DEL_COLOR = '#CC5555';\r\nexport var CURSOR_CHANGE_COLOR = '#00AAFF';\r\nexport var RENDER_AREA_MATRIX_INDENT_CELLS = Math.max(SNOW_LIGHT_MAX_TRACE_PATH_Y, SNOW_LIGHT_MAX_TRACE_PATH_X);\r\n","export var Shapes;\r\n(function (Shapes) {\r\n    Shapes[\"SPHERE\"] = \"sphere\";\r\n    Shapes[\"CIRCLE\"] = \"circle\";\r\n    Shapes[\"CYLINDER\"] = \"cylinder\";\r\n    Shapes[\"RECT\"] = \"rect\";\r\n    Shapes[\"CONE\"] = \"cone\";\r\n})(Shapes || (Shapes = {}));\r\n","import { SnowRenderItem } from \"game/snow/snow-render-item\";\r\nimport { MATRIX_CELL_SIZE, RENDER_AREA_MATRIX_INDENT_CELLS } from \"game/config\";\r\nvar SnowMatrix = /** @class */ (function () {\r\n    function SnowMatrix(cols, rows, levels) {\r\n        this.cols = cols;\r\n        this.rows = rows;\r\n        this.levels = levels;\r\n        this.fillMapYX = null;\r\n        this.fillMapY = null;\r\n        this.renderList = null;\r\n        this.changedCube = { x1: 0, x2: 0, y1: 0, y2: 0, z1: 0, z2: 0 };\r\n        this.cellSize = MATRIX_CELL_SIZE;\r\n        this.cellSizeHalf = MATRIX_CELL_SIZE >> 1;\r\n        this.matrix = this.getEmptyMatrix();\r\n        this.setInitialChangedCube();\r\n    }\r\n    SnowMatrix.prototype.getElementsCount = function () {\r\n        var cnt = 0;\r\n        for (var y = 0; y < this.matrix.length; y++) {\r\n            var line1 = this.matrix[y];\r\n            for (var x = 0; x < line1.length; x++) {\r\n                var line2 = line1[x];\r\n                for (var z = 0; z < line2.length; z++) {\r\n                    if (line2[z] !== null) {\r\n                        cnt++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return cnt;\r\n    };\r\n    SnowMatrix.prototype.getZForNearestItem = function (x, y) {\r\n        if (y < 0 || x < 0 || y >= this.rows || x >= this.cols) {\r\n            return null;\r\n        }\r\n        for (var z = 0; z < this.levels; z++) {\r\n            if (this.matrix[y][x][z] !== null) {\r\n                return z;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    SnowMatrix.prototype.getMatrixXYByClientXY = function (clientX, clientY) {\r\n        return {\r\n            x: Math.floor(clientX / this.cellSize),\r\n            y: Math.floor(clientY / this.cellSize),\r\n        };\r\n    };\r\n    SnowMatrix.prototype.getFillMapYX = function () {\r\n        if (this.fillMapYX === null) {\r\n            this.calcFillMap();\r\n        }\r\n        return this.fillMapYX;\r\n    };\r\n    SnowMatrix.prototype.getFillMapY = function () {\r\n        if (this.fillMapY === null) {\r\n            this.calcFillMap();\r\n        }\r\n        return this.fillMapY;\r\n    };\r\n    SnowMatrix.prototype.resetCache = function () {\r\n        this.renderList = null;\r\n        this.fillMapY = null;\r\n        this.fillMapYX = null;\r\n    };\r\n    SnowMatrix.prototype.setInitialChangedCube = function () {\r\n        this.changedCube.x1 = 0;\r\n        this.changedCube.x2 = this.cols - 1;\r\n        this.changedCube.y1 = 0;\r\n        this.changedCube.y2 = this.rows - 1;\r\n        this.changedCube.z1 = 0;\r\n        this.changedCube.z2 = this.levels - 1;\r\n    };\r\n    SnowMatrix.prototype.mergeChangedCube = function (newCube) {\r\n        this.changedCube.x1 = Math.min(this.changedCube.x1, newCube.x1);\r\n        this.changedCube.x2 = Math.max(this.changedCube.x2, newCube.x2);\r\n        this.changedCube.y1 = Math.min(this.changedCube.y1, newCube.y1);\r\n        this.changedCube.y2 = Math.max(this.changedCube.y2, newCube.y2);\r\n        this.changedCube.z1 = Math.min(this.changedCube.z1, newCube.z1);\r\n        this.changedCube.z2 = Math.max(this.changedCube.z2, newCube.z2);\r\n    };\r\n    SnowMatrix.prototype.getChangedCubeWithRenderIndent = function () {\r\n        return {\r\n            x1: Math.max(0, this.changedCube.x1 - RENDER_AREA_MATRIX_INDENT_CELLS),\r\n            x2: Math.min(this.cols - 1, this.changedCube.x2 + RENDER_AREA_MATRIX_INDENT_CELLS),\r\n            y1: Math.max(0, this.changedCube.y1 - RENDER_AREA_MATRIX_INDENT_CELLS),\r\n            y2: Math.min(this.rows - 1, this.changedCube.y2 + RENDER_AREA_MATRIX_INDENT_CELLS),\r\n            z1: Math.max(0, this.changedCube.z1 - RENDER_AREA_MATRIX_INDENT_CELLS),\r\n            z2: Math.min(this.levels - 1, this.changedCube.z2 + RENDER_AREA_MATRIX_INDENT_CELLS),\r\n        };\r\n    };\r\n    SnowMatrix.prototype.hasChangedArea = function () {\r\n        return this.changedCube.x1 !== this.cols\r\n            || this.changedCube.y1 !== this.rows\r\n            || this.changedCube.z1 !== this.levels\r\n            || this.changedCube.x2 !== 0\r\n            || this.changedCube.y2 !== 0\r\n            || this.changedCube.z2 !== 0;\r\n    };\r\n    SnowMatrix.prototype.resetChangedArea = function () {\r\n        this.changedCube.x1 = this.cols;\r\n        this.changedCube.y1 = this.rows;\r\n        this.changedCube.z1 = this.levels;\r\n        this.changedCube.x2 = 0;\r\n        this.changedCube.y2 = 0;\r\n        this.changedCube.z2 = 0;\r\n    };\r\n    SnowMatrix.prototype.getRenderList = function () {\r\n        if (this.renderList !== null) {\r\n            return this.renderList;\r\n        }\r\n        var fillMapY = this.getFillMapY();\r\n        var fillMapYX = this.getFillMapYX();\r\n        this.renderList = [];\r\n        for (var y = 0; y < this.rows; y++) {\r\n            if (fillMapY[y] === false) {\r\n                continue;\r\n            }\r\n            var fillMapX = fillMapYX[y];\r\n            for (var x = 0; x < this.cols; x++) {\r\n                if (fillMapX[x] === false) {\r\n                    continue;\r\n                }\r\n                var line = this.matrix[y][x];\r\n                for (var z = 0; z < this.levels; z++) {\r\n                    if (line[z] !== null) {\r\n                        this.renderList.push(new SnowRenderItem(line[z], x, y, z));\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return this.renderList;\r\n    };\r\n    SnowMatrix.prototype.clear = function () {\r\n        this.matrix = this.getEmptyMatrix();\r\n        this.resetCache();\r\n        this.setInitialChangedCube();\r\n    };\r\n    SnowMatrix.prototype.calcFillMap = function () {\r\n        var _this = this;\r\n        this.fillMapYX = new Array(this.rows)\r\n            .fill(null)\r\n            .map(function () { return new Array(_this.cols).fill(false); });\r\n        this.fillMapY = new Array(this.rows).fill(false);\r\n        for (var y = 0; y < this.matrix.length; y++) {\r\n            var line1 = this.matrix[y];\r\n            for (var x = 0; x < line1.length; x++) {\r\n                var line2 = line1[x];\r\n                for (var z = 0; z < line2.length; z++) {\r\n                    if (line2[z] !== null) {\r\n                        this.fillMapYX[y][x] = true;\r\n                        this.fillMapY[y] = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    SnowMatrix.prototype.getEmptyMatrix = function () {\r\n        var _this = this;\r\n        return new Array(this.rows)\r\n            .fill(null)\r\n            .map(function () { return new Array(_this.cols)\r\n            .fill(null)\r\n            .map(function () { return new Array(_this.levels).fill(null); }); });\r\n    };\r\n    return SnowMatrix;\r\n}());\r\nexport { SnowMatrix };\r\n","import { MATRIX_COLS, SNOW_LIGHT_MAX_TRACE_PATH_X, SNOW_LIGHT_MAX_TRACE_PATH_Y } from \"game/config\";\r\nvar SnowLightnessCalc = /** @class */ (function () {\r\n    function SnowLightnessCalc(matrix) {\r\n        this.matrix = matrix;\r\n    }\r\n    SnowLightnessCalc.prototype.calc = function () {\r\n        var mat = this.matrix.matrix;\r\n        var fillMapYX = this.matrix.getFillMapYX();\r\n        var fillMapY = this.matrix.getFillMapY();\r\n        var cube = this.matrix.getChangedCubeWithRenderIndent();\r\n        for (var y = cube.y1; y <= cube.y2; y++) {\r\n            if (fillMapY[y] === false) {\r\n                continue;\r\n            }\r\n            var line1 = mat[y];\r\n            var fillMapX = fillMapYX[y];\r\n            for (var x = cube.x1; x <= cube.x2; x++) {\r\n                if (fillMapX[x] === false) {\r\n                    continue;\r\n                }\r\n                var line2 = line1[x];\r\n                for (var z = cube.z1; z <= cube.z2; z++) {\r\n                    if (line2[z] !== null) {\r\n                        var cell = line2[z];\r\n                        if (this.checkFreeCellsAtTheTop(y, x, z)) {\r\n                            // direct light from the top\r\n                            cell.lightness = 1;\r\n                            break;\r\n                        }\r\n                        var rightLight = 1;\r\n                        var topLight = 1;\r\n                        for (var l = 1; l <= 4; l++) {\r\n                            if (!this.checkFreeCellsAtTheRight(y, x, z - l)) {\r\n                                rightLight -= 0.25;\r\n                            }\r\n                            if (!this.checkFreeCellsAtTheTop(y, x, z - l)) {\r\n                                topLight -= 0.25;\r\n                            }\r\n                        }\r\n                        cell.lightness = 0.9 * ((rightLight + topLight) / 2);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    SnowLightnessCalc.prototype.checkFreeCellsAtTheTop = function (y, x, z) {\r\n        if (z < 0 || y < 0 || x < 0) {\r\n            return true;\r\n        }\r\n        var mat = this.matrix.matrix;\r\n        for (var y2 = y - 1, toY = Math.max(0, y - SNOW_LIGHT_MAX_TRACE_PATH_Y); y2 >= toY; y2--) {\r\n            if (mat[y2][x][z] !== null) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    SnowLightnessCalc.prototype.checkFreeCellsAtTheRight = function (y, x, z) {\r\n        if (z < 0 || y < 0 || x < 0) {\r\n            return true;\r\n        }\r\n        var mat = this.matrix.matrix;\r\n        for (var x2 = x + 1, toX = Math.min(MATRIX_COLS - 1, x + SNOW_LIGHT_MAX_TRACE_PATH_X); x2 <= toX; x2++) {\r\n            if (mat[y][x2][z] !== null) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    return SnowLightnessCalc;\r\n}());\r\nexport { SnowLightnessCalc };\r\n","var SnowDropShadowCalc = /** @class */ (function () {\r\n    function SnowDropShadowCalc(matrix) {\r\n        this.matrix = matrix;\r\n    }\r\n    SnowDropShadowCalc.prototype.calc = function () {\r\n        var mat = this.matrix.matrix;\r\n        var fillMapYX = this.matrix.getFillMapYX();\r\n        var fillMapY = this.matrix.getFillMapY();\r\n        var lastY = mat.length - 1;\r\n        var cube = this.matrix.getChangedCubeWithRenderIndent();\r\n        for (var y = cube.y1; y <= cube.y2; y++) {\r\n            if (fillMapY[y] === false) {\r\n                continue;\r\n            }\r\n            var line1 = mat[y];\r\n            var fillMapX = fillMapYX[y];\r\n            for (var x = cube.x1; x <= cube.x2; x++) {\r\n                if (fillMapX[x] === false) {\r\n                    continue;\r\n                }\r\n                var line2 = line1[x];\r\n                for (var z = cube.z1; z <= cube.z2; z++) {\r\n                    if (line2[z] !== null) {\r\n                        var cell = line2[z];\r\n                        // drop shadow if at least one neighbor cell in the same Z is missing\r\n                        cell.isDropShadow = (x !== 0 && !mat[y][x - 1][z]) // missing left cell\r\n                            || (x !== 0 && y !== lastY && !mat[y + 1][x - 1][z]) // missing bottom-left cell\r\n                            || (y !== lastY && !mat[y + 1][x][z]); // missing bottom cell;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return SnowDropShadowCalc;\r\n}());\r\nexport { SnowDropShadowCalc };\r\n","var SnowGroundingCalc = /** @class */ (function () {\r\n    function SnowGroundingCalc(matrix) {\r\n        this.matrix = matrix;\r\n    }\r\n    SnowGroundingCalc.prototype.calc = function () {\r\n        SnowGroundingCalc.version = (SnowGroundingCalc.version + 1) % 1000000;\r\n        this.markGroundCells();\r\n        this.fillYRay(this.matrix.rows - 2, -1);\r\n    };\r\n    SnowGroundingCalc.prototype.markGroundCells = function () {\r\n        // get ground layer\r\n        var lineX = this.matrix.matrix[this.matrix.rows - 1];\r\n        for (var x = 0; x < this.matrix.cols; x++) {\r\n            var lineZ = lineX[x];\r\n            for (var z = 0; z < this.matrix.levels; z++) {\r\n                var cell = lineZ[z];\r\n                if (cell !== null) {\r\n                    cell.groundingVersion = SnowGroundingCalc.version;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    SnowGroundingCalc.prototype.fillYRay = function (y0, step) {\r\n        var mat = this.matrix.matrix;\r\n        var fillMapY = this.matrix.getFillMapY();\r\n        var fillMapYX = this.matrix.getFillMapYX();\r\n        for (var y = y0; y < this.matrix.rows && y >= 0; y += step) {\r\n            if (!fillMapY[y]) {\r\n                break;\r\n            }\r\n            var lineX = mat[y];\r\n            var fillMapX = fillMapYX[y];\r\n            var changes = 0;\r\n            var flags = { yDirection: step, needChangeDirection: false };\r\n            for (var x = 0; x < this.matrix.cols; x++) {\r\n                if (!fillMapX[x]) {\r\n                    continue;\r\n                }\r\n                var lineZ = lineX[x];\r\n                for (var z = 0; z < this.matrix.levels; z++) {\r\n                    var cell = lineZ[z];\r\n                    if (cell === null || cell.groundingVersion === SnowGroundingCalc.version) {\r\n                        continue;\r\n                    }\r\n                    var parentCell = mat[y + (-step)][x][z];\r\n                    if (parentCell && parentCell.groundingVersion === SnowGroundingCalc.version) {\r\n                        cell.groundingVersion = SnowGroundingCalc.version;\r\n                        changes++;\r\n                        changes += this.fillXRay(y, x + 1, z, 1, flags);\r\n                        changes += this.fillXRay(y, x - 1, z, -1, flags);\r\n                    }\r\n                }\r\n            }\r\n            if (flags.needChangeDirection) {\r\n                this.fillYRay(y + (-step), -step);\r\n            }\r\n            if (changes === 0) {\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    SnowGroundingCalc.prototype.fillXRay = function (y, x0, z, step, flags) {\r\n        var mat = this.matrix.matrix;\r\n        var fillMapX = this.matrix.getFillMapYX()[y];\r\n        var lineX = this.matrix.matrix[y];\r\n        var changes = 0;\r\n        for (var x = x0; x < this.matrix.cols && x >= 0; x += step) {\r\n            if (!fillMapX[x]) {\r\n                break;\r\n            }\r\n            var cell = lineX[x][z];\r\n            if (cell === null || cell.groundingVersion === SnowGroundingCalc.version) {\r\n                break;\r\n            }\r\n            cell.groundingVersion = SnowGroundingCalc.version;\r\n            changes++;\r\n            if (!flags.needChangeDirection) {\r\n                var parentCell = mat[y + (-flags.yDirection)][x][z];\r\n                if (parentCell && parentCell.groundingVersion !== SnowGroundingCalc.version) {\r\n                    flags.needChangeDirection = true;\r\n                }\r\n            }\r\n            var lineZ = lineX[x];\r\n            var cell2 = lineZ[z + 1];\r\n            if (cell2 && cell2.groundingVersion !== SnowGroundingCalc.version) {\r\n                changes += this.fillZRay(y, x0, z + 1, 1, flags);\r\n            }\r\n            cell2 = lineZ[z - 1];\r\n            if (cell2 && cell2.groundingVersion !== SnowGroundingCalc.version) {\r\n                changes += this.fillZRay(y, x0, z - 1, -1, flags);\r\n            }\r\n        }\r\n        return changes;\r\n    };\r\n    SnowGroundingCalc.prototype.fillZRay = function (y, x, z0, step, flags) {\r\n        var _a, _b;\r\n        var mat = this.matrix.matrix;\r\n        var lineX = mat[y];\r\n        var lineZ = lineX[x];\r\n        var changes = 0;\r\n        for (var z = z0; z < this.matrix.levels && z >= 0; z += step) {\r\n            var cell = lineZ[z];\r\n            if (cell === null || cell.groundingVersion === SnowGroundingCalc.version) {\r\n                break;\r\n            }\r\n            cell.groundingVersion = SnowGroundingCalc.version;\r\n            changes++;\r\n            if (!flags.needChangeDirection) {\r\n                var parentCell = mat[y + (-flags.yDirection)][x][z];\r\n                if (parentCell && parentCell.groundingVersion !== SnowGroundingCalc.version) {\r\n                    flags.needChangeDirection = true;\r\n                }\r\n            }\r\n            var cell2 = (_a = lineX[x + 1]) === null || _a === void 0 ? void 0 : _a[z];\r\n            if (cell2 && cell2.groundingVersion !== SnowGroundingCalc.version) {\r\n                changes += this.fillXRay(y, x + 1, z, 1, flags);\r\n            }\r\n            cell2 = (_b = lineX[x - 1]) === null || _b === void 0 ? void 0 : _b[z];\r\n            if (cell2 && cell2.groundingVersion !== SnowGroundingCalc.version) {\r\n                changes += this.fillXRay(y, x - 1, z, -1, flags);\r\n            }\r\n        }\r\n        return changes;\r\n    };\r\n    SnowGroundingCalc.version = 2;\r\n    return SnowGroundingCalc;\r\n}());\r\nexport { SnowGroundingCalc };\r\n","import { MATRIX_FALLING_CELLS_PER_CALC } from \"game/config\";\r\nimport { SnowGroundingCalc } from \"game/snow/physics/snow-grounding-calc\";\r\nvar SnowGravityCalc = /** @class */ (function () {\r\n    function SnowGravityCalc(matrix, matrixTransform) {\r\n        this.matrix = matrix;\r\n        this.matrixTransform = matrixTransform;\r\n    }\r\n    SnowGravityCalc.prototype.calc = function () {\r\n        var hasChanges = false;\r\n        var mat = this.matrix.matrix;\r\n        var fillMapYX = this.matrix.getFillMapYX();\r\n        var fillMapY = this.matrix.getFillMapY();\r\n        var maxY = this.matrix.rows - 1;\r\n        for (var y = this.matrix.rows - 2; y >= 0; y--) {\r\n            if (!fillMapY[y]) {\r\n                continue;\r\n            }\r\n            var fillMapX = fillMapYX[y];\r\n            var lineX = mat[y];\r\n            for (var x = 0; x < this.matrix.cols; x++) {\r\n                if (!fillMapX[x]) {\r\n                    continue;\r\n                }\r\n                var lineZ = lineX[x];\r\n                for (var z = 0; z < this.matrix.levels; z++) {\r\n                    var cell = lineZ[z];\r\n                    if (cell === null) {\r\n                        continue;\r\n                    }\r\n                    if (cell.groundingVersion !== SnowGroundingCalc.version) {\r\n                        var toY = Math.min(maxY, y + MATRIX_FALLING_CELLS_PER_CALC);\r\n                        this.matrixTransform.setCell(toY, x, z, cell);\r\n                        for (var y2 = toY - 1; y2 >= y; y2--) {\r\n                            this.matrixTransform.setCell(y2, x, z, null);\r\n                        }\r\n                        hasChanges = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (hasChanges) {\r\n            this.matrix.resetCache();\r\n        }\r\n        return hasChanges;\r\n    };\r\n    return SnowGravityCalc;\r\n}());\r\nexport { SnowGravityCalc };\r\n","var SnowMatrixTransform = /** @class */ (function () {\r\n    function SnowMatrixTransform(matrix, history, props) {\r\n        if (history === void 0) { history = null; }\r\n        if (props === void 0) { props = null; }\r\n        this.matrix = matrix;\r\n        this.history = history;\r\n        this.props = props;\r\n    }\r\n    SnowMatrixTransform.prototype.setCell = function (y, x, z, cell) {\r\n        this.matrix.matrix[y][x][z] = cell;\r\n        this.updateChangedCube(x, y, z, cell);\r\n    };\r\n    SnowMatrixTransform.prototype.excludeNearest = function (mat, x, y) {\r\n        var removedLevels = 0;\r\n        for (var z = 0; z < this.matrix.levels && removedLevels < 2; z++) {\r\n            if (this.exclude(mat, x, y, z) > 0) {\r\n                removedLevels++;\r\n            }\r\n        }\r\n        this.matrix.resetCache();\r\n    };\r\n    SnowMatrixTransform.prototype.exclude = function (mat, x, y, z) {\r\n        var matDst = this.matrix.matrix;\r\n        var matSrc = mat.matrix;\r\n        var fromX = x - (mat.cols >> 1);\r\n        var fromY = y - (mat.rows >> 1);\r\n        var fromZ = z - (mat.levels >> 1);\r\n        var toX = fromX + mat.cols;\r\n        var toY = fromY + mat.rows;\r\n        var toZ = fromZ + mat.levels;\r\n        var deleted = 0;\r\n        for (var y2 = fromY; y2 < toY; y2++) {\r\n            if (y2 >= this.matrix.rows || y2 < 0) {\r\n                continue;\r\n            }\r\n            for (var x2 = fromX; x2 < toX; x2++) {\r\n                if (x2 >= this.matrix.cols || x2 < 0) {\r\n                    continue;\r\n                }\r\n                for (var z2 = fromZ; z2 < toZ; z2++) {\r\n                    if (z2 >= this.matrix.levels || z2 < 0) {\r\n                        continue;\r\n                    }\r\n                    if (matSrc[y2 - fromY][x2 - fromX][z2 - fromZ] !== null && matDst[y2][x2][z2] !== null) {\r\n                        this.updateChangedCube(x2, y2, z2, matDst[y2][x2][z2]);\r\n                        matDst[y2][x2][z2] = null;\r\n                        deleted++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return deleted;\r\n    };\r\n    SnowMatrixTransform.prototype.merge = function (mat, x, y, z) {\r\n        var matDst = this.matrix.matrix;\r\n        var matSrc = mat.matrix;\r\n        for (var y2 = 0; y2 < mat.rows; y2++) {\r\n            var dy = y2 + y;\r\n            if (dy >= this.matrix.rows || dy < 0) {\r\n                continue;\r\n            }\r\n            for (var x2 = 0; x2 < mat.cols; x2++) {\r\n                var dx = x2 + x;\r\n                if (dx >= this.matrix.cols || dx < 0) {\r\n                    continue;\r\n                }\r\n                for (var z2 = 0; z2 < mat.levels; z2++) {\r\n                    var dz = z2 + z;\r\n                    if (dz >= this.matrix.levels || dz < 0) {\r\n                        continue;\r\n                    }\r\n                    if (matSrc[y2][x2][z2] !== null) {\r\n                        matDst[dy][dx][dz] = matSrc[y2][x2][z2];\r\n                        this.updateChangedCube(dx, dy, dz);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.matrix.resetCache();\r\n    };\r\n    SnowMatrixTransform.prototype.updateChangedCube = function (x, y, z, cell) {\r\n        if (cell === void 0) { cell = null; }\r\n        var cube = this.matrix.changedCube;\r\n        if (y < cube.y1) {\r\n            cube.y1 = y;\r\n        }\r\n        if (y > cube.y2) {\r\n            cube.y2 = y;\r\n        }\r\n        if (x < cube.x1) {\r\n            cube.x1 = x;\r\n        }\r\n        if (x > cube.x2) {\r\n            cube.x2 = x;\r\n        }\r\n        if (z < cube.z1) {\r\n            cube.z1 = z;\r\n        }\r\n        if (z > cube.z2) {\r\n            cube.z2 = z;\r\n        }\r\n        if (cell !== null && cell.prop > 0) {\r\n            var img = this.props.getPropByCode(cell.prop);\r\n            if (img) {\r\n                var w = img.naturalWidth >> 1;\r\n                var h = img.naturalHeight >> 1;\r\n                var x1 = x - Math.floor(w / this.matrix.cellSize);\r\n                var x2 = x1 + Math.ceil(w / this.matrix.cellSize);\r\n                var y1 = y - Math.floor(h / this.matrix.cellSize);\r\n                var y2 = y1 + Math.ceil(h / this.matrix.cellSize);\r\n                this.updateChangedCube(x1, y1, z);\r\n                this.updateChangedCube(x2, y2, z);\r\n            }\r\n        }\r\n    };\r\n    return SnowMatrixTransform;\r\n}());\r\nexport { SnowMatrixTransform };\r\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport { SnowLightnessCalc } from \"game/snow/physics/snow-lightness-calc\";\r\nimport { SnowDropShadowCalc } from \"game/snow/physics/snow-drop-shadow-calc\";\r\nimport { SnowGroundingCalc } from \"game/snow/physics/snow-grounding-calc\";\r\nimport { SnowGravityCalc } from \"game/snow/physics/snow-gravity-calc\";\r\nimport { MATRIX_PHYSICS_CALC_FRAME_DELAY } from \"game/config\";\r\nimport { SnowMatrixTransform } from \"game/snow/snow-matrix-transform\";\r\nvar SnowScene = /** @class */ (function () {\r\n    function SnowScene(matrix, matrixHistory, renderer) {\r\n        var _this = this;\r\n        this.matrix = matrix;\r\n        this.matrixHistory = matrixHistory;\r\n        this.renderer = renderer;\r\n        this.physicsCalcTimerId = 0;\r\n        this.needRender = true;\r\n        this.needResetChangedArea = false;\r\n        this.animationRequestId = 0;\r\n        this.render = function () {\r\n            cancelAnimationFrame(_this.animationRequestId);\r\n            if (!_this.needRender) {\r\n                _this.animationRequestId = requestAnimationFrame(_this.render);\r\n                return;\r\n            }\r\n            _this.needRender = false;\r\n            var startTime = performance.now();\r\n            _this.renderer.renderItems(__spreadArray([], _this.matrix.getRenderList(), true));\r\n            console.log('render', performance.now() - startTime);\r\n            _this.animationRequestId = requestAnimationFrame(_this.render);\r\n            if (_this.needResetChangedArea) {\r\n                _this.matrix.resetChangedArea();\r\n                _this.needResetChangedArea = false;\r\n            }\r\n        };\r\n        var transform = new SnowMatrixTransform(this.matrix, this.matrixHistory);\r\n        this.dropShadowCalc = new SnowDropShadowCalc(this.matrix);\r\n        this.lightnessCalc = new SnowLightnessCalc(this.matrix);\r\n        this.groupsCalc = new SnowGroundingCalc(this.matrix);\r\n        this.gravityCalc = new SnowGravityCalc(this.matrix, transform);\r\n        this.calcShadows();\r\n        this.render();\r\n    }\r\n    SnowScene.prototype.requestRender = function () {\r\n        this.calcShadows();\r\n        this.requestPhysicsCalc(MATRIX_PHYSICS_CALC_FRAME_DELAY);\r\n        this.needRender = true;\r\n    };\r\n    SnowScene.prototype.calcShadows = function () {\r\n        var startTime = performance.now();\r\n        this.dropShadowCalc.calc();\r\n        this.lightnessCalc.calc();\r\n        console.log('shadows', performance.now() - startTime);\r\n        this.needRender = true;\r\n    };\r\n    SnowScene.prototype.calcPhysics = function () {\r\n        var startTime = performance.now();\r\n        var needCalcAgain = false;\r\n        this.groupsCalc.calc();\r\n        needCalcAgain || (needCalcAgain = this.gravityCalc.calc());\r\n        if (needCalcAgain) {\r\n            this.requestPhysicsCalc(MATRIX_PHYSICS_CALC_FRAME_DELAY);\r\n        }\r\n        this.calcShadows();\r\n        this.needRender = true;\r\n        this.needResetChangedArea = true;\r\n        console.log('physics', performance.now() - startTime);\r\n    };\r\n    SnowScene.prototype.requestPhysicsCalc = function (timeout) {\r\n        clearTimeout(this.physicsCalcTimerId);\r\n        this.physicsCalcTimerId = window.setTimeout(this.calcPhysics.bind(this), timeout);\r\n    };\r\n    return SnowScene;\r\n}());\r\nexport { SnowScene };\r\n","import { IMG_PROPS_SCALE, MATRIX_BALL_MIN_RADIUS, MATRIX_LEVELS, RENDER_AREA_MATRIX_INDENT_CELLS, SCALE, SNOW_BLUR_SIZE, SNOW_DARK_COLOR, SNOW_DROP_SHADOW_DISTANCE_BY_RADIUS_FACTOR, SNOW_DROP_SHADOW_RADIUS_FACTOR, SNOW_LIGHT_COLOR, SNOW_SHADOW_DARK_COLOR, SNOW_SHADOW_LIGHT_COLOR } from \"game/config\";\r\nimport { convertColorDecToHex, getInterpolatedColor, mixColors } from \"game/helpers/color\";\r\nvar MATH_PI_2 = Math.PI * 2;\r\nvar SnowRenderer = /** @class */ (function () {\r\n    function SnowRenderer(matrix, options, props, keepOriginalScale) {\r\n        if (keepOriginalScale === void 0) { keepOriginalScale = false; }\r\n        this.matrix = matrix;\r\n        this.options = options;\r\n        this.props = props;\r\n        this.canvas = document.createElement('canvas');\r\n        this.canvas.width = this.matrix.cols * this.matrix.cellSize;\r\n        this.canvas.height = this.matrix.rows * this.matrix.cellSize;\r\n        if (!keepOriginalScale) {\r\n            this.canvas.style.width = \"\".concat(this.canvas.width / SCALE, \"px\");\r\n            this.canvas.style.height = \"\".concat(this.canvas.height / SCALE, \"px\");\r\n        }\r\n        this.context = this.canvas.getContext('2d');\r\n        this.tempCanvas = document.createElement('canvas');\r\n        this.tempCanvas.width = this.canvas.width;\r\n        this.tempCanvas.height = this.canvas.height;\r\n        this.tempContext = this.tempCanvas.getContext('2d');\r\n        this.blurCanvas = document.createElement('canvas');\r\n        this.blurCanvas.width = this.tempCanvas.width;\r\n        this.blurCanvas.height = this.tempCanvas.height;\r\n        this.blurContext = this.blurCanvas.getContext('2d');\r\n    }\r\n    SnowRenderer.prototype.renderItems = function (items) {\r\n        console.log('Render items: ' + items.length);\r\n        if (!this.matrix.hasChangedArea()) {\r\n            return;\r\n        }\r\n        var mat = this.matrix;\r\n        var cube = mat.changedCube;\r\n        var renderFromX = Math.max(0, (cube.x1 - RENDER_AREA_MATRIX_INDENT_CELLS) * mat.cellSize);\r\n        var renderFromY = Math.max(0, (cube.y1 - RENDER_AREA_MATRIX_INDENT_CELLS) * mat.cellSize);\r\n        var renderWidth = Math.min(this.tempCanvas.width, (cube.x2 + RENDER_AREA_MATRIX_INDENT_CELLS) * mat.cellSize)\r\n            - renderFromX;\r\n        var renderHeight = Math.min(this.tempCanvas.height, (cube.y2 + RENDER_AREA_MATRIX_INDENT_CELLS) * mat.cellSize)\r\n            - renderFromY;\r\n        items = this.filterRenderList(items);\r\n        var layers = SnowRenderer.splitOnLayers(items);\r\n        this.tempContext.clearRect(0, 0, this.tempCanvas.width, this.tempCanvas.height);\r\n        // save initial state\r\n        this.tempContext.save();\r\n        for (var l = MATRIX_LEVELS; l >= 0; l--) {\r\n            var layer = layers[l];\r\n            if (layer.length === 0) {\r\n                continue;\r\n            }\r\n            //this.renderShadow(layer);\r\n            this.renderCells(layer);\r\n        }\r\n        this.applyBlur(renderFromX, renderFromY, renderWidth, renderHeight);\r\n        for (var l = MATRIX_LEVELS; l >= 0; l--) {\r\n            var layer = layers[l];\r\n            if (layer.length === 0) {\r\n                continue;\r\n            }\r\n            this.renderProps(layer);\r\n        }\r\n        // restore initial state\r\n        this.tempContext.restore();\r\n        this.context.clearRect(renderFromX, renderFromY, renderWidth, renderHeight);\r\n        this.context.drawImage(this.tempCanvas, renderFromX, renderFromY, renderWidth, renderHeight, renderFromX, renderFromY, renderWidth, renderHeight);\r\n        if (this.options.showRenderAreas) {\r\n            this.renderArea(renderFromX, renderFromY, renderWidth, renderHeight);\r\n        }\r\n    };\r\n    SnowRenderer.prototype.applyBlur = function (x, y, width, height) {\r\n        this.blurContext.clearRect(x, y, width, height);\r\n        this.blurContext.drawImage(this.tempCanvas, x, y, width, height, x, y, width, height);\r\n        this.tempContext.save();\r\n        this.tempContext.filter = \"blur(\".concat(SNOW_BLUR_SIZE, \"px)\");\r\n        this.tempContext.globalCompositeOperation = 'source-atop';\r\n        this.tempContext.drawImage(this.blurCanvas, x, y, width, height, x, y, width, height);\r\n        this.tempContext.restore();\r\n    };\r\n    SnowRenderer.prototype.renderShadow = function (layer) {\r\n        var mat = this.matrix;\r\n        this.tempContext.globalCompositeOperation = 'source-atop';\r\n        for (var i = 0; i < layer.length; i++) {\r\n            var item = layer[i];\r\n            if (!item.cell.isDropShadow) {\r\n                continue;\r\n            }\r\n            this.tempContext.save();\r\n            this.tempContext.translate(item.x * mat.cellSize + mat.cellSizeHalf, item.y * mat.cellSize + mat.cellSizeHalf);\r\n            this.renderCellShadow(item.cell);\r\n            this.tempContext.restore();\r\n        }\r\n    };\r\n    SnowRenderer.prototype.renderCells = function (layer) {\r\n        var mat = this.matrix;\r\n        this.tempContext.globalCompositeOperation = 'source-over';\r\n        for (var i = 0; i < layer.length; i++) {\r\n            var item = layer[i];\r\n            this.tempContext.save();\r\n            this.tempContext.translate(item.x * mat.cellSize + mat.cellSizeHalf, item.y * mat.cellSize + mat.cellSizeHalf);\r\n            this.renderCell(item.cell);\r\n            this.tempContext.restore();\r\n        }\r\n    };\r\n    SnowRenderer.prototype.renderProps = function (layer) {\r\n        var mat = this.matrix;\r\n        this.tempContext.globalCompositeOperation = 'source-over';\r\n        for (var i = 0; i < layer.length; i++) {\r\n            var item = layer[i];\r\n            if (!item.cell.prop) {\r\n                continue;\r\n            }\r\n            this.tempContext.save();\r\n            this.tempContext.translate(item.x * mat.cellSize + mat.cellSizeHalf, item.y * mat.cellSize + mat.cellSizeHalf);\r\n            this.renderCellProps(item.cell);\r\n            this.tempContext.restore();\r\n        }\r\n    };\r\n    SnowRenderer.prototype.renderArea = function (x, y, width, height) {\r\n        this.context.save();\r\n        this.context.beginPath();\r\n        this.context.strokeStyle = '#ff00ff';\r\n        this.context.rect(x, y, width, height);\r\n        this.context.closePath();\r\n        this.context.stroke();\r\n        this.context.restore();\r\n    };\r\n    SnowRenderer.prototype.filterRenderList = function (items) {\r\n        var _this = this;\r\n        var cube = this.matrix.changedCube;\r\n        var shift = RENDER_AREA_MATRIX_INDENT_CELLS << 1;\r\n        var minX = cube.x1 - shift;\r\n        var maxX = cube.x2 + shift;\r\n        var minY = cube.y1 - shift;\r\n        var maxY = cube.y2 + shift;\r\n        return items.filter(function (item) {\r\n            if (item.cell.prop > 0) {\r\n                var img = _this.props.getPropByCode(item.cell.prop);\r\n                if (img) {\r\n                    var w = img.naturalWidth >> 1;\r\n                    var h = img.naturalHeight >> 1;\r\n                    var x1 = item.x - Math.floor(w / _this.matrix.cellSize);\r\n                    var x2 = x1 + Math.ceil(w / _this.matrix.cellSize);\r\n                    var y1 = item.y - Math.floor(h / _this.matrix.cellSize);\r\n                    var y2 = y1 + Math.ceil(h / _this.matrix.cellSize);\r\n                    if (x1 <= maxX && x2 >= minX && y1 <= maxY && y2 >= minY) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return item.x >= minX && item.x <= maxX\r\n                && item.y >= minY && item.y <= maxY;\r\n        });\r\n    };\r\n    SnowRenderer.splitOnLayers = function (items) {\r\n        var layers = new Array(MATRIX_LEVELS + 1).fill(null).map(function () { return []; });\r\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n            var item = items_1[_i];\r\n            layers[item.z].push(item);\r\n        }\r\n        return layers;\r\n    };\r\n    SnowRenderer.prototype.renderCell = function (cell) {\r\n        var color = getInterpolatedColor(cell.lightness - cell.darkness, SNOW_LIGHT_COLOR, SNOW_DARK_COLOR);\r\n        if (cell.colorLight !== null && cell.colorDark !== null) {\r\n            color = mixColors(getInterpolatedColor(cell.lightness - cell.darkness, cell.colorLight, cell.colorDark), color);\r\n        }\r\n        this.tempContext.fillStyle = convertColorDecToHex(color);\r\n        this.tempContext.beginPath();\r\n        this.tempContext.arc(0, 0, MATRIX_BALL_MIN_RADIUS + cell.extraRadius, 0, MATH_PI_2);\r\n        this.tempContext.closePath();\r\n        this.tempContext.fill();\r\n    };\r\n    SnowRenderer.prototype.renderCellShadow = function (cell) {\r\n        if (!cell.isDropShadow) {\r\n            return;\r\n        }\r\n        var radius = MATRIX_BALL_MIN_RADIUS + cell.extraRadius;\r\n        var offset = radius * SNOW_DROP_SHADOW_DISTANCE_BY_RADIUS_FACTOR;\r\n        var color = getInterpolatedColor(cell.lightness - cell.darkness, SNOW_SHADOW_LIGHT_COLOR, SNOW_SHADOW_DARK_COLOR);\r\n        if (cell.colorLight !== null && cell.colorDark !== null) {\r\n            color = mixColors(getInterpolatedColor(cell.lightness - cell.darkness, cell.colorLight, cell.colorDark), color);\r\n        }\r\n        this.tempContext.fillStyle = convertColorDecToHex(color);\r\n        this.tempContext.beginPath();\r\n        this.tempContext.arc(-offset, offset, radius * SNOW_DROP_SHADOW_RADIUS_FACTOR, 0, MATH_PI_2);\r\n        this.tempContext.closePath();\r\n        this.tempContext.fill();\r\n    };\r\n    SnowRenderer.prototype.renderCellProps = function (cell) {\r\n        if (!cell.prop) {\r\n            return;\r\n        }\r\n        var img = this.props.getPropByCode(cell.prop);\r\n        if (!img) {\r\n            return;\r\n        }\r\n        var width = img.naturalWidth / IMG_PROPS_SCALE;\r\n        var height = img.naturalHeight / IMG_PROPS_SCALE;\r\n        this.tempContext.drawImage(img, -Math.floor(width / 2), -Math.floor(height / 2), width, height);\r\n    };\r\n    return SnowRenderer;\r\n}());\r\nexport { SnowRenderer };\r\n","import { IMG_PROPS_SCALE, SCALE } from \"game/config\";\r\nvar MATH_PI2 = Math.PI * 2;\r\nvar SnowCursor = /** @class */ (function () {\r\n    function SnowCursor(renderer, matrix) {\r\n        this.matrix = matrix;\r\n        this.canvas = document.createElement('canvas');\r\n        this.canvas.width = renderer.canvas.width;\r\n        this.canvas.height = renderer.canvas.height;\r\n        this.canvas.style.width = \"\".concat(this.canvas.width / SCALE, \"px\");\r\n        this.canvas.style.height = \"\".concat(this.canvas.height / SCALE, \"px\");\r\n        this.context = this.canvas.getContext('2d');\r\n    }\r\n    SnowCursor.prototype.clear = function () {\r\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    };\r\n    SnowCursor.prototype.drawCircle = function (x, y, radius, color) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        this.clear();\r\n        this.context.save();\r\n        this.context.strokeStyle = color;\r\n        this.context.lineWidth = 2;\r\n        this.context.beginPath();\r\n        this.context.arc(x, y, radius, MATH_PI2, 0);\r\n        this.context.closePath();\r\n        this.context.stroke();\r\n        this.context.restore();\r\n    };\r\n    SnowCursor.prototype.drawTriangle = function (x, y, width, height, color) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        this.clear();\r\n        this.context.save();\r\n        this.context.strokeStyle = color;\r\n        this.context.lineWidth = 2;\r\n        this.context.beginPath();\r\n        this.context.moveTo(x + (width >> 1), y);\r\n        this.context.lineTo(x + width, y + height);\r\n        this.context.lineTo(x, y + height);\r\n        this.context.closePath();\r\n        this.context.stroke();\r\n        this.context.restore();\r\n    };\r\n    SnowCursor.prototype.drawRect = function (x, y, width, height, color) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        this.clear();\r\n        this.context.save();\r\n        this.context.strokeStyle = color;\r\n        this.context.lineWidth = 2;\r\n        this.context.beginPath();\r\n        this.context.rect(x, y, width, height);\r\n        this.context.closePath();\r\n        this.context.stroke();\r\n        this.context.restore();\r\n    };\r\n    SnowCursor.prototype.drawImage = function (x, y, img) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var width2 = img.naturalWidth / IMG_PROPS_SCALE;\r\n        var height2 = img.naturalHeight / IMG_PROPS_SCALE;\r\n        this.clear();\r\n        this.context.drawImage(img, x - Math.floor(width2 / 2), y - Math.floor(height2 / 2), width2, height2);\r\n    };\r\n    SnowCursor.prototype.correctPosition = function (v) {\r\n        return Math.round(v / this.matrix.cellSize) * this.matrix.cellSize;\r\n    };\r\n    return SnowCursor;\r\n}());\r\nexport { SnowCursor };\r\n","var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport { MATRIX_BALL_MAX_RADIUS, MATRIX_BALL_MIN_RADIUS, SNOW_MAX_DARKNESS } from \"game/config\";\r\nimport { SnowGroundingCalc } from \"game/snow/physics/snow-grounding-calc\";\r\nvar SnowCell = /** @class */ (function () {\r\n    function SnowCell() {\r\n        this.hash = '';\r\n        this.extraRadius = 0;\r\n        this.lightness = 1;\r\n        this.darkness = 0;\r\n        this.isDropShadow = false;\r\n        this.prop = 0;\r\n        this.colorLight = null;\r\n        this.colorDark = null;\r\n        this.extraRadius = Math.random() * (MATRIX_BALL_MAX_RADIUS - MATRIX_BALL_MIN_RADIUS);\r\n        this.darkness = Math.random() * SNOW_MAX_DARKNESS;\r\n        this.groundingVersion = SnowGroundingCalc.version;\r\n        SnowCell.updateCellHash(this);\r\n    }\r\n    SnowCell.updateCellHash = function (cell) {\r\n        cell.hash = __spreadArray(__spreadArray([\r\n            (cell.extraRadius * 1000) | 0,\r\n            (cell.darkness * 100) | 0,\r\n            cell.prop\r\n        ], (cell.colorLight || [0, 0, 0, 0]), true), (cell.colorDark || [0, 0, 0, 0]), true).join(',');\r\n    };\r\n    return SnowCell;\r\n}());\r\nexport { SnowCell };\r\n","import { SnowCell } from \"game/snow/snow-cell\";\r\nimport { SnowMatrix } from \"game/snow/snow-matrix\";\r\nvar SnowCircle = /** @class */ (function () {\r\n    function SnowCircle() {\r\n    }\r\n    SnowCircle.prototype.generateZAxis = function (radius) {\r\n        var d = (radius << 1) + 1;\r\n        var mat = new SnowMatrix(d, d, 1);\r\n        var center = radius;\r\n        var lastX = null, lastY = null;\r\n        for (var a = 90; a < 270; a++) {\r\n            var angle = a * Math.PI / 180;\r\n            var x = Math.round(Math.cos(angle) * radius);\r\n            var y = Math.round(Math.sin(angle) * -radius);\r\n            if (x === lastX && y === lastY) {\r\n                continue;\r\n            }\r\n            lastX = x;\r\n            lastY = y;\r\n            for (var x2 = x, toX = Math.abs(x); x2 < toX; x2++) {\r\n                mat.matrix[center + y][center + x2][0] = new SnowCell();\r\n            }\r\n        }\r\n        return mat;\r\n    };\r\n    SnowCircle.prototype.generateYAxis = function (radius) {\r\n        var d = (radius << 1) + 1;\r\n        var mat = new SnowMatrix(d, 1, d);\r\n        var center = radius;\r\n        var lastX = null, lastZ = null;\r\n        for (var a = 90; a < 270; a++) {\r\n            var angle = a * Math.PI / 180;\r\n            var x = Math.round(Math.cos(angle) * radius);\r\n            var z = Math.round(Math.sin(angle) * -radius);\r\n            if (x === lastX && z === lastZ) {\r\n                continue;\r\n            }\r\n            lastX = x;\r\n            lastZ = z;\r\n            for (var x2 = x, toX = Math.abs(x); x2 < toX; x2++) {\r\n                mat.matrix[0][center + x2][center + z] = new SnowCell();\r\n            }\r\n        }\r\n        return mat;\r\n    };\r\n    return SnowCircle;\r\n}());\r\nexport { SnowCircle };\r\n","import { SnowMatrix } from \"game/snow/snow-matrix\";\r\nimport { SnowCircle } from \"game/snow/shapes/snow-circle\";\r\nimport { SnowMatrixTransform } from \"game/snow/snow-matrix-transform\";\r\nvar SnowSphere = /** @class */ (function () {\r\n    function SnowSphere() {\r\n        this.reduceCellsFactor = 0;\r\n    }\r\n    SnowSphere.prototype.setReduceCellsFactor = function (factor) {\r\n        this.reduceCellsFactor = Math.max(0, Math.min(0.7, factor));\r\n        return this;\r\n    };\r\n    SnowSphere.prototype.generate = function (radius) {\r\n        var d = (radius << 1) + 1;\r\n        var mat = new SnowMatrix(d, d, d);\r\n        var transform = new SnowMatrixTransform(mat);\r\n        for (var z = 0; z < d; z++) {\r\n            var angle = Math.PI * (z / (d - 1));\r\n            var r = Math.round(radius * Math.sin(angle));\r\n            if (r <= 0) {\r\n                continue;\r\n            }\r\n            var circleMat = new SnowCircle().generateZAxis(r);\r\n            transform.merge(circleMat, radius - (circleMat.cols >> 1), radius - (circleMat.rows >> 1), z);\r\n        }\r\n        this.reduceCells(mat);\r\n        return mat;\r\n    };\r\n    SnowSphere.prototype.reduceCells = function (mat) {\r\n        if (this.reduceCellsFactor === 0) {\r\n            return;\r\n        }\r\n        for (var y = 0; y < mat.rows; y++) {\r\n            var lineX = mat.matrix[y];\r\n            for (var x = 0; x < mat.cols; x++) {\r\n                var lineZ = lineX[x];\r\n                for (var z = 0; z < mat.levels; z++) {\r\n                    if (lineZ[z] !== null && Math.random() < this.reduceCellsFactor) {\r\n                        lineZ[z] = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return SnowSphere;\r\n}());\r\nexport { SnowSphere };\r\n","import { CURSOR_ADD_COLOR, MATRIX_LEVELS, SCALE } from \"game/config\";\r\nimport { SnowSphere } from \"game/snow/shapes/snow-sphere\";\r\nvar AddBallTool = /** @class */ (function () {\r\n    function AddBallTool(matrix, matrixTransform, cursor) {\r\n        this.matrix = matrix;\r\n        this.matrixTransform = matrixTransform;\r\n        this.cursor = cursor;\r\n        this.size = 20;\r\n        this.observer = null;\r\n    }\r\n    AddBallTool.prototype.observe = function (func) {\r\n        this.observer = func;\r\n    };\r\n    AddBallTool.prototype.click = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var _a = this.matrix.getMatrixXYByClientXY(x, y), newX = _a.x, newY = _a.y;\r\n        this.addSphere(newX, newY);\r\n    };\r\n    AddBallTool.prototype.move = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        this.cursor.drawCircle(x, y, this.size * this.matrix.cellSize, CURSOR_ADD_COLOR);\r\n    };\r\n    AddBallTool.prototype.leave = function () {\r\n        this.cursor.clear();\r\n    };\r\n    AddBallTool.prototype.correctPosition = function (v) {\r\n        v = v * SCALE;\r\n        var step = this.matrix.cellSize * 2;\r\n        return Math.round(v / step) * step;\r\n    };\r\n    AddBallTool.prototype.addSphere = function (x, y) {\r\n        this.matrixTransform.merge(new SnowSphere().generate(this.size), x - this.size, y - this.size, (MATRIX_LEVELS >> 1) - this.size);\r\n        if (this.observer !== null) {\r\n            this.observer();\r\n        }\r\n    };\r\n    return AddBallTool;\r\n}());\r\nexport { AddBallTool };\r\n","import { SnowMatrix } from \"game/snow/snow-matrix\";\r\nimport { SnowCell } from \"game/snow/snow-cell\";\r\nvar SnowCube = /** @class */ (function () {\r\n    function SnowCube() {\r\n    }\r\n    SnowCube.prototype.generate = function (size) {\r\n        var mat = new SnowMatrix(size, size, size);\r\n        for (var y = 0; y < mat.rows; y++) {\r\n            var lineX = mat.matrix[y];\r\n            for (var x = 0; x < mat.cols; x++) {\r\n                var lineZ = lineX[x];\r\n                for (var z = 0; z < mat.levels; z++) {\r\n                    lineZ[z] = new SnowCell();\r\n                }\r\n            }\r\n        }\r\n        return mat;\r\n    };\r\n    return SnowCube;\r\n}());\r\nexport { SnowCube };\r\n","import { CURSOR_ADD_COLOR, MATRIX_LEVELS, SCALE } from \"game/config\";\r\nimport { SnowCube } from \"game/snow/shapes/snow-cube\";\r\nvar AddCubeTool = /** @class */ (function () {\r\n    function AddCubeTool(matrix, matrixTransform, cursor) {\r\n        this.matrix = matrix;\r\n        this.matrixTransform = matrixTransform;\r\n        this.cursor = cursor;\r\n        this.size = 40;\r\n        this.observer = null;\r\n    }\r\n    AddCubeTool.prototype.observe = function (func) {\r\n        this.observer = func;\r\n    };\r\n    AddCubeTool.prototype.click = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var _a = this.matrix.getMatrixXYByClientXY(x, y), newX = _a.x, newY = _a.y;\r\n        this.addCube(newX, newY);\r\n    };\r\n    AddCubeTool.prototype.move = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var size = this.size * this.matrix.cellSize;\r\n        var sizeHalf = size / 2;\r\n        this.cursor.drawRect(x - sizeHalf, y - sizeHalf, size, size, CURSOR_ADD_COLOR);\r\n    };\r\n    AddCubeTool.prototype.leave = function () {\r\n        this.cursor.clear();\r\n    };\r\n    AddCubeTool.prototype.correctPosition = function (v) {\r\n        v = v * SCALE;\r\n        var step = this.matrix.cellSize * 2;\r\n        return Math.round(v / step) * step;\r\n    };\r\n    AddCubeTool.prototype.addCube = function (x, y) {\r\n        var cube = new SnowCube().generate(this.size - 1);\r\n        // make rounding (remove corners)\r\n        AddCubeTool.roundCorners(cube);\r\n        var sizeHalf = this.size / 2;\r\n        this.matrixTransform.merge(cube, Math.round((x - sizeHalf) / 2) * 2, Math.round((y - sizeHalf) / 2) * 2, Math.round(((MATRIX_LEVELS >> 1) - sizeHalf) / 2) * 2);\r\n        if (this.observer !== null) {\r\n            this.observer();\r\n        }\r\n    };\r\n    AddCubeTool.roundCorners = function (cube) {\r\n        var maxY = cube.rows - 1;\r\n        var maxX = cube.cols - 1;\r\n        var maxZ = cube.levels - 1;\r\n        for (var y = 0; y < cube.rows; y++) {\r\n            cube.matrix[y][0][0] = null;\r\n            cube.matrix[y][0][maxZ] = null;\r\n            cube.matrix[y][maxX][0] = null;\r\n            cube.matrix[y][maxX][maxZ] = null;\r\n        }\r\n        for (var x = 0; x < cube.cols; x++) {\r\n            cube.matrix[0][x][0] = null;\r\n            cube.matrix[0][x][maxZ] = null;\r\n            cube.matrix[maxY][x][0] = null;\r\n            cube.matrix[maxY][x][maxZ] = null;\r\n        }\r\n    };\r\n    return AddCubeTool;\r\n}());\r\nexport { AddCubeTool };\r\n","import { SnowSphere } from \"game/snow/shapes/snow-sphere\";\r\nimport { CURSOR_DEL_COLOR, SCALE } from \"game/config\";\r\nvar EraseBallTool = /** @class */ (function () {\r\n    function EraseBallTool(matrix, matrixTransform, cursor) {\r\n        this.matrix = matrix;\r\n        this.matrixTransform = matrixTransform;\r\n        this.cursor = cursor;\r\n        this.size = 7;\r\n        this.observer = null;\r\n    }\r\n    EraseBallTool.prototype.observe = function (func) {\r\n        this.observer = func;\r\n    };\r\n    EraseBallTool.prototype.click = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var _a = this.matrix.getMatrixXYByClientXY(x, y), newX = _a.x, newY = _a.y;\r\n        this.excludeSphere(newX, newY);\r\n    };\r\n    EraseBallTool.prototype.move = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        this.cursor.drawCircle(x, y, this.size * this.matrix.cellSize, CURSOR_DEL_COLOR);\r\n    };\r\n    EraseBallTool.prototype.leave = function () {\r\n        this.cursor.clear();\r\n    };\r\n    EraseBallTool.prototype.correctPosition = function (v) {\r\n        v = v * SCALE;\r\n        var step = this.matrix.cellSize * 2;\r\n        return Math.round(v / step) * step;\r\n    };\r\n    EraseBallTool.prototype.excludeSphere = function (x, y) {\r\n        this.matrixTransform.excludeNearest(new SnowSphere().generate(this.size), x, y);\r\n        if (this.observer !== null) {\r\n            this.observer();\r\n        }\r\n    };\r\n    return EraseBallTool;\r\n}());\r\nexport { EraseBallTool };\r\n","import { IMG_PROPS_SCALE, SCALE } from \"game/config\";\r\nimport { SnowCell } from \"game/snow/snow-cell\";\r\nvar AddPropTool = /** @class */ (function () {\r\n    function AddPropTool(matrix, matrixHistory, cursor, props) {\r\n        this.matrix = matrix;\r\n        this.matrixHistory = matrixHistory;\r\n        this.cursor = cursor;\r\n        this.props = props;\r\n        this.img = null;\r\n        this.code = 0;\r\n        this.observer = null;\r\n    }\r\n    AddPropTool.prototype.setPropCode = function (code) {\r\n        this.code = code;\r\n        this.img = this.props.getPropByCode(code);\r\n    };\r\n    AddPropTool.prototype.observe = function (func) {\r\n        this.observer = func;\r\n    };\r\n    AddPropTool.prototype.click = function (x, y) {\r\n        var _a;\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var _b = this.matrix.getMatrixXYByClientXY(x, y), newX = _b.x, newY = _b.y;\r\n        var colsHalf = Math.ceil(this.img.naturalWidth / IMG_PROPS_SCALE / this.matrix.cellSize / 2);\r\n        var rowsHalf = Math.ceil(this.img.naturalHeight / IMG_PROPS_SCALE / this.matrix.cellSize / 2);\r\n        var line = this.matrix.matrix[newY][newX];\r\n        for (var z = 0; z < this.matrix.levels; z++) {\r\n            if (line[z] !== null) {\r\n                line[z].prop = this.code;\r\n                SnowCell.updateCellHash(line[z]);\r\n                this.matrix.mergeChangedCube({\r\n                    x1: newX - colsHalf,\r\n                    x2: newX + colsHalf,\r\n                    y1: newY - rowsHalf,\r\n                    y2: newY + colsHalf,\r\n                    z1: z,\r\n                    z2: z,\r\n                });\r\n                (_a = this.observer) === null || _a === void 0 ? void 0 : _a.call(this);\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    AddPropTool.prototype.move = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        this.cursor.drawImage(x, y, this.img);\r\n    };\r\n    AddPropTool.prototype.leave = function () {\r\n        this.cursor.clear();\r\n    };\r\n    AddPropTool.prototype.correctPosition = function (v) {\r\n        v = v * SCALE;\r\n        var step = this.matrix.cellSize;\r\n        return Math.round(v / step) * step;\r\n    };\r\n    return AddPropTool;\r\n}());\r\nexport { AddPropTool };\r\n","var MAX_CLICK_DELTA = 4;\r\nvar PointerService = /** @class */ (function () {\r\n    function PointerService(el) {\r\n        var _this = this;\r\n        this.el = el;\r\n        this.touchX = 0;\r\n        this.touchY = 0;\r\n        this.startX = 0;\r\n        this.startY = 0;\r\n        this.maxDeltaX = 0;\r\n        this.maxDeltaY = 0;\r\n        this.touchId = 0;\r\n        this.handler = null;\r\n        this.handleTouchStart = function (e) {\r\n            var _a, _b;\r\n            if (_this.touchId !== 0) {\r\n                return;\r\n            }\r\n            var touch = e.targetTouches[0];\r\n            _this.touchId = touch.identifier;\r\n            _this.touchX = touch.clientX;\r\n            _this.touchY = touch.clientY;\r\n            _this.maxDeltaX = 0;\r\n            _this.maxDeltaY = 0;\r\n            var elPos = _this.el.getBoundingClientRect();\r\n            _this.startX = touch.clientX - elPos.left;\r\n            _this.startY = touch.clientY - elPos.top;\r\n            (_b = (_a = _this.handler) === null || _a === void 0 ? void 0 : _a.start) === null || _b === void 0 ? void 0 : _b.call(_a, _this.startX, _this.startY);\r\n        };\r\n        this.handleTouchMove = function (e) {\r\n            var _a, _b;\r\n            var touch = _this.getTouchById(e.targetTouches);\r\n            if (!touch) {\r\n                return;\r\n            }\r\n            var dx = _this.touchX - touch.clientX;\r\n            var dy = _this.touchY - touch.clientY;\r\n            _this.maxDeltaX = Math.max(dx, _this.maxDeltaX);\r\n            _this.maxDeltaY = Math.max(dy, _this.maxDeltaY);\r\n            (_b = (_a = _this.handler) === null || _a === void 0 ? void 0 : _a.drag) === null || _b === void 0 ? void 0 : _b.call(_a, dx, dy, _this.startX - dx, _this.startY - dy);\r\n        };\r\n        this.handleTouchEnd = function (e) {\r\n            var _a, _b, _c, _d;\r\n            var touch = _this.getTouchById(e.targetTouches);\r\n            if (!touch) {\r\n                _this.touchId = 0;\r\n                (_b = (_a = _this.handler) === null || _a === void 0 ? void 0 : _a.stop) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n            }\r\n            if (_this.maxDeltaX < MAX_CLICK_DELTA && _this.maxDeltaY < MAX_CLICK_DELTA) {\r\n                (_d = (_c = _this.handler) === null || _c === void 0 ? void 0 : _c.click) === null || _d === void 0 ? void 0 : _d.call(_c, _this.startX - _this.maxDeltaX, _this.startY - _this.maxDeltaY);\r\n            }\r\n        };\r\n        this.handleMouseDown = function (e) {\r\n            var _a, _b, _c, _d;\r\n            _this.touchX = e.clientX;\r\n            _this.touchY = e.clientY;\r\n            var elPos = _this.el.getBoundingClientRect();\r\n            _this.startX = e.clientX - elPos.left;\r\n            _this.startY = e.clientY - elPos.top;\r\n            _this.maxDeltaX = 0;\r\n            _this.maxDeltaY = 0;\r\n            document.addEventListener('mousemove', _this.handleMouseDrag, { capture: true });\r\n            document.addEventListener('mouseup', _this.handleMouseUp, { capture: true });\r\n            (_b = (_a = _this.handler) === null || _a === void 0 ? void 0 : _a.start) === null || _b === void 0 ? void 0 : _b.call(_a, _this.startX, _this.startY);\r\n            (_d = (_c = _this.handler) === null || _c === void 0 ? void 0 : _c.click) === null || _d === void 0 ? void 0 : _d.call(_c, _this.startX, _this.startY);\r\n        };\r\n        this.handleMouseDrag = function (e) {\r\n            var _a, _b;\r\n            var dx = _this.touchX - e.clientX;\r\n            var dy = _this.touchY - e.clientY;\r\n            _this.maxDeltaX = Math.max(dx, _this.maxDeltaX);\r\n            _this.maxDeltaY = Math.max(dy, _this.maxDeltaY);\r\n            (_b = (_a = _this.handler) === null || _a === void 0 ? void 0 : _a.drag) === null || _b === void 0 ? void 0 : _b.call(_a, dx, dy, _this.startX - dx, _this.startY - dy);\r\n        };\r\n        this.handleMouseMove = function (e) {\r\n            var _a, _b;\r\n            var elPos = _this.el.getBoundingClientRect();\r\n            var dx = e.clientX - elPos.left;\r\n            var dy = e.clientY - elPos.top;\r\n            _this.maxDeltaX = Math.max(dx, _this.maxDeltaX);\r\n            _this.maxDeltaY = Math.max(dy, _this.maxDeltaY);\r\n            (_b = (_a = _this.handler) === null || _a === void 0 ? void 0 : _a.move) === null || _b === void 0 ? void 0 : _b.call(_a, dx, dy);\r\n        };\r\n        this.handleMouseUp = function () {\r\n            var _a, _b;\r\n            document.removeEventListener('mousemove', _this.handleMouseDrag, { capture: true });\r\n            document.removeEventListener('mouseup', _this.handleMouseUp, { capture: true });\r\n            (_b = (_a = _this.handler) === null || _a === void 0 ? void 0 : _a.stop) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n        };\r\n        this.handleMouseLeave = function () {\r\n            var _a, _b;\r\n            (_b = (_a = _this.handler) === null || _a === void 0 ? void 0 : _a.leave) === null || _b === void 0 ? void 0 : _b.call(_a);\r\n        };\r\n        this.assignPointerEvents();\r\n    }\r\n    PointerService.prototype.setHandler = function (handler) {\r\n        this.handler = handler;\r\n    };\r\n    PointerService.prototype.assignPointerEvents = function () {\r\n        if ('ontouchstart' in document) {\r\n            this.el.addEventListener('touchstart', this.handleTouchStart, { passive: false });\r\n            this.el.addEventListener('touchmove', this.handleTouchMove, { passive: false });\r\n            this.el.addEventListener('touchend', this.handleTouchEnd, { passive: false });\r\n        }\r\n        else {\r\n            this.el.addEventListener('mousedown', this.handleMouseDown);\r\n            this.el.addEventListener('mousemove', this.handleMouseMove);\r\n            this.el.addEventListener('mouseleave', this.handleMouseLeave);\r\n        }\r\n    };\r\n    PointerService.prototype.getTouchById = function (list) {\r\n        for (var i = 0; i < list.length; i++) {\r\n            if (list[i].identifier === this.touchId) {\r\n                return list[i];\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    return PointerService;\r\n}());\r\nexport { PointerService };\r\n","import { CURSOR_CHANGE_COLOR, PAINT_COLOR_ALPHA, SCALE, SNOW_SPHERE_MAX_RADIUS } from \"game/config\";\r\nimport { mixColors } from \"game/helpers/color\";\r\nimport { SnowCell } from \"game/snow/snow-cell\";\r\nvar PaintTool = /** @class */ (function () {\r\n    function PaintTool(matrix, matrixHistory, cursor) {\r\n        this.matrix = matrix;\r\n        this.matrixHistory = matrixHistory;\r\n        this.cursor = cursor;\r\n        this.size = 20;\r\n        this.colorLight = null;\r\n        this.colorDark = null;\r\n        this.observer = null;\r\n    }\r\n    PaintTool.prototype.setColor = function (colorLight, colorDark) {\r\n        this.colorLight = colorLight;\r\n        this.colorDark = colorDark;\r\n    };\r\n    PaintTool.prototype.observe = function (func) {\r\n        this.observer = func;\r\n    };\r\n    PaintTool.prototype.click = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var _a = this.matrix.getMatrixXYByClientXY(x, y), newX = _a.x, newY = _a.y;\r\n        this.paintCircle(newX, newY);\r\n    };\r\n    PaintTool.prototype.move = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        this.cursor.drawCircle(x, y, this.size * this.matrix.cellSize, CURSOR_CHANGE_COLOR);\r\n    };\r\n    PaintTool.prototype.leave = function () {\r\n        this.cursor.clear();\r\n    };\r\n    PaintTool.prototype.paintCircle = function (centerX, centerY) {\r\n        if (this.colorLight === null || this.colorDark === null) {\r\n            return;\r\n        }\r\n        var size = Math.min(SNOW_SPHERE_MAX_RADIUS, this.size);\r\n        var minY = Math.max(0, centerY - size);\r\n        var maxY = Math.min(this.matrix.rows - 1, centerY + size);\r\n        var minX = Math.max(0, centerX - size);\r\n        var maxX = Math.min(this.matrix.cols - 1, centerX + size);\r\n        var minZ = this.matrix.levels - 1;\r\n        var maxZ = 0;\r\n        var mat = this.matrix.matrix;\r\n        for (var y = minY; y <= maxY; y++) {\r\n            for (var x = minX; x <= maxX; x++) {\r\n                var z = this.matrix.getZForNearestItem(x, y);\r\n                if (z === null) {\r\n                    continue;\r\n                }\r\n                var dist = Math.sqrt(Math.pow((x - centerX), 2) + Math.pow((y - centerY), 2));\r\n                if (dist > size) {\r\n                    continue;\r\n                }\r\n                minZ = z < minZ ? z : minZ;\r\n                maxZ = z > maxZ ? z : maxZ;\r\n                var alpha = (PAINT_COLOR_ALPHA * (1 - dist / size)) | 0;\r\n                var cell = mat[y][x][z];\r\n                SnowCell.updateCellHash(cell);\r\n                var lightColor = PaintTool.copyColorWithNewAlpha(this.colorLight, alpha);\r\n                var colorDark = PaintTool.copyColorWithNewAlpha(this.colorDark, alpha);\r\n                if (cell.colorDark !== null) {\r\n                    cell.colorLight = mixColors(lightColor, cell.colorLight);\r\n                    cell.colorDark = mixColors(colorDark, cell.colorDark);\r\n                }\r\n                else {\r\n                    cell.colorLight = lightColor;\r\n                    cell.colorDark = colorDark;\r\n                }\r\n            }\r\n        }\r\n        this.matrix.mergeChangedCube({\r\n            x1: minX,\r\n            x2: maxX,\r\n            y1: minY,\r\n            y2: maxY,\r\n            z1: minZ,\r\n            z2: maxZ,\r\n        });\r\n        if (this.observer !== null) {\r\n            this.observer();\r\n        }\r\n    };\r\n    PaintTool.prototype.correctPosition = function (v) {\r\n        v = v * SCALE;\r\n        var step = this.matrix.cellSize * 2;\r\n        return Math.round(v / step) * step;\r\n    };\r\n    PaintTool.copyColorWithNewAlpha = function (color, alpha) {\r\n        return [color[0], color[1], color[2], alpha];\r\n    };\r\n    return PaintTool;\r\n}());\r\nexport { PaintTool };\r\n","import { SnowMatrix } from \"game/snow/snow-matrix\";\r\nimport { SnowMatrixTransform } from \"game/snow/snow-matrix-transform\";\r\nimport { SnowCircle } from \"game/snow/shapes/snow-circle\";\r\nvar SnowCylinder = /** @class */ (function () {\r\n    function SnowCylinder() {\r\n    }\r\n    SnowCylinder.prototype.generateVertical = function (radius, length) {\r\n        var d = (radius << 1) + 1;\r\n        var mat = new SnowMatrix(d, length, d);\r\n        var transform = new SnowMatrixTransform(mat);\r\n        for (var y = 0; y < length; y++) {\r\n            transform.merge(new SnowCircle().generateYAxis(radius), 0, y, 0);\r\n        }\r\n        return mat;\r\n    };\r\n    SnowCylinder.prototype.generateHorizontal = function (radius, length) {\r\n        var d = (radius << 1) + 1;\r\n        var mat = new SnowMatrix(d, d, length);\r\n        var transform = new SnowMatrixTransform(mat);\r\n        for (var z = 0; z < length; z++) {\r\n            transform.merge(new SnowCircle().generateZAxis(radius), 0, 0, z);\r\n        }\r\n        return mat;\r\n    };\r\n    return SnowCylinder;\r\n}());\r\nexport { SnowCylinder };\r\n","import { CURSOR_ADD_COLOR, MATRIX_LEVELS, SCALE } from \"game/config\";\r\nimport { SnowCylinder } from \"game/snow/shapes/snow-cylinder\";\r\nvar AddCylinderTool = /** @class */ (function () {\r\n    function AddCylinderTool(matrix, matrixTransform, cursor) {\r\n        this.matrix = matrix;\r\n        this.matrixTransform = matrixTransform;\r\n        this.cursor = cursor;\r\n        this.size = 40;\r\n        this.observer = null;\r\n    }\r\n    AddCylinderTool.prototype.observe = function (func) {\r\n        this.observer = func;\r\n    };\r\n    AddCylinderTool.prototype.click = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var _a = this.matrix.getMatrixXYByClientXY(x, y), newX = _a.x, newY = _a.y;\r\n        this.addCylinder(newX, newY);\r\n    };\r\n    AddCylinderTool.prototype.move = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var size = this.size * this.matrix.cellSize;\r\n        var sizeHalf = size / 2;\r\n        this.cursor.drawRect(x - size, y - sizeHalf, size * 2, size, CURSOR_ADD_COLOR);\r\n    };\r\n    AddCylinderTool.prototype.leave = function () {\r\n        this.cursor.clear();\r\n    };\r\n    AddCylinderTool.prototype.correctPosition = function (v) {\r\n        v = v * SCALE;\r\n        var step = this.matrix.cellSize * 2;\r\n        return Math.round(v / step) * step;\r\n    };\r\n    AddCylinderTool.prototype.addCylinder = function (x, y) {\r\n        var cylinder = new SnowCylinder().generateVertical(this.size - 1, this.size);\r\n        var sizeHalf = this.size / 2;\r\n        this.matrixTransform.merge(cylinder, Math.round((x - this.size) / 2) * 2, Math.round((y - sizeHalf) / 2) * 2, Math.round(((MATRIX_LEVELS >> 1) - this.size) / 2) * 2);\r\n        if (this.observer !== null) {\r\n            this.observer();\r\n        }\r\n    };\r\n    return AddCylinderTool;\r\n}());\r\nexport { AddCylinderTool };\r\n","import { SnowCell } from \"game/snow/snow-cell\";\r\nvar SnowGround = /** @class */ (function () {\r\n    function SnowGround() {\r\n    }\r\n    SnowGround.prototype.fill = function (matrix) {\r\n        var mat = matrix.matrix;\r\n        for (var x = 0; x < matrix.cols; x++) {\r\n            for (var z = 0; z < matrix.levels; z++) {\r\n                var height = 5 * Math.sin(x / matrix.cols * Math.PI);\r\n                var y0 = Math.round((matrix.rows - 1) - height);\r\n                for (var y = y0; y < matrix.rows; y++) {\r\n                    mat[y][x][z] = new SnowCell();\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return SnowGround;\r\n}());\r\nexport { SnowGround };\r\n","import { CURSOR_ADD_COLOR, MATRIX_LEVELS, SCALE } from \"game/config\";\r\nimport { SnowCylinder } from \"game/snow/shapes/snow-cylinder\";\r\nvar AddCircleTool = /** @class */ (function () {\r\n    function AddCircleTool(matrix, matrixTransform, cursor) {\r\n        this.matrix = matrix;\r\n        this.matrixTransform = matrixTransform;\r\n        this.cursor = cursor;\r\n        this.size = 20;\r\n        this.observer = null;\r\n    }\r\n    AddCircleTool.prototype.observe = function (func) {\r\n        this.observer = func;\r\n    };\r\n    AddCircleTool.prototype.click = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var _a = this.matrix.getMatrixXYByClientXY(x, y), newX = _a.x, newY = _a.y;\r\n        this.addCircle(newX, newY);\r\n    };\r\n    AddCircleTool.prototype.move = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        this.cursor.drawCircle(x, y, this.size * this.matrix.cellSize, CURSOR_ADD_COLOR);\r\n    };\r\n    AddCircleTool.prototype.leave = function () {\r\n        this.cursor.clear();\r\n    };\r\n    AddCircleTool.prototype.correctPosition = function (v) {\r\n        v = v * SCALE;\r\n        var step = this.matrix.cellSize * 2;\r\n        return Math.round(v / step) * step;\r\n    };\r\n    AddCircleTool.prototype.addCircle = function (x, y) {\r\n        this.matrixTransform.merge(new SnowCylinder().generateHorizontal(this.size, this.size), x - this.size, y - this.size, (MATRIX_LEVELS >> 1) - this.size);\r\n        if (this.observer !== null) {\r\n            this.observer();\r\n        }\r\n    };\r\n    return AddCircleTool;\r\n}());\r\nexport { AddCircleTool };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { AddBallTool } from \"game/editor/tools/add-ball-tool\";\r\nimport { AddCubeTool } from \"game/editor/tools/add-cube-tool\";\r\nimport { EraseBallTool } from \"game/editor/tools/erase-ball-tool\";\r\nimport { AddPropTool } from \"game/editor/tools/add-prop-tool\";\r\nimport { PointerService } from \"game/editor/pointer-service\";\r\nimport { PaintTool } from \"game/editor/tools/paint-tool\";\r\nimport { PAINT_COLORS } from \"game/config\";\r\nimport \"game/editor/view/tool.scss\";\r\nimport \"game/editor/view/color.scss\";\r\nimport \"game/editor/view/prop.scss\";\r\nimport \"game/editor/view/button.scss\";\r\nimport { SnowMatrixTransform } from \"game/snow/snow-matrix-transform\";\r\nimport { AddCylinderTool } from \"game/editor/tools/add-cylinder-tool\";\r\nimport { SnowGround } from \"game/snow/shapes/snow-ground\";\r\nimport { Shapes } from \"game/snow/shapes/shapes\";\r\nimport { AddCircleTool } from \"game/editor/tools/add-circle-tool\";\r\nimport { AddConeTool } from \"game/editor/tools/add-cone-tool\";\r\nimport { EraseCircleTool } from \"game/editor/tools/erase-circle-tool\";\r\nimport { EraseRectTool } from \"game/editor/tools/erase-rect-tool\";\r\nvar Tool;\r\n(function (Tool) {\r\n    Tool[Tool[\"ADD\"] = 0] = \"ADD\";\r\n    Tool[Tool[\"ERASE\"] = 1] = \"ERASE\";\r\n    Tool[Tool[\"PAINT\"] = 2] = \"PAINT\";\r\n    Tool[Tool[\"PROPS\"] = 3] = \"PROPS\";\r\n})(Tool || (Tool = {}));\r\nvar EditorTools = /** @class */ (function () {\r\n    function EditorTools(cont, scene, matrix, cursor, matrixHistory, props) {\r\n        var _this = this;\r\n        this.cont = cont;\r\n        this.scene = scene;\r\n        this.matrix = matrix;\r\n        this.cursor = cursor;\r\n        this.matrixHistory = matrixHistory;\r\n        this.props = props;\r\n        this.lastAddShape = Shapes.SPHERE;\r\n        this.lastEraseShape = Shapes.SPHERE;\r\n        this.lastPaintShape = Shapes.CIRCLE;\r\n        this.processChange = function () {\r\n            _this.scene.requestRender();\r\n            _this.matrixHistory.saveState();\r\n        };\r\n        this.pointerService = new PointerService(this.cursor.canvas);\r\n        var transform = new SnowMatrixTransform(this.matrix, this.matrixHistory, this.props);\r\n        this.addBallTool = new AddBallTool(this.matrix, transform, this.cursor);\r\n        this.addBallTool.observe(this.processChange);\r\n        this.addCubeTool = new AddCubeTool(this.matrix, transform, this.cursor);\r\n        this.addCubeTool.observe(this.processChange);\r\n        this.addCylinderTool = new AddCylinderTool(this.matrix, transform, this.cursor);\r\n        this.addCylinderTool.observe(this.processChange);\r\n        this.addCircleTool = new AddCircleTool(this.matrix, transform, this.cursor);\r\n        this.addCircleTool.observe(this.processChange);\r\n        this.addConeTool = new AddConeTool(this.matrix, transform, this.cursor);\r\n        this.addConeTool.observe(this.processChange);\r\n        this.eraseBallTool = new EraseBallTool(this.matrix, transform, this.cursor);\r\n        this.eraseBallTool.observe(this.processChange);\r\n        this.eraseCircleTool = new EraseCircleTool(this.matrix, transform, this.cursor);\r\n        this.eraseCircleTool.observe(this.processChange);\r\n        this.eraseRectTool = new EraseRectTool(this.matrix, transform, this.cursor);\r\n        this.eraseRectTool.observe(this.processChange);\r\n        this.addPropTool = new AddPropTool(this.matrix, this.matrixHistory, this.cursor, this.props);\r\n        this.addPropTool.observe(this.processChange);\r\n        this.paintTool = new PaintTool(this.matrix, this.matrixHistory, this.cursor);\r\n        this.paintTool.observe(this.processChange);\r\n        this.mount();\r\n        this.setBrushSize(7);\r\n    }\r\n    EditorTools.prototype.setBrushSize = function (size) {\r\n        var realSize = size * 2;\r\n        this.addBallTool.size = realSize;\r\n        this.addCubeTool.size = realSize;\r\n        this.addCylinderTool.size = realSize;\r\n        this.addCircleTool.size = realSize;\r\n        this.addConeTool.size = realSize;\r\n        this.eraseBallTool.size = realSize;\r\n        this.eraseCircleTool.size = realSize;\r\n        this.eraseRectTool.size = realSize;\r\n        this.paintTool.size = realSize / 2;\r\n        this.selectSize(size);\r\n    };\r\n    EditorTools.prototype.setAddSnowTool = function () {\r\n        this.currentTool = Tool.ADD;\r\n        this.showShapes([Shapes.SPHERE, Shapes.CIRCLE, Shapes.RECT, Shapes.CONE, Shapes.CYLINDER]);\r\n        this.setShape(this.lastAddShape);\r\n        this.selectTool('add');\r\n    };\r\n    EditorTools.prototype.setEraseTool = function () {\r\n        this.currentTool = Tool.ERASE;\r\n        this.showShapes([Shapes.SPHERE, Shapes.CIRCLE, Shapes.RECT]);\r\n        this.setShape(this.lastEraseShape);\r\n        this.selectTool('erase');\r\n    };\r\n    EditorTools.prototype.setPaintTool = function () {\r\n        this.currentTool = Tool.PAINT;\r\n        this.showShapes([Shapes.CIRCLE]);\r\n        this.setShape(this.lastPaintShape);\r\n        this.selectTool('paint');\r\n    };\r\n    EditorTools.prototype.setPropTool = function () {\r\n        this.currentTool = Tool.PROPS;\r\n        this.showShapes([]);\r\n        this.selectTool('props');\r\n    };\r\n    EditorTools.prototype.setShape = function (shape) {\r\n        this.selectShape(shape);\r\n        var tool;\r\n        if (this.currentTool === Tool.ADD) {\r\n            switch (shape) {\r\n                case Shapes.SPHERE:\r\n                    tool = this.addBallTool;\r\n                    break;\r\n                case Shapes.RECT:\r\n                    tool = this.addCubeTool;\r\n                    break;\r\n                case Shapes.CYLINDER:\r\n                    tool = this.addCylinderTool;\r\n                    break;\r\n                case Shapes.CIRCLE:\r\n                    tool = this.addCircleTool;\r\n                    break;\r\n                case Shapes.CONE:\r\n                    tool = this.addConeTool;\r\n                    break;\r\n            }\r\n            this.lastAddShape = shape;\r\n        }\r\n        else if (this.currentTool === Tool.ERASE) {\r\n            switch (shape) {\r\n                case Shapes.SPHERE:\r\n                    tool = this.eraseBallTool;\r\n                    break;\r\n                case Shapes.CIRCLE:\r\n                    tool = this.eraseCircleTool;\r\n                    break;\r\n                case Shapes.RECT:\r\n                    tool = this.eraseRectTool;\r\n                    break;\r\n            }\r\n            this.lastEraseShape = shape;\r\n        }\r\n        else if (this.currentTool === Tool.PAINT) {\r\n            switch (shape) {\r\n                case Shapes.CIRCLE:\r\n                    tool = this.paintTool;\r\n                    break;\r\n            }\r\n            this.lastPaintShape = shape;\r\n        }\r\n        if (tool) {\r\n            this.pointerService.setHandler(tool);\r\n        }\r\n    };\r\n    EditorTools.prototype.setAddPropTool = function (imgUrl, propCode) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var propImg, selectedColorEl;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        propImg = this.props.getPropByCode(propCode);\r\n                        if (!(propImg === null)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.props.setProp(propCode, imgUrl)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2:\r\n                        this.addPropTool.setPropCode(propCode);\r\n                        this.pointerService.setHandler(this.addPropTool);\r\n                        selectedColorEl = this.cont.querySelector('.snow-editor-prop_selected');\r\n                        selectedColorEl && selectedColorEl.classList.remove('snow-editor-prop_selected');\r\n                        this.cont.querySelector(\".snow-editor-prop[data-value=\\\"\".concat(propCode, \"\\\"]\"))\r\n                            .classList\r\n                            .toggle('snow-editor-prop_selected');\r\n                        this.cont.querySelector('.snow-editor__props').classList.remove('snow-editor__props_show');\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    EditorTools.prototype.setColorTool = function (colorIndex) {\r\n        this.paintTool.setColor(PAINT_COLORS[colorIndex][0], PAINT_COLORS[colorIndex][1]);\r\n        this.pointerService.setHandler(this.paintTool);\r\n        var selectedColorEl = this.cont.querySelector('.snow-editor-color_selected');\r\n        selectedColorEl && selectedColorEl.classList.remove('snow-editor-color_selected');\r\n        this.cont.querySelector(\".snow-editor-color[data-value=\\\"\".concat(colorIndex + 1, \"\\\"]\"))\r\n            .classList\r\n            .toggle('snow-editor-color_selected');\r\n        this.cont.querySelector('.snow-editor__colors').classList.remove('snow-editor__colors_show');\r\n    };\r\n    EditorTools.prototype.mount = function () {\r\n        var _this = this;\r\n        this.cont.querySelectorAll('.snow-editor-tool').forEach(function (el) {\r\n            switch (el.dataset.role) {\r\n                case 'add':\r\n                    el.onclick = function () { return _this.setAddSnowTool(); };\r\n                    break;\r\n                case 'erase':\r\n                    el.onclick = function () { return _this.setEraseTool(); };\r\n                    break;\r\n                case 'paint':\r\n                    el.onclick = function () { return _this.setPaintTool(); };\r\n                    break;\r\n                case 'props':\r\n                    el.onclick = function () { return _this.setPropTool(); };\r\n                    break;\r\n            }\r\n        });\r\n        this.cont.querySelectorAll('.snow-editor__size').forEach(function (el) {\r\n            el.onclick = function () { return _this.setBrushSize(parseInt(el.dataset.value, 10)); };\r\n        });\r\n        this.cont.querySelectorAll('.snow-editor-color').forEach(function (el) {\r\n            el.onclick = function () { return _this.setColorTool(parseInt(el.dataset.value, 10) - 1); };\r\n        });\r\n        this.cont.querySelectorAll('.snow-editor-prop').forEach(function (el) {\r\n            el.onclick = function () { return _this.setAddPropTool(window.getComputedStyle(el).backgroundImage.match(/url\\([\"']?([^\"')]+)[\"']?\\)/)[1], parseInt(el.dataset.value, 10)); };\r\n        });\r\n        this.cont.querySelectorAll('.snow-editor__shape').forEach(function (el) {\r\n            el.onclick = function () { return _this.setShape(el.dataset.shape); };\r\n        });\r\n        this.cont.querySelector('.snow-editor-button[data-role=\"undo\"]').onclick = function () {\r\n            if (!('structuredClone' in window)) {\r\n                alert('Ваш браузер не поддерживает эту функцию');\r\n                return;\r\n            }\r\n            _this.matrixHistory.restoreState();\r\n            _this.scene.requestRender();\r\n        };\r\n        this.cont.querySelector('.snow-editor-button[data-role=\"clear\"]').onclick = function () {\r\n            if (confirm('Вы действительно хотите удалить все?')) {\r\n                _this.matrix.clear();\r\n                new SnowGround().fill(_this.matrix);\r\n                _this.matrixHistory.reset();\r\n                _this.scene.requestRender();\r\n            }\r\n        };\r\n    };\r\n    EditorTools.prototype.showShapes = function (shapes) {\r\n        document.querySelectorAll('.snow-editor__shape').forEach(function (el) {\r\n            el.hidden = !shapes.includes(el.dataset.shape);\r\n        });\r\n    };\r\n    EditorTools.prototype.selectTool = function (name) {\r\n        var selectedEl = this.cont.querySelector('.snow-editor-tool_selected');\r\n        selectedEl && selectedEl.classList.remove('snow-editor-tool_selected');\r\n        this.cont.querySelector('.snow-editor__colors').classList.toggle('snow-editor__colors_show', name === 'paint');\r\n        this.cont.querySelector('.snow-editor__props').classList.toggle('snow-editor__props_show', name === 'props');\r\n        this.cont.querySelector(\".snow-editor-tool[data-role=\\\"\".concat(name, \"\\\"]\"))\r\n            .classList.add('snow-editor-tool_selected');\r\n    };\r\n    EditorTools.prototype.selectSize = function (value) {\r\n        var selectedEl = this.cont.querySelector('.snow-editor__size_selected');\r\n        selectedEl && selectedEl.classList.remove('snow-editor__size_selected');\r\n        this.cont.querySelector(\".snow-editor__size[data-value=\\\"\".concat(value, \"\\\"]\"))\r\n            .classList.add('snow-editor__size_selected');\r\n    };\r\n    EditorTools.prototype.selectShape = function (shape) {\r\n        var selectedEl = this.cont.querySelector('.snow-editor__shape_selected');\r\n        selectedEl && selectedEl.classList.remove('snow-editor__shape_selected');\r\n        this.cont.querySelector(\".snow-editor__shape[data-shape=\\\"\".concat(shape, \"\\\"]\"))\r\n            .classList.add('snow-editor__shape_selected');\r\n    };\r\n    return EditorTools;\r\n}());\r\nexport { EditorTools };\r\n","import { SnowMatrix } from \"game/snow/snow-matrix\";\r\nimport { SnowMatrixTransform } from \"game/snow/snow-matrix-transform\";\r\nimport { SnowCircle } from \"game/snow/shapes/snow-circle\";\r\nvar SnowCone = /** @class */ (function () {\r\n    function SnowCone() {\r\n    }\r\n    SnowCone.prototype.generate = function (radius, length) {\r\n        var d = (radius << 1) + 1;\r\n        var mat = new SnowMatrix(d, length, d);\r\n        var transform = new SnowMatrixTransform(mat);\r\n        var center = radius;\r\n        for (var y = 1; y < length; y++) {\r\n            var r = Math.round(radius * (y / (length - 1)));\r\n            transform.merge(new SnowCircle().generateYAxis(r), center - r, y, center - r);\r\n        }\r\n        return mat;\r\n    };\r\n    return SnowCone;\r\n}());\r\nexport { SnowCone };\r\n","import { CURSOR_ADD_COLOR, MATRIX_LEVELS, SCALE } from \"game/config\";\r\nimport { SnowCone } from \"game/snow/shapes/snow-cone\";\r\nvar AddConeTool = /** @class */ (function () {\r\n    function AddConeTool(matrix, matrixTransform, cursor) {\r\n        this.matrix = matrix;\r\n        this.matrixTransform = matrixTransform;\r\n        this.cursor = cursor;\r\n        this.size = 20;\r\n        this.observer = null;\r\n    }\r\n    AddConeTool.prototype.observe = function (func) {\r\n        this.observer = func;\r\n    };\r\n    AddConeTool.prototype.click = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var _a = this.matrix.getMatrixXYByClientXY(x, y), newX = _a.x, newY = _a.y;\r\n        this.addCone(newX, newY);\r\n    };\r\n    AddConeTool.prototype.move = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var size = this.size * this.matrix.cellSize;\r\n        var size2 = size << 1;\r\n        this.cursor.drawTriangle(x - size, y - size, size2, size2, CURSOR_ADD_COLOR);\r\n    };\r\n    AddConeTool.prototype.leave = function () {\r\n        this.cursor.clear();\r\n    };\r\n    AddConeTool.prototype.correctPosition = function (v) {\r\n        v = v * SCALE;\r\n        var step = this.matrix.cellSize * 2;\r\n        return Math.round(v / step) * step;\r\n    };\r\n    AddConeTool.prototype.addCone = function (x, y) {\r\n        this.matrixTransform.merge(new SnowCone().generate(this.size, this.size * 2), x - this.size, y - this.size, (MATRIX_LEVELS >> 1) - this.size);\r\n        if (this.observer !== null) {\r\n            this.observer();\r\n        }\r\n    };\r\n    return AddConeTool;\r\n}());\r\nexport { AddConeTool };\r\n","import { CURSOR_DEL_COLOR, SCALE } from \"game/config\";\r\nimport { SnowCylinder } from \"game/snow/shapes/snow-cylinder\";\r\nvar EraseCircleTool = /** @class */ (function () {\r\n    function EraseCircleTool(matrix, matrixTransform, cursor) {\r\n        this.matrix = matrix;\r\n        this.matrixTransform = matrixTransform;\r\n        this.cursor = cursor;\r\n        this.size = 7;\r\n        this.observer = null;\r\n    }\r\n    EraseCircleTool.prototype.observe = function (func) {\r\n        this.observer = func;\r\n    };\r\n    EraseCircleTool.prototype.click = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var _a = this.matrix.getMatrixXYByClientXY(x, y), newX = _a.x, newY = _a.y;\r\n        this.excludeSphere(newX, newY);\r\n    };\r\n    EraseCircleTool.prototype.move = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        this.cursor.drawCircle(x, y, this.size * this.matrix.cellSize, CURSOR_DEL_COLOR);\r\n    };\r\n    EraseCircleTool.prototype.leave = function () {\r\n        this.cursor.clear();\r\n    };\r\n    EraseCircleTool.prototype.correctPosition = function (v) {\r\n        v = v * SCALE;\r\n        var step = this.matrix.cellSize * 2;\r\n        return Math.round(v / step) * step;\r\n    };\r\n    EraseCircleTool.prototype.excludeSphere = function (x, y) {\r\n        this.matrixTransform.excludeNearest(new SnowCylinder().generateHorizontal(this.size, this.size), x, y);\r\n        if (this.observer !== null) {\r\n            this.observer();\r\n        }\r\n    };\r\n    return EraseCircleTool;\r\n}());\r\nexport { EraseCircleTool };\r\n","import { CURSOR_DEL_COLOR, SCALE } from \"game/config\";\r\nimport { SnowCube } from \"game/snow/shapes/snow-cube\";\r\nvar EraseRectTool = /** @class */ (function () {\r\n    function EraseRectTool(matrix, matrixTransform, cursor) {\r\n        this.matrix = matrix;\r\n        this.matrixTransform = matrixTransform;\r\n        this.cursor = cursor;\r\n        this.size = 7;\r\n        this.observer = null;\r\n    }\r\n    EraseRectTool.prototype.observe = function (func) {\r\n        this.observer = func;\r\n    };\r\n    EraseRectTool.prototype.click = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var _a = this.matrix.getMatrixXYByClientXY(x, y), newX = _a.x, newY = _a.y;\r\n        this.excludeSphere(newX, newY);\r\n    };\r\n    EraseRectTool.prototype.move = function (x, y) {\r\n        x = this.correctPosition(x);\r\n        y = this.correctPosition(y);\r\n        var size = this.size * this.matrix.cellSize;\r\n        var sizeHalf = size / 2;\r\n        this.cursor.drawRect(x - sizeHalf, y - sizeHalf, size, size, CURSOR_DEL_COLOR);\r\n    };\r\n    EraseRectTool.prototype.leave = function () {\r\n        this.cursor.clear();\r\n    };\r\n    EraseRectTool.prototype.correctPosition = function (v) {\r\n        v = v * SCALE;\r\n        var step = this.matrix.cellSize * 2;\r\n        return Math.round(v / step) * step;\r\n    };\r\n    EraseRectTool.prototype.excludeSphere = function (x, y) {\r\n        this.matrixTransform.excludeNearest(new SnowCube().generate(this.size), x, y);\r\n        if (this.observer !== null) {\r\n            this.observer();\r\n        }\r\n    };\r\n    return EraseRectTool;\r\n}());\r\nexport { EraseRectTool };\r\n","var RenderOptions = /** @class */ (function () {\r\n    function RenderOptions() {\r\n        this.showRenderAreas = false;\r\n    }\r\n    return RenderOptions;\r\n}());\r\nexport { RenderOptions };\r\n","import { HISTORY_MAX_RECORDS } from \"game/config\";\r\nvar SnowMatrixHistory = /** @class */ (function () {\r\n    function SnowMatrixHistory(matrix) {\r\n        this.matrix = matrix;\r\n        this.isSavedToServer = true;\r\n        this.history = [];\r\n        if (!('structuredClone' in window)) {\r\n            return;\r\n        }\r\n        this.prevState = structuredClone(this.matrix.matrix);\r\n    }\r\n    SnowMatrixHistory.prototype.reset = function () {\r\n        this.history = [];\r\n        this.isSavedToServer = false;\r\n        this.prevState = structuredClone(this.matrix.matrix);\r\n    };\r\n    SnowMatrixHistory.prototype.hasChanges = function () {\r\n        return this.history.length > 0;\r\n    };\r\n    SnowMatrixHistory.prototype.saveState = function () {\r\n        if (!('structuredClone' in window)) {\r\n            return;\r\n        }\r\n        this.isSavedToServer = false;\r\n        var mat = this.matrix.matrix;\r\n        var changes = [];\r\n        for (var y = 0; y < this.matrix.rows; y++) {\r\n            var lineX = mat[y];\r\n            var lineXPrev = this.prevState[y];\r\n            for (var x = 0; x < this.matrix.cols; x++) {\r\n                var lineZ = lineX[x];\r\n                var lineZPrev = lineXPrev[x];\r\n                for (var z = 0; z < this.matrix.levels; z++) {\r\n                    var cell = lineZ[z];\r\n                    var cellPrev = lineZPrev[z];\r\n                    if (cell === null) {\r\n                        if (cellPrev !== null) {\r\n                            // cell has been removed\r\n                            lineZPrev[z] = null;\r\n                            changes.push({ x: x, y: y, z: z, cell: cellPrev });\r\n                        }\r\n                    }\r\n                    else if (cellPrev === null) {\r\n                        // new cell has been removed\r\n                        lineZPrev[z] = structuredClone(cell);\r\n                        changes.push({ x: x, y: y, z: z, cell: null });\r\n                    }\r\n                    else if (cell.hash !== cellPrev.hash) {\r\n                        // changed cell\r\n                        lineZPrev[z] = structuredClone(cell);\r\n                        changes.push({ x: x, y: y, z: z, cell: cellPrev });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        console.log('save changes ', changes.length);\r\n        this.history.push(changes);\r\n        if (this.history.length > HISTORY_MAX_RECORDS) {\r\n            this.history.shift();\r\n        }\r\n    };\r\n    SnowMatrixHistory.prototype.restoreState = function () {\r\n        if (this.history.length < 1) {\r\n            return;\r\n        }\r\n        this.isSavedToServer = false;\r\n        var changes = this.history.pop();\r\n        var matSrc = this.prevState;\r\n        var matDst = this.matrix.matrix;\r\n        for (var _i = 0, changes_1 = changes; _i < changes_1.length; _i++) {\r\n            var rec = changes_1[_i];\r\n            matSrc[rec.y][rec.x][rec.z] = rec.cell;\r\n        }\r\n        for (var y = 0; y < this.matrix.rows; y++) {\r\n            var lineX = matDst[y];\r\n            var lineXPrev = matSrc[y];\r\n            for (var x = 0; x < this.matrix.cols; x++) {\r\n                var lineZ = lineX[x];\r\n                var lineZPrev = lineXPrev[x];\r\n                for (var z = 0; z < this.matrix.levels; z++) {\r\n                    var cell = lineZ[z];\r\n                    var cellPrev = lineZPrev[z];\r\n                    if (cell === null) {\r\n                        if (cellPrev !== null) {\r\n                            lineZ[z] = structuredClone(cellPrev);\r\n                        }\r\n                    }\r\n                    else if (cellPrev === null) {\r\n                        lineZ[z] = null;\r\n                    }\r\n                    else if (cell.hash !== cellPrev.hash) {\r\n                        lineZ[z] = structuredClone(cellPrev);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.matrix.setInitialChangedCube();\r\n        this.matrix.resetCache();\r\n    };\r\n    return SnowMatrixHistory;\r\n}());\r\nexport { SnowMatrixHistory };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar SnowProps = /** @class */ (function () {\r\n    function SnowProps() {\r\n        this.props = new Map();\r\n    }\r\n    SnowProps.prototype.getPropByCode = function (code) {\r\n        return this.props.get(code) || null;\r\n    };\r\n    SnowProps.prototype.setProp = function (code, url) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (r) {\r\n                        var img = new Image();\r\n                        img.crossOrigin = 'anonymous';\r\n                        img.onload = function () { return r(img); };\r\n                        img.src = url;\r\n                        _this.props.set(code, img);\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    return SnowProps;\r\n}());\r\nexport { SnowProps };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nvar EditorSave = /** @class */ (function () {\r\n    function EditorSave(cont, matrix, history, userId) {\r\n        var _this = this;\r\n        this.cont = cont;\r\n        this.matrix = matrix;\r\n        this.history = history;\r\n        this.userId = userId;\r\n        this.saveBtn = this.cont.querySelector('button[data-role=\"save\"]');\r\n        this.saveBtn.onclick = function () { return _this.save(); };\r\n    }\r\n    EditorSave.prototype.save = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var out, mat, y, lineX, x, lineZ, z, cell, formData, res, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.userId === 0) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this.saveBtn.disabled = true;\r\n                        this.cont.querySelectorAll('.snow-editor__message[data-group=\"save\"]').forEach(function (el) { return el.hidden = true; });\r\n                        out = [];\r\n                        mat = this.matrix.matrix;\r\n                        for (y = 0; y < this.matrix.rows; y++) {\r\n                            lineX = mat[y];\r\n                            for (x = 0; x < this.matrix.cols; x++) {\r\n                                lineZ = lineX[x];\r\n                                for (z = 0; z < this.matrix.levels; z++) {\r\n                                    cell = lineZ[z];\r\n                                    if (cell === null) {\r\n                                        continue;\r\n                                    }\r\n                                    out.push.apply(out, __spreadArray(__spreadArray(__spreadArray([y, x, z,\r\n                                        Math.floor(cell.extraRadius * 10),\r\n                                        Math.floor(cell.darkness * 255)], (cell.colorLight === null ? [0, 0, 0, 0] : cell.colorLight), false), (cell.colorDark === null ? [0, 0, 0, 0] : cell.colorDark), false), [cell.prop], false));\r\n                                }\r\n                            }\r\n                        }\r\n                        this.history.isSavedToServer = true;\r\n                        formData = new FormData();\r\n                        formData.append('f', new Blob([new Uint8Array(out)]));\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 4, , 5]);\r\n                        return [4 /*yield*/, fetch('./save.ajax.php', {\r\n                                method: 'POST',\r\n                                body: formData\r\n                            })];\r\n                    case 2: return [4 /*yield*/, (_a.sent()).json()];\r\n                    case 3:\r\n                        res = _a.sent();\r\n                        if (!res.result) {\r\n                            console.error(res.message);\r\n                            this.saveBtn.disabled = false;\r\n                            this.showError();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        e_1 = _a.sent();\r\n                        console.error(e_1);\r\n                        this.saveBtn.disabled = false;\r\n                        this.showError();\r\n                        return [2 /*return*/];\r\n                    case 5:\r\n                        this.showSuccess();\r\n                        this.saveBtn.disabled = false;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    EditorSave.prototype.showError = function () {\r\n        this.cont.querySelectorAll('.snow-editor__message[data-group=\"save\"]')\r\n            .forEach(function (el) { return el.hidden = el.classList.contains('snow-editor__message_success'); });\r\n    };\r\n    EditorSave.prototype.showSuccess = function () {\r\n        this.cont.querySelectorAll('.snow-editor__message[data-group=\"save\"]')\r\n            .forEach(function (el) { return el.hidden = el.classList.contains('snow-editor__message_error'); });\r\n    };\r\n    return EditorSave;\r\n}());\r\nexport { EditorSave };\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar EditorDestroy = /** @class */ (function () {\r\n    function EditorDestroy(cont, userId) {\r\n        var _this = this;\r\n        this.cont = cont;\r\n        this.userId = userId;\r\n        this.destroyDtn = this.cont.querySelector('button[data-role=\"destroy\"]');\r\n        this.destroyDtn.onclick = function () { return _this.destroy(); };\r\n    }\r\n    EditorDestroy.prototype.destroy = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var res, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.userId === 0) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this.destroyDtn.disabled = true;\r\n                        this.cont.querySelectorAll('.snow-editor__message[data-group=\"destroy\"]').forEach(function (el) { return el.hidden = true; });\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 4, , 5]);\r\n                        return [4 /*yield*/, fetch('./destroy.ajax.php', {\r\n                                method: 'POST'\r\n                            })];\r\n                    case 2: return [4 /*yield*/, (_a.sent()).json()];\r\n                    case 3:\r\n                        res = _a.sent();\r\n                        if (!res.result) {\r\n                            console.error(res.message);\r\n                            this.destroyDtn.disabled = false;\r\n                            this.showError();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        e_1 = _a.sent();\r\n                        console.error(e_1);\r\n                        this.destroyDtn.disabled = false;\r\n                        this.showError();\r\n                        return [2 /*return*/];\r\n                    case 5:\r\n                        this.showSuccess();\r\n                        this.destroyDtn.disabled = false;\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    EditorDestroy.prototype.showError = function () {\r\n        this.cont.querySelectorAll('.snow-editor__message[data-group=\"destroy\"]')\r\n            .forEach(function (el) { return el.hidden = el.classList.contains('snow-editor__message_success'); });\r\n    };\r\n    EditorDestroy.prototype.showSuccess = function () {\r\n        this.cont.querySelectorAll('.snow-editor__message[data-group=\"destroy\"]')\r\n            .forEach(function (el) { return el.hidden = el.classList.contains('snow-editor__message_error'); });\r\n    };\r\n    return EditorDestroy;\r\n}());\r\nexport { EditorDestroy };\r\n","import { SnowMatrix } from \"game/snow/snow-matrix\";\r\nimport { MATRIX_COLS, MATRIX_LEVELS, MATRIX_ROWS } from \"game/config\";\r\nimport { SnowScene } from \"game/snow/snow-scene\";\r\nimport { SnowRenderer } from \"game/snow/snow-renderer\";\r\nimport { SnowCursor } from \"game/snow/snow-cursor\";\r\nimport { EditorTools } from \"game/editor/editor-tools\";\r\nimport { RenderOptions } from \"game/snow/render-options\";\r\nimport \"game/editor/view/editor.scss\";\r\nimport view from \"game/editor/view/editor.hbs\";\r\nimport { createElementFromHtml } from \"game/helpers/dom\";\r\nimport { SnowMatrixHistory } from \"game/snow/snow-matrix-history\";\r\nimport { SnowProps } from \"game/snow/snow-props\";\r\nimport { SnowGround } from \"game/snow/shapes/snow-ground\";\r\nimport { EditorSave } from \"game/editor/editor-save\";\r\nimport { EditorDestroy } from \"game/editor/editor-destroy\";\r\nvar Editor = /** @class */ (function () {\r\n    function Editor(userId, userName) {\r\n        var _this = this;\r\n        this.el = createElementFromHtml(view({\r\n            userId: userId,\r\n            userName: userName,\r\n            props: new Array(84).fill(null).map(function (v, i) { return ({ i: i + 1 }); })\r\n        }));\r\n        this.props = new SnowProps();\r\n        this.matrix = new SnowMatrix(MATRIX_COLS, MATRIX_ROWS, MATRIX_LEVELS);\r\n        new SnowGround().fill(this.matrix);\r\n        this.matrixHistory = new SnowMatrixHistory(this.matrix);\r\n        this.renderOptions = new RenderOptions();\r\n        this.renderer = new SnowRenderer(this.matrix, this.renderOptions, this.props);\r\n        this.cursor = new SnowCursor(this.renderer, this.matrix);\r\n        this.scene = new SnowScene(this.matrix, this.matrixHistory, this.renderer);\r\n        this.tools = new EditorTools(this.el, this.scene, this.matrix, this.cursor, this.matrixHistory, this.props);\r\n        this.save = new EditorSave(this.el, this.matrix, this.matrixHistory, userId);\r\n        this.destroy = new EditorDestroy(this.el, userId);\r\n        var cont = this.el.querySelector('.snow-editor__canvas');\r\n        cont.appendChild(this.renderer.canvas);\r\n        cont.appendChild(this.cursor.canvas);\r\n        window.addEventListener('beforeunload', function (e) {\r\n            if (!_this.matrixHistory.hasChanges() || _this.matrixHistory.isSavedToServer) {\r\n                return null;\r\n            }\r\n            var msg = '';\r\n            e.returnValue = msg;\r\n            return msg;\r\n        });\r\n        this.tools.setAddSnowTool();\r\n    }\r\n    return Editor;\r\n}());\r\nexport { Editor };\r\n","export function createElementFromHtml(html) {\r\n    var tmp = document.createElement('template');\r\n    tmp.innerHTML = html;\r\n    return tmp.content.firstElementChild;\r\n}\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { SnowMatrix } from \"game/snow/snow-matrix\";\r\nimport { MATRIX_COLS, MATRIX_LEVELS, MATRIX_ROWS } from \"game/config\";\r\nimport { SnowCell } from \"game/snow/snow-cell\";\r\nimport { SnowProps } from \"game/snow/snow-props\";\r\nimport { RenderOptions } from \"game/snow/render-options\";\r\nimport { SnowMatrixHistory } from \"game/snow/snow-matrix-history\";\r\nimport { SnowRenderer } from \"game/snow/snow-renderer\";\r\nimport { SnowScene } from \"game/snow/snow-scene\";\r\nimport \"game/viewer/viewer.scss\";\r\nvar BYTES_PER_CELL = 14;\r\nvar Viewer = /** @class */ (function () {\r\n    function Viewer() {\r\n        this.props = new SnowProps();\r\n        this.matrix = new SnowMatrix(MATRIX_COLS, MATRIX_ROWS, MATRIX_LEVELS);\r\n        var matrixHistory = new SnowMatrixHistory(this.matrix);\r\n        var renderOptions = new RenderOptions();\r\n        var renderer = new SnowRenderer(this.matrix, renderOptions, this.props, true);\r\n        this.scene = new SnowScene(this.matrix, matrixHistory, renderer);\r\n        this.el = renderer.canvas;\r\n    }\r\n    Viewer.prototype.load = function (data) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.parseData(data)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.matrix.setInitialChangedCube();\r\n                        this.matrix.resetCache();\r\n                        this.scene.requestRender();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Viewer.prototype.parseData = function (data) {\r\n        var chars = Uint8Array.from(window.atob(data), function (c) { return c.charCodeAt(0); });\r\n        var propCodes = new Set();\r\n        var loadList = [];\r\n        for (var i = 0; i < chars.length; i += BYTES_PER_CELL) {\r\n            var y = chars[i];\r\n            var x = chars[i + 1];\r\n            var z = chars[i + 2];\r\n            var cell = this.matrix.matrix[y][x][z] = new SnowCell();\r\n            cell.extraRadius = chars[i + 3] / 10;\r\n            cell.darkness = chars[i + 4] / 255;\r\n            if (chars[i + 8] !== 0) {\r\n                cell.colorLight = [\r\n                    chars[i + 5],\r\n                    chars[i + 6],\r\n                    chars[i + 7],\r\n                    chars[i + 8],\r\n                ];\r\n            }\r\n            if (chars[i + 12] !== 0) {\r\n                cell.colorDark = [\r\n                    chars[i + 9],\r\n                    chars[i + 10],\r\n                    chars[i + 11],\r\n                    chars[i + 12],\r\n                ];\r\n            }\r\n            cell.prop = chars[i + 13];\r\n            if (cell.prop > 0 && !propCodes.has(cell.prop)) {\r\n                propCodes.add(cell.prop);\r\n                loadList.push(this.props.setProp(cell.prop, \"assets/prop\".concat(cell.prop, \".png\")));\r\n            }\r\n        }\r\n        if (loadList.length === 0) {\r\n            return Promise.resolve();\r\n        }\r\n        return Promise.all(loadList);\r\n    };\r\n    return Viewer;\r\n}());\r\nexport { Viewer };\r\n","import { Editor } from \"game/editor/editor\";\r\nimport { Viewer } from \"game/viewer/viewer\";\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    var cont = document.querySelector('.snow-editor-container');\r\n    if (cont) {\r\n        var editor = new Editor(parseInt(cont.dataset.userId, 10), cont.dataset.userName);\r\n        cont.appendChild(editor.el);\r\n    }\r\n    var viewCont = document.querySelector('.snow-view-container');\r\n    if (viewCont) {\r\n        var viewer = new Viewer();\r\n        viewer.load(document.querySelector('script#snow-data').textContent).then();\r\n        viewCont.appendChild(viewer.el);\r\n    }\r\n});\r\n"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","escapeExpression","hooks","helperMissing","nullContext","stack1","alias1","alias2","alias3","alias4","program","noop","_interopRequireDefault","obj","__esModule","_interopRequireWildcard","newObj","key","base","_handlebarsSafeString2","_handlebarsException2","Utils","runtime","_handlebarsNoConflict2","create","hb","HandlebarsEnvironment","extend","SafeString","Exception","VM","spec","inst","_utils","_exception2","_helpers","_decorators","_logger2","_internalProtoAccess","VERSION","COMPILER_REVISION","LAST_COMPATIBLE_COMPILER_REVISION","REVISION_CHANGES","objectType","decorators","this","registerDefaultHelpers","registerDefaultDecorators","constructor","logger","log","registerHelper","name","fn","toString","unregisterHelper","registerPartial","partial","unregisterPartial","registerDecorator","unregisterDecorator","resetLoggedPropertyAccesses","resetLoggedProperties","createFrame","instance","_decoratorsInline2","props","options","ret","context","original","args","errorProps","message","node","loc","line","undefined","endLineNumber","column","endColumn","start","end","tmp","Error","idx","length","captureStackTrace","lineNumber","defineProperty","value","enumerable","nop","_helpersBlockHelperMissing2","_helpersEach2","_helpersHelperMissing2","_helpersIf2","_helpersLog2","_helpersLookup2","_helpersWith2","moveHelperToHooks","helperName","keepHelper","inverse","isArray","ids","each","contextPath","appendContextPath","priorKey","i","execIteration","field","index","last","first","blockParams","isFunction","j","g","Symbol","iterator","newContext","it","next","done","push","keys","forEach","arguments","conditional","hash","includeZero","isEmpty","level","apply","createNewLookupObject","_len","sources","Array","_key","concat","createProtoAccessControl","runtimeOptions","defaultMethodWhiteList","defaultPropertyWhiteList","properties","whitelist","_createNewLookupObject","allowedProtoProperties","defaultValue","allowProtoPropertiesByDefault","methods","allowedProtoMethods","allowProtoMethodsByDefault","resultIsAllowed","result","protoAccessControl","protoAccessControlForType","loggedProperties","logUnexpecedPropertyAccessOnce","checkWhiteList","wrapHelper","transformOptionsFn","methodMap","lookupLevel","levelMap","indexOf","toLowerCase","parseInt","console","method","root","window","$Handlebars","noConflict","checkRevision","compilerInfo","compilerRevision","currentRevision","_base","runtimeVersions","compilerVersions","templateSpec","env","main","decorator","main_d","compiler","templateWasPrecompiledWithCompilerV7","strict","lookup","depths","len","lambda","current","invokePartial","resolvePartial","extendedOptions","compile","compilerOptions","indent","lines","split","l","join","programs","declaredBlockParams","programWrapper","wrapProgram","depth","_parent","mergeIfNeeded","param","common","seal","_setup","useData","initData","useBlockParams","useDepths","executeDecorators","isTop","mergedHelpers","_internalWrapHelper","passLookupPropertyOption","wrapHelpersToPassLookupProperty","usePartial","useDecorators","keepHelperInHelpers","allowCallsToHelperMissing","_child","currentPartialBlock","partialBlock","Function","prog","currentDepths","string","toHTML","array","possible","test","replace","badChars","escapeChar","object","frame","params","path","id","escape","chr","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","get","globalThis","e","prop","SnowRenderItem","cell","x","y","z","getInterpolatedColor","colorLight","colorDark","Math","max","min","convertColorDecToHex","color","padStart","convertHexToRgb","hex","substring","mixColors","frontRGBA","bgRGBA","slice","bgR","bgG","bgB","bgA","fgR","fgG","fgB","fgA","alpha","r","b","Shapes","SNOW_LIGHT_COLOR","SNOW_DARK_COLOR","SNOW_SHADOW_LIGHT_COLOR","SNOW_SHADOW_DARK_COLOR","PAINT_COLORS","CURSOR_ADD_COLOR","CURSOR_DEL_COLOR","RENDER_AREA_MATRIX_INDENT_CELLS","SnowMatrix","cols","rows","levels","fillMapYX","fillMapY","renderList","changedCube","x1","x2","y1","y2","z1","z2","cellSize","cellSizeHalf","MATRIX_CELL_SIZE","matrix","getEmptyMatrix","setInitialChangedCube","getElementsCount","cnt","line1","line2","getZForNearestItem","getMatrixXYByClientXY","clientX","clientY","floor","getFillMapYX","calcFillMap","getFillMapY","resetCache","mergeChangedCube","newCube","getChangedCubeWithRenderIndent","hasChangedArea","resetChangedArea","getRenderList","fillMapX","clear","_this","fill","map","SnowLightnessCalc","calc","mat","cube","checkFreeCellsAtTheTop","lightness","rightLight","topLight","checkFreeCellsAtTheRight","toY","toX","MATRIX_COLS","SnowDropShadowCalc","lastY","isDropShadow","SnowGroundingCalc","version","markGroundCells","fillYRay","lineX","lineZ","groundingVersion","y0","step","changes","flags","yDirection","needChangeDirection","parentCell","fillXRay","x0","cell2","fillZRay","z0","_a","_b","SnowGravityCalc","matrixTransform","hasChanges","maxY","setCell","SnowMatrixTransform","history","updateChangedCube","excludeNearest","removedLevels","exclude","matDst","matSrc","fromX","fromY","fromZ","toZ","deleted","merge","dy","dx","dz","img","getPropByCode","w","naturalWidth","h","naturalHeight","ceil","SnowScene","matrixHistory","renderer","physicsCalcTimerId","needRender","needResetChangedArea","animationRequestId","render","cancelAnimationFrame","startTime","performance","now","renderItems","to","from","pack","ar","__spreadArray","requestAnimationFrame","transform","dropShadowCalc","lightnessCalc","groupsCalc","gravityCalc","calcShadows","requestRender","requestPhysicsCalc","calcPhysics","needCalcAgain","timeout","clearTimeout","setTimeout","bind","MATH_PI_2","PI","SnowRenderer","keepOriginalScale","canvas","document","createElement","width","height","style","getContext","tempCanvas","tempContext","blurCanvas","blurContext","items","renderFromX","renderFromY","renderWidth","renderHeight","filterRenderList","layers","splitOnLayers","clearRect","save","layer","renderCells","applyBlur","renderProps","restore","drawImage","showRenderAreas","renderArea","filter","globalCompositeOperation","renderShadow","item","translate","renderCellShadow","renderCell","renderCellProps","beginPath","strokeStyle","rect","closePath","stroke","shift","minX","maxX","minY","MATRIX_LEVELS","_i","items_1","darkness","fillStyle","arc","extraRadius","radius","offset","MATH_PI2","SnowCursor","drawCircle","correctPosition","lineWidth","drawTriangle","moveTo","lineTo","drawRect","width2","height2","v","round","SnowCell","random","updateCellHash","SnowCircle","generateZAxis","center","lastX","angle","cos","sin","abs","generateYAxis","lastZ","SnowSphere","reduceCellsFactor","setReduceCellsFactor","factor","generate","circleMat","reduceCells","AddBallTool","cursor","size","observer","observe","func","click","newX","newY","addSphere","move","leave","SnowCube","AddCubeTool","addCube","sizeHalf","roundCorners","maxZ","EraseBallTool","excludeSphere","AddPropTool","code","setPropCode","colsHalf","rowsHalf","PointerService","el","touchX","touchY","startX","startY","maxDeltaX","maxDeltaY","touchId","handler","handleTouchStart","touch","targetTouches","identifier","elPos","getBoundingClientRect","left","top","handleTouchMove","getTouchById","drag","handleTouchEnd","_c","_d","stop","handleMouseDown","addEventListener","handleMouseDrag","capture","handleMouseUp","handleMouseMove","removeEventListener","handleMouseLeave","assignPointerEvents","setHandler","passive","list","PaintTool","setColor","paintCircle","centerX","centerY","minZ","dist","sqrt","pow","lightColor","copyColorWithNewAlpha","SnowCylinder","generateVertical","generateHorizontal","AddCylinderTool","addCylinder","cylinder","SnowGround","Tool","AddCircleTool","addCircle","SnowCone","AddConeTool","addCone","size2","EraseCircleTool","EraseRectTool","EditorTools","cont","scene","lastAddShape","SPHERE","lastEraseShape","lastPaintShape","CIRCLE","processChange","saveState","pointerService","addBallTool","addCubeTool","addCylinderTool","addCircleTool","addConeTool","eraseBallTool","eraseCircleTool","eraseRectTool","addPropTool","paintTool","mount","setBrushSize","realSize","selectSize","setAddSnowTool","currentTool","ADD","showShapes","RECT","CONE","CYLINDER","setShape","selectTool","setEraseTool","ERASE","setPaintTool","PAINT","setPropTool","PROPS","shape","tool","selectShape","setAddPropTool","imgUrl","propCode","thisArg","_arguments","generator","selectedColorEl","body","f","t","_","label","sent","trys","ops","verb","op","TypeError","pop","__generator","setProp","querySelector","classList","remove","toggle","P","Promise","resolve","reject","fulfilled","rejected","then","setColorTool","colorIndex","querySelectorAll","dataset","role","onclick","getComputedStyle","backgroundImage","match","restoreState","alert","confirm","reset","shapes","hidden","includes","selectedEl","add","RenderOptions","SnowMatrixHistory","isSavedToServer","prevState","structuredClone","lineXPrev","lineZPrev","cellPrev","changes_1","rec","SnowProps","Map","url","Image","crossOrigin","onload","src","set","EditorSave","userId","saveBtn","out","formData","res","e_1","disabled","FormData","append","Blob","Uint8Array","fetch","json","error","showError","showSuccess","contains","EditorDestroy","destroyDtn","destroy","Editor","userName","html","innerHTML","content","firstElementChild","renderOptions","tools","appendChild","returnValue","Viewer","load","parseData","chars","atob","c","charCodeAt","propCodes","Set","loadList","has","all","editor","viewCont","viewer","textContent"],"sourceRoot":""}